{"remainingRequest":"/home/hads/Documents/CoreUI-Vue/node_modules/babel-loader/lib/index.js!/home/hads/Downloads/pycharm-community-2020.1/plugins/python-ce/helpers/MathJax/jax/input/TeX/jax.js","dependencies":[{"path":"/home/hads/Downloads/pycharm-community-2020.1/plugins/python-ce/helpers/MathJax/jax/input/TeX/jax.js","mtime":1586259854000},{"path":"/home/hads/Documents/CoreUI-Vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hads/Documents/CoreUI-Vue/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgovKiAtKi0gTW9kZTogSmF2YXNjcmlwdDsgaW5kZW50LXRhYnMtbW9kZTpuaWw7IGpzLWluZGVudC1sZXZlbDogMiAtKi0gKi8KCi8qIHZpbTogc2V0IHRzPTIgZXQgc3c9MiB0dz04MDogKi8KCi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqCiAqCiAqICBNYXRoSmF4L2pheC9pbnB1dC9UZVgvamF4LmpzCiAqICAKICogIEltcGxlbWVudHMgdGhlIFRlWCBJbnB1dEpheCB0aGF0IHJlYWRzIG1hdGhlbWF0aWNzIGluCiAqICBUZVggYW5kIExhVGVYIGZvcm1hdCBhbmQgY29udmVydHMgaXQgdG8gdGhlIE1NTCBFbGVtZW50SmF4CiAqICBpbnRlcm5hbCBmb3JtYXQuCiAqCiAqICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICogIAogKiAgQ29weXJpZ2h0IChjKSAyMDA5LTIwMTUgVGhlIE1hdGhKYXggQ29uc29ydGl1bQogKiAKICogIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiAgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqIAogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKiAKICogIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqICBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KKGZ1bmN0aW9uIChURVgsIEhVQiwgQUpBWCkgewogIHZhciBNTUwsCiAgICAgIE5CU1AgPSAiXHhBMCI7CgogIHZhciBfID0gZnVuY3Rpb24gXyhpZCkgewogICAgcmV0dXJuIE1hdGhKYXguTG9jYWxpemF0aW9uLl8uYXBwbHkoTWF0aEpheC5Mb2NhbGl6YXRpb24sIFtbIlRlWCIsIGlkXV0uY29uY2F0KFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSkpOwogIH07CgogIHZhciBTVEFDSyA9IE1hdGhKYXguT2JqZWN0LlN1YmNsYXNzKHsKICAgIEluaXQ6IGZ1bmN0aW9uIEluaXQoZW52LCBpbm5lcikgewogICAgICB0aGlzLmdsb2JhbCA9IHsKICAgICAgICBpc0lubmVyOiBpbm5lcgogICAgICB9OwogICAgICB0aGlzLmRhdGEgPSBbU1RBQ0tJVEVNLnN0YXJ0KHRoaXMuZ2xvYmFsKV07CgogICAgICBpZiAoZW52KSB7CiAgICAgICAgdGhpcy5kYXRhWzBdLmVudiA9IGVudjsKICAgICAgfQoKICAgICAgdGhpcy5lbnYgPSB0aGlzLmRhdGFbMF0uZW52OwogICAgfSwKICAgIFB1c2g6IGZ1bmN0aW9uIFB1c2goKSB7CiAgICAgIHZhciBpLCBtLCBpdGVtLCB0b3A7CgogICAgICBmb3IgKGkgPSAwLCBtID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG07IGkrKykgewogICAgICAgIGl0ZW0gPSBhcmd1bWVudHNbaV07CiAgICAgICAgaWYgKCFpdGVtKSBjb250aW51ZTsKCiAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBNTUwubWJhc2UpIHsKICAgICAgICAgIGl0ZW0gPSBTVEFDS0lURU0ubW1sKGl0ZW0pOwogICAgICAgIH0KCiAgICAgICAgaXRlbS5nbG9iYWwgPSB0aGlzLmdsb2JhbDsKICAgICAgICB0b3AgPSB0aGlzLmRhdGEubGVuZ3RoID8gdGhpcy5Ub3AoKS5jaGVja0l0ZW0oaXRlbSkgOiB0cnVlOwoKICAgICAgICBpZiAodG9wIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgIHRoaXMuUG9wKCk7CiAgICAgICAgICB0aGlzLlB1c2guYXBwbHkodGhpcywgdG9wKTsKICAgICAgICB9IGVsc2UgaWYgKHRvcCBpbnN0YW5jZW9mIFNUQUNLSVRFTSkgewogICAgICAgICAgdGhpcy5Qb3AoKTsKICAgICAgICAgIHRoaXMuUHVzaCh0b3ApOwogICAgICAgIH0gZWxzZSBpZiAodG9wKSB7CiAgICAgICAgICB0aGlzLmRhdGEucHVzaChpdGVtKTsKCiAgICAgICAgICBpZiAoaXRlbS5lbnYpIHsKICAgICAgICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy5lbnYpIHsKICAgICAgICAgICAgICBpZiAodGhpcy5lbnYuaGFzT3duUHJvcGVydHkoaWQpKSB7CiAgICAgICAgICAgICAgICBpdGVtLmVudltpZF0gPSB0aGlzLmVudltpZF07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmVudiA9IGl0ZW0uZW52OwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaXRlbS5lbnYgPSB0aGlzLmVudjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBQb3A6IGZ1bmN0aW9uIFBvcCgpIHsKICAgICAgdmFyIGl0ZW0gPSB0aGlzLmRhdGEucG9wKCk7CgogICAgICBpZiAoIWl0ZW0uaXNPcGVuKSB7CiAgICAgICAgZGVsZXRlIGl0ZW0uZW52OwogICAgICB9CgogICAgICB0aGlzLmVudiA9IHRoaXMuZGF0YS5sZW5ndGggPyB0aGlzLlRvcCgpLmVudiA6IHt9OwogICAgICByZXR1cm4gaXRlbTsKICAgIH0sCiAgICBUb3A6IGZ1bmN0aW9uIFRvcChuKSB7CiAgICAgIGlmIChuID09IG51bGwpIHsKICAgICAgICBuID0gMTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZGF0YS5sZW5ndGggPCBuKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLmRhdGFbdGhpcy5kYXRhLmxlbmd0aCAtIG5dOwogICAgfSwKICAgIFByZXY6IGZ1bmN0aW9uIFByZXYobm9Qb3ApIHsKICAgICAgdmFyIHRvcCA9IHRoaXMuVG9wKCk7CgogICAgICBpZiAobm9Qb3ApIHsKICAgICAgICByZXR1cm4gdG9wLmRhdGFbdG9wLmRhdGEubGVuZ3RoIC0gMV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRvcC5Qb3AoKTsKICAgICAgfQogICAgfSwKICAgIHRvU3RyaW5nOiBmdW5jdGlvbiB0b1N0cmluZygpIHsKICAgICAgcmV0dXJuICJzdGFja1tcbiAgIiArIHRoaXMuZGF0YS5qb2luKCJcbiAgIikgKyAiXG5dIjsKICAgIH0KICB9KTsKICB2YXIgU1RBQ0tJVEVNID0gU1RBQ0suSXRlbSA9IE1hdGhKYXguT2JqZWN0LlN1YmNsYXNzKHsKICAgIHR5cGU6ICJiYXNlIiwKICAgIGVuZEVycm9yOgogICAgLypfKCkqLwogICAgWyJFeHRyYU9wZW5NaXNzaW5nQ2xvc2UiLCAiRXh0cmEgb3BlbiBicmFjZSBvciBtaXNzaW5nIGNsb3NlIGJyYWNlIl0sCiAgICBjbG9zZUVycm9yOgogICAgLypfKCkqLwogICAgWyJFeHRyYUNsb3NlTWlzc2luZ09wZW4iLCAiRXh0cmEgY2xvc2UgYnJhY2Ugb3IgbWlzc2luZyBvcGVuIGJyYWNlIl0sCiAgICByaWdodEVycm9yOgogICAgLypfKCkqLwogICAgWyJNaXNzaW5nTGVmdEV4dHJhUmlnaHQiLCAiTWlzc2luZyBcXGxlZnQgb3IgZXh0cmEgXFxyaWdodCJdLAogICAgSW5pdDogZnVuY3Rpb24gSW5pdCgpIHsKICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7CiAgICAgICAgdGhpcy5lbnYgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5kYXRhID0gW107CiAgICAgIHRoaXMuUHVzaC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfSwKICAgIFB1c2g6IGZ1bmN0aW9uIFB1c2goKSB7CiAgICAgIHRoaXMuZGF0YS5wdXNoLmFwcGx5KHRoaXMuZGF0YSwgYXJndW1lbnRzKTsKICAgIH0sCiAgICBQb3A6IGZ1bmN0aW9uIFBvcCgpIHsKICAgICAgcmV0dXJuIHRoaXMuZGF0YS5wb3AoKTsKICAgIH0sCiAgICBtbWxEYXRhOiBmdW5jdGlvbiBtbWxEYXRhKGluZmVycmVkLCBmb3JjZVJvdykgewogICAgICBpZiAoaW5mZXJyZWQgPT0gbnVsbCkgewogICAgICAgIGluZmVycmVkID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZGF0YS5sZW5ndGggPT09IDEgJiYgIWZvcmNlUm93KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVswXTsKICAgICAgfQoKICAgICAgcmV0dXJuIE1NTC5tcm93LmFwcGx5KE1NTCwgdGhpcy5kYXRhKS5XaXRoKGluZmVycmVkID8gewogICAgICAgIGluZmVycmVkOiB0cnVlCiAgICAgIH0gOiB7fSk7CiAgICB9LAogICAgY2hlY2tJdGVtOiBmdW5jdGlvbiBjaGVja0l0ZW0oaXRlbSkgewogICAgICBpZiAoaXRlbS50eXBlID09PSAib3ZlciIgJiYgdGhpcy5pc09wZW4pIHsKICAgICAgICBpdGVtLm51bSA9IHRoaXMubW1sRGF0YShmYWxzZSk7CiAgICAgICAgdGhpcy5kYXRhID0gW107CiAgICAgIH0KCiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICJjZWxsIiAmJiB0aGlzLmlzT3BlbikgewogICAgICAgIGlmIChpdGVtLmxpbmVicmVhaykgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgVEVYLkVycm9yKFsiTWlzcGxhY2VkIiwgIk1pc3BsYWNlZCAlMSIsIGl0ZW0ubmFtZV0pOwogICAgICB9CgogICAgICBpZiAoaXRlbS5pc0Nsb3NlICYmIHRoaXNbaXRlbS50eXBlICsgIkVycm9yIl0pIHsKICAgICAgICBURVguRXJyb3IodGhpc1tpdGVtLnR5cGUgKyAiRXJyb3IiXSk7CiAgICAgIH0KCiAgICAgIGlmICghaXRlbS5pc05vdFN0YWNrKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHRoaXMuUHVzaChpdGVtLmRhdGFbMF0pOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgV2l0aDogZnVuY3Rpb24gV2l0aChkZWYpIHsKICAgICAgZm9yICh2YXIgaWQgaW4gZGVmKSB7CiAgICAgICAgaWYgKGRlZi5oYXNPd25Qcm9wZXJ0eShpZCkpIHsKICAgICAgICAgIHRoaXNbaWRdID0gZGVmW2lkXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfSwKICAgIHRvU3RyaW5nOiBmdW5jdGlvbiB0b1N0cmluZygpIHsKICAgICAgcmV0dXJuIHRoaXMudHlwZSArICJbIiArIHRoaXMuZGF0YS5qb2luKCI7ICIpICsgIl0iOwogICAgfQogIH0pOwogIFNUQUNLSVRFTS5zdGFydCA9IFNUQUNLSVRFTS5TdWJjbGFzcyh7CiAgICB0eXBlOiAic3RhcnQiLAogICAgaXNPcGVuOiB0cnVlLAogICAgSW5pdDogZnVuY3Rpb24gSW5pdChnbG9iYWwpIHsKICAgICAgdGhpcy5TVVBFUihhcmd1bWVudHMpLkluaXQuY2FsbCh0aGlzKTsKICAgICAgdGhpcy5nbG9iYWwgPSBnbG9iYWw7CiAgICB9LAogICAgY2hlY2tJdGVtOiBmdW5jdGlvbiBjaGVja0l0ZW0oaXRlbSkgewogICAgICBpZiAoaXRlbS50eXBlID09PSAic3RvcCIpIHsKICAgICAgICByZXR1cm4gU1RBQ0tJVEVNLm1tbCh0aGlzLm1tbERhdGEoKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLlNVUEVSKGFyZ3VtZW50cykuY2hlY2tJdGVtLmNhbGwodGhpcywgaXRlbSk7CiAgICB9CiAgfSk7CiAgU1RBQ0tJVEVNLnN0b3AgPSBTVEFDS0lURU0uU3ViY2xhc3MoewogICAgdHlwZTogInN0b3AiLAogICAgaXNDbG9zZTogdHJ1ZQogIH0pOwogIFNUQUNLSVRFTS5vcGVuID0gU1RBQ0tJVEVNLlN1YmNsYXNzKHsKICAgIHR5cGU6ICJvcGVuIiwKICAgIGlzT3BlbjogdHJ1ZSwKICAgIHN0b3BFcnJvcjoKICAgIC8qXygpKi8KICAgIFsiRXh0cmFPcGVuTWlzc2luZ0Nsb3NlIiwgIkV4dHJhIG9wZW4gYnJhY2Ugb3IgbWlzc2luZyBjbG9zZSBicmFjZSJdLAogICAgY2hlY2tJdGVtOiBmdW5jdGlvbiBjaGVja0l0ZW0oaXRlbSkgewogICAgICBpZiAoaXRlbS50eXBlID09PSAiY2xvc2UiKSB7CiAgICAgICAgdmFyIG1tbCA9IHRoaXMubW1sRGF0YSgpOwogICAgICAgIHJldHVybiBTVEFDS0lURU0ubW1sKE1NTC5UZVhBdG9tKG1tbCkpOyAvLyBUZVhBdG9tIG1ha2UgaXQgYW4gT1JEIHRvIHByZXZlbnQgc3BhY2luZyAoRklYTUU6IHNob3VsZCBiZSBhbm90aGVyIHdheSkKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuU1VQRVIoYXJndW1lbnRzKS5jaGVja0l0ZW0uY2FsbCh0aGlzLCBpdGVtKTsKICAgIH0KICB9KTsKICBTVEFDS0lURU0uY2xvc2UgPSBTVEFDS0lURU0uU3ViY2xhc3MoewogICAgdHlwZTogImNsb3NlIiwKICAgIGlzQ2xvc2U6IHRydWUKICB9KTsKICBTVEFDS0lURU0ucHJpbWUgPSBTVEFDS0lURU0uU3ViY2xhc3MoewogICAgdHlwZTogInByaW1lIiwKICAgIGNoZWNrSXRlbTogZnVuY3Rpb24gY2hlY2tJdGVtKGl0ZW0pIHsKICAgICAgaWYgKHRoaXMuZGF0YVswXS50eXBlICE9PSAibXN1YnN1cCIpIHsKICAgICAgICByZXR1cm4gW01NTC5tc3VwKHRoaXMuZGF0YVswXSwgdGhpcy5kYXRhWzFdKSwgaXRlbV07CiAgICAgIH0KCiAgICAgIHRoaXMuZGF0YVswXS5TZXREYXRhKHRoaXMuZGF0YVswXS5zdXAsIHRoaXMuZGF0YVsxXSk7CiAgICAgIHJldHVybiBbdGhpcy5kYXRhWzBdLCBpdGVtXTsKICAgIH0KICB9KTsKICBTVEFDS0lURU0uc3Vic3VwID0gU1RBQ0tJVEVNLlN1YmNsYXNzKHsKICAgIHR5cGU6ICJzdWJzdXAiLAogICAgc3RvcEVycm9yOgogICAgLypfKCkqLwogICAgWyJNaXNzaW5nU2NyaXB0IiwgIk1pc3Npbmcgc3VwZXJzY3JpcHQgb3Igc3Vic2NyaXB0IGFyZ3VtZW50Il0sCiAgICBzdXBFcnJvcjoKICAgIC8qXygpKi8KICAgIFsiTWlzc2luZ09wZW5Gb3JTdXAiLCAiTWlzc2luZyBvcGVuIGJyYWNlIGZvciBzdXBlcnNjcmlwdCJdLAogICAgc3ViRXJyb3I6CiAgICAvKl8oKSovCiAgICBbIk1pc3NpbmdPcGVuRm9yU3ViIiwgIk1pc3Npbmcgb3BlbiBicmFjZSBmb3Igc3Vic2NyaXB0Il0sCiAgICBjaGVja0l0ZW06IGZ1bmN0aW9uIGNoZWNrSXRlbShpdGVtKSB7CiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICJvcGVuIiB8fCBpdGVtLnR5cGUgPT09ICJsZWZ0IikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICBpZiAoaXRlbS50eXBlID09PSAibW1sIikgewogICAgICAgIGlmICh0aGlzLnByaW1lcykgewogICAgICAgICAgaWYgKHRoaXMucG9zaXRpb24gIT09IDIpIHsKICAgICAgICAgICAgdGhpcy5kYXRhWzBdLlNldERhdGEoMiwgdGhpcy5wcmltZXMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaXRlbS5kYXRhWzBdID0gTU1MLm1yb3codGhpcy5wcmltZXMuV2l0aCh7CiAgICAgICAgICAgICAgdmFyaWFudEZvcm06IHRydWUKICAgICAgICAgICAgfSksIGl0ZW0uZGF0YVswXSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB0aGlzLmRhdGFbMF0uU2V0RGF0YSh0aGlzLnBvc2l0aW9uLCBpdGVtLmRhdGFbMF0pOwoKICAgICAgICBpZiAodGhpcy5tb3Zlc3Vwc3ViICE9IG51bGwpIHsKICAgICAgICAgIHRoaXMuZGF0YVswXS5tb3Zlc3Vwc3ViID0gdGhpcy5tb3Zlc3Vwc3ViOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIFNUQUNLSVRFTS5tbWwodGhpcy5kYXRhWzBdKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuU1VQRVIoYXJndW1lbnRzKS5jaGVja0l0ZW0uY2FsbCh0aGlzLCBpdGVtKSkgewogICAgICAgIFRFWC5FcnJvcih0aGlzW1siIiwgInN1YkVycm9yIiwgInN1cEVycm9yIl1bdGhpcy5wb3NpdGlvbl1dKTsKICAgICAgfQogICAgfSwKICAgIFBvcDogZnVuY3Rpb24gUG9wKCkge30KICB9KTsKICBTVEFDS0lURU0ub3ZlciA9IFNUQUNLSVRFTS5TdWJjbGFzcyh7CiAgICB0eXBlOiAib3ZlciIsCiAgICBpc0Nsb3NlOiB0cnVlLAogICAgbmFtZTogIlxcb3ZlciIsCiAgICBjaGVja0l0ZW06IGZ1bmN0aW9uIGNoZWNrSXRlbShpdGVtLCBzdGFjaykgewogICAgICBpZiAoaXRlbS50eXBlID09PSAib3ZlciIpIHsKICAgICAgICBURVguRXJyb3IoWyJBbWJpZ3VvdXNVc2VPZiIsICJBbWJpZ3VvdXMgdXNlIG9mICUxIiwgaXRlbS5uYW1lXSk7CiAgICAgIH0KCiAgICAgIGlmIChpdGVtLmlzQ2xvc2UpIHsKICAgICAgICB2YXIgbW1sID0gTU1MLm1mcmFjKHRoaXMubnVtLCB0aGlzLm1tbERhdGEoZmFsc2UpKTsKCiAgICAgICAgaWYgKHRoaXMudGhpY2tuZXNzICE9IG51bGwpIHsKICAgICAgICAgIG1tbC5saW5ldGhpY2tuZXNzID0gdGhpcy50aGlja25lc3M7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5vcGVuIHx8IHRoaXMuY2xvc2UpIHsKICAgICAgICAgIG1tbC50ZXhXaXRoRGVsaW1zID0gdHJ1ZTsKICAgICAgICAgIG1tbCA9IFRFWC5maXhlZEZlbmNlKHRoaXMub3BlbiwgbW1sLCB0aGlzLmNsb3NlKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBbU1RBQ0tJVEVNLm1tbChtbWwpLCBpdGVtXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuU1VQRVIoYXJndW1lbnRzKS5jaGVja0l0ZW0uY2FsbCh0aGlzLCBpdGVtKTsKICAgIH0sCiAgICB0b1N0cmluZzogZnVuY3Rpb24gdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiAib3ZlclsiICsgdGhpcy5udW0gKyAiIC8gIiArIHRoaXMuZGF0YS5qb2luKCI7ICIpICsgIl0iOwogICAgfQogIH0pOwogIFNUQUNLSVRFTS5sZWZ0ID0gU1RBQ0tJVEVNLlN1YmNsYXNzKHsKICAgIHR5cGU6ICJsZWZ0IiwKICAgIGlzT3BlbjogdHJ1ZSwKICAgIGRlbGltOiAnKCcsCiAgICBzdG9wRXJyb3I6CiAgICAvKl8oKSovCiAgICBbIkV4dHJhTGVmdE1pc3NpbmdSaWdodCIsICJFeHRyYSBcXGxlZnQgb3IgbWlzc2luZyBcXHJpZ2h0Il0sCiAgICBjaGVja0l0ZW06IGZ1bmN0aW9uIGNoZWNrSXRlbShpdGVtKSB7CiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICJyaWdodCIpIHsKICAgICAgICByZXR1cm4gU1RBQ0tJVEVNLm1tbChURVguZmVuY2VkKHRoaXMuZGVsaW0sIHRoaXMubW1sRGF0YSgpLCBpdGVtLmRlbGltKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLlNVUEVSKGFyZ3VtZW50cykuY2hlY2tJdGVtLmNhbGwodGhpcywgaXRlbSk7CiAgICB9CiAgfSk7CiAgU1RBQ0tJVEVNLnJpZ2h0ID0gU1RBQ0tJVEVNLlN1YmNsYXNzKHsKICAgIHR5cGU6ICJyaWdodCIsCiAgICBpc0Nsb3NlOiB0cnVlLAogICAgZGVsaW06ICcpJwogIH0pOwogIFNUQUNLSVRFTS5iZWdpbiA9IFNUQUNLSVRFTS5TdWJjbGFzcyh7CiAgICB0eXBlOiAiYmVnaW4iLAogICAgaXNPcGVuOiB0cnVlLAogICAgY2hlY2tJdGVtOiBmdW5jdGlvbiBjaGVja0l0ZW0oaXRlbSkgewogICAgICBpZiAoaXRlbS50eXBlID09PSAiZW5kIikgewogICAgICAgIGlmIChpdGVtLm5hbWUgIT09IHRoaXMubmFtZSkgewogICAgICAgICAgVEVYLkVycm9yKFsiRW52QmFkRW5kIiwgIlxcYmVnaW57JTF9IGVuZGVkIHdpdGggXFxlbmR7JTJ9IiwgdGhpcy5uYW1lLCBpdGVtLm5hbWVdKTsKICAgICAgICB9CgogICAgICAgIGlmICghdGhpcy5lbmQpIHsKICAgICAgICAgIHJldHVybiBTVEFDS0lURU0ubW1sKHRoaXMubW1sRGF0YSgpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aGlzLnBhcnNlW3RoaXMuZW5kXS5jYWxsKHRoaXMucGFyc2UsIHRoaXMsIHRoaXMuZGF0YSk7CiAgICAgIH0KCiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICJzdG9wIikgewogICAgICAgIFRFWC5FcnJvcihbIkVudk1pc3NpbmdFbmQiLCAiTWlzc2luZyBcXGVuZHslMX0iLCB0aGlzLm5hbWVdKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuU1VQRVIoYXJndW1lbnRzKS5jaGVja0l0ZW0uY2FsbCh0aGlzLCBpdGVtKTsKICAgIH0KICB9KTsKICBTVEFDS0lURU0uZW5kID0gU1RBQ0tJVEVNLlN1YmNsYXNzKHsKICAgIHR5cGU6ICJlbmQiLAogICAgaXNDbG9zZTogdHJ1ZQogIH0pOwogIFNUQUNLSVRFTS5zdHlsZSA9IFNUQUNLSVRFTS5TdWJjbGFzcyh7CiAgICB0eXBlOiAic3R5bGUiLAogICAgY2hlY2tJdGVtOiBmdW5jdGlvbiBjaGVja0l0ZW0oaXRlbSkgewogICAgICBpZiAoIWl0ZW0uaXNDbG9zZSkgewogICAgICAgIHJldHVybiB0aGlzLlNVUEVSKGFyZ3VtZW50cykuY2hlY2tJdGVtLmNhbGwodGhpcywgaXRlbSk7CiAgICAgIH0KCiAgICAgIHZhciBtbWwgPSBNTUwubXN0eWxlLmFwcGx5KE1NTCwgdGhpcy5kYXRhKS5XaXRoKHRoaXMuc3R5bGVzKTsKICAgICAgcmV0dXJuIFtTVEFDS0lURU0ubW1sKG1tbCksIGl0ZW1dOwogICAgfQogIH0pOwogIFNUQUNLSVRFTS5wb3NpdGlvbiA9IFNUQUNLSVRFTS5TdWJjbGFzcyh7CiAgICB0eXBlOiAicG9zaXRpb24iLAogICAgY2hlY2tJdGVtOiBmdW5jdGlvbiBjaGVja0l0ZW0oaXRlbSkgewogICAgICBpZiAoaXRlbS5pc0Nsb3NlKSB7CiAgICAgICAgVEVYLkVycm9yKFsiTWlzc2luZ0JveEZvciIsICJNaXNzaW5nIGJveCBmb3IgJTEiLCB0aGlzLm5hbWVdKTsKICAgICAgfQoKICAgICAgaWYgKGl0ZW0uaXNOb3RTdGFjaykgewogICAgICAgIHZhciBtbWwgPSBpdGVtLm1tbERhdGEoKTsKCiAgICAgICAgc3dpdGNoICh0aGlzLm1vdmUpIHsKICAgICAgICAgIGNhc2UgJ3ZlcnRpY2FsJzoKICAgICAgICAgICAgbW1sID0gTU1MLm1wYWRkZWQobW1sKS5XaXRoKHsKICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuZGgsCiAgICAgICAgICAgICAgZGVwdGg6IHRoaXMuZGQsCiAgICAgICAgICAgICAgdm9mZnNldDogdGhpcy5kaAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIFtTVEFDS0lURU0ubW1sKG1tbCldOwoKICAgICAgICAgIGNhc2UgJ2hvcml6b250YWwnOgogICAgICAgICAgICByZXR1cm4gW1NUQUNLSVRFTS5tbWwodGhpcy5sZWZ0KSwgaXRlbSwgU1RBQ0tJVEVNLm1tbCh0aGlzLnJpZ2h0KV07CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5TVVBFUihhcmd1bWVudHMpLmNoZWNrSXRlbS5jYWxsKHRoaXMsIGl0ZW0pOwogICAgfQogIH0pOwogIFNUQUNLSVRFTS5hcnJheSA9IFNUQUNLSVRFTS5TdWJjbGFzcyh7CiAgICB0eXBlOiAiYXJyYXkiLAogICAgaXNPcGVuOiB0cnVlLAogICAgYXJyYXlkZWY6IHt9LAogICAgSW5pdDogZnVuY3Rpb24gSW5pdCgpIHsKICAgICAgdGhpcy50YWJsZSA9IFtdOwogICAgICB0aGlzLnJvdyA9IFtdOwogICAgICB0aGlzLmVudiA9IHt9OwogICAgICB0aGlzLmZyYW1lID0gW107CiAgICAgIHRoaXMuaGZpbGwgPSBbXTsKICAgICAgdGhpcy5TVVBFUihhcmd1bWVudHMpLkluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0sCiAgICBjaGVja0l0ZW06IGZ1bmN0aW9uIGNoZWNrSXRlbShpdGVtKSB7CiAgICAgIGlmIChpdGVtLmlzQ2xvc2UgJiYgaXRlbS50eXBlICE9PSAib3ZlciIpIHsKICAgICAgICBpZiAoaXRlbS5pc0VudHJ5KSB7CiAgICAgICAgICB0aGlzLkVuZEVudHJ5KCk7CiAgICAgICAgICB0aGlzLmNsZWFyRW52KCk7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQoKICAgICAgICBpZiAoaXRlbS5pc0NSKSB7CiAgICAgICAgICB0aGlzLkVuZEVudHJ5KCk7CiAgICAgICAgICB0aGlzLkVuZFJvdygpOwogICAgICAgICAgdGhpcy5jbGVhckVudigpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5FbmRUYWJsZSgpOwogICAgICAgIHRoaXMuY2xlYXJFbnYoKTsKICAgICAgICB2YXIgc2NyaXB0bGV2ZWwgPSB0aGlzLmFycmF5ZGVmLnNjcmlwdGxldmVsOwogICAgICAgIGRlbGV0ZSB0aGlzLmFycmF5ZGVmLnNjcmlwdGxldmVsOwogICAgICAgIHZhciBtbWwgPSBNTUwubXRhYmxlLmFwcGx5KE1NTCwgdGhpcy50YWJsZSkuV2l0aCh0aGlzLmFycmF5ZGVmKTsKCiAgICAgICAgaWYgKHRoaXMuZnJhbWUubGVuZ3RoID09PSA0KSB7CiAgICAgICAgICBtbWwuZnJhbWUgPSB0aGlzLmZyYW1lLmRhc2hlZCA/ICJkYXNoZWQiIDogInNvbGlkIjsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZnJhbWUubGVuZ3RoKSB7CiAgICAgICAgICBtbWwuaGFzRnJhbWUgPSB0cnVlOwoKICAgICAgICAgIGlmICh0aGlzLmFycmF5ZGVmLnJvd2xpbmVzKSB7CiAgICAgICAgICAgIHRoaXMuYXJyYXlkZWYucm93bGluZXMgPSB0aGlzLmFycmF5ZGVmLnJvd2xpbmVzLnJlcGxhY2UoL25vbmUoIG5vbmUpKyQvLCAibm9uZSIpOwogICAgICAgICAgfQoKICAgICAgICAgIG1tbCA9IE1NTC5tZW5jbG9zZShtbWwpLldpdGgoewogICAgICAgICAgICBub3RhdGlvbjogdGhpcy5mcmFtZS5qb2luKCIgIiksCiAgICAgICAgICAgIGlzRnJhbWU6IHRydWUKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmICgodGhpcy5hcnJheWRlZi5jb2x1bW5saW5lcyB8fCAibm9uZSIpICE9ICJub25lIiB8fCAodGhpcy5hcnJheWRlZi5yb3dsaW5lcyB8fCAibm9uZSIpICE9ICJub25lIikgewogICAgICAgICAgICBtbWwucGFkZGluZyA9IDA7CiAgICAgICAgICB9IC8vIEhUTUwtQ1NTIGpheCBpbXBsZW1lbnRzIHRoaXMKCiAgICAgICAgfQoKICAgICAgICBpZiAoc2NyaXB0bGV2ZWwpIHsKICAgICAgICAgIG1tbCA9IE1NTC5tc3R5bGUobW1sKS5XaXRoKHsKICAgICAgICAgICAgc2NyaXB0bGV2ZWw6IHNjcmlwdGxldmVsCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLm9wZW4gfHwgdGhpcy5jbG9zZSkgewogICAgICAgICAgbW1sID0gVEVYLmZlbmNlZCh0aGlzLm9wZW4sIG1tbCwgdGhpcy5jbG9zZSk7CiAgICAgICAgfQoKICAgICAgICBtbWwgPSBTVEFDS0lURU0ubW1sKG1tbCk7CgogICAgICAgIGlmICh0aGlzLnJlcXVpcmVDbG9zZSkgewogICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Nsb3NlJykgewogICAgICAgICAgICByZXR1cm4gbW1sOwogICAgICAgICAgfQoKICAgICAgICAgIFRFWC5FcnJvcihbIk1pc3NpbmdDbG9zZUJyYWNlIiwgIk1pc3NpbmcgY2xvc2UgYnJhY2UiXSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gW21tbCwgaXRlbV07CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLlNVUEVSKGFyZ3VtZW50cykuY2hlY2tJdGVtLmNhbGwodGhpcywgaXRlbSk7CiAgICB9LAogICAgRW5kRW50cnk6IGZ1bmN0aW9uIEVuZEVudHJ5KCkgewogICAgICB2YXIgbXRkID0gTU1MLm10ZC5hcHBseShNTUwsIHRoaXMuZGF0YSk7CgogICAgICBpZiAodGhpcy5oZmlsbC5sZW5ndGgpIHsKICAgICAgICBpZiAodGhpcy5oZmlsbFswXSA9PT0gMCkgbXRkLmNvbHVtbmFsaWduID0gInJpZ2h0IjsKICAgICAgICBpZiAodGhpcy5oZmlsbFt0aGlzLmhmaWxsLmxlbmd0aCAtIDFdID09PSB0aGlzLmRhdGEubGVuZ3RoKSBtdGQuY29sdW1uYWxpZ24gPSBtdGQuY29sdW1uYWxpZ24gPyAiY2VudGVyIiA6ICJsZWZ0IjsKICAgICAgfQoKICAgICAgdGhpcy5yb3cucHVzaChtdGQpOwogICAgICB0aGlzLmRhdGEgPSBbXTsKICAgICAgdGhpcy5oZmlsbCA9IFtdOwogICAgfSwKICAgIEVuZFJvdzogZnVuY3Rpb24gRW5kUm93KCkgewogICAgICB2YXIgbXRyID0gTU1MLm10cjsKCiAgICAgIGlmICh0aGlzLmlzTnVtYmVyZWQgJiYgdGhpcy5yb3cubGVuZ3RoID09PSAzKSB7CiAgICAgICAgdGhpcy5yb3cudW5zaGlmdCh0aGlzLnJvdy5wb3AoKSk7IC8vIG1vdmUgZXF1YXRpb24gbnVtYmVyIHRvIGZpcnN0IHBvc2l0aW9uCgogICAgICAgIG10ciA9IE1NTC5tbGFiZWxlZHRyOwogICAgICB9CgogICAgICB0aGlzLnRhYmxlLnB1c2gobXRyLmFwcGx5KE1NTCwgdGhpcy5yb3cpKTsKICAgICAgdGhpcy5yb3cgPSBbXTsKICAgIH0sCiAgICBFbmRUYWJsZTogZnVuY3Rpb24gRW5kVGFibGUoKSB7CiAgICAgIGlmICh0aGlzLmRhdGEubGVuZ3RoIHx8IHRoaXMucm93Lmxlbmd0aCkgewogICAgICAgIHRoaXMuRW5kRW50cnkoKTsKICAgICAgICB0aGlzLkVuZFJvdygpOwogICAgICB9CgogICAgICB0aGlzLmNoZWNrTGluZXMoKTsKICAgIH0sCiAgICBjaGVja0xpbmVzOiBmdW5jdGlvbiBjaGVja0xpbmVzKCkgewogICAgICBpZiAodGhpcy5hcnJheWRlZi5yb3dsaW5lcykgewogICAgICAgIHZhciBsaW5lcyA9IHRoaXMuYXJyYXlkZWYucm93bGluZXMuc3BsaXQoLyAvKTsKCiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA9PT0gdGhpcy50YWJsZS5sZW5ndGgpIHsKICAgICAgICAgIHRoaXMuZnJhbWUucHVzaCgiYm90dG9tIik7CiAgICAgICAgICBsaW5lcy5wb3AoKTsKICAgICAgICAgIHRoaXMuYXJyYXlkZWYucm93bGluZXMgPSBsaW5lcy5qb2luKCcgJyk7CiAgICAgICAgfSBlbHNlIGlmIChsaW5lcy5sZW5ndGggPCB0aGlzLnRhYmxlLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIHRoaXMuYXJyYXlkZWYucm93bGluZXMgKz0gIiBub25lIjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnJvd3NwYWNpbmcpIHsKICAgICAgICB2YXIgcm93cyA9IHRoaXMuYXJyYXlkZWYucm93c3BhY2luZy5zcGxpdCgvIC8pOwoKICAgICAgICB3aGlsZSAocm93cy5sZW5ndGggPCB0aGlzLnRhYmxlLmxlbmd0aCkgewogICAgICAgICAgcm93cy5wdXNoKHRoaXMucm93c3BhY2luZyArICJlbSIpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5hcnJheWRlZi5yb3dzcGFjaW5nID0gcm93cy5qb2luKCcgJyk7CiAgICAgIH0KICAgIH0sCiAgICBjbGVhckVudjogZnVuY3Rpb24gY2xlYXJFbnYoKSB7CiAgICAgIGZvciAodmFyIGlkIGluIHRoaXMuZW52KSB7CiAgICAgICAgaWYgKHRoaXMuZW52Lmhhc093blByb3BlcnR5KGlkKSkgewogICAgICAgICAgZGVsZXRlIHRoaXMuZW52W2lkXTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9KTsKICBTVEFDS0lURU0uY2VsbCA9IFNUQUNLSVRFTS5TdWJjbGFzcyh7CiAgICB0eXBlOiAiY2VsbCIsCiAgICBpc0Nsb3NlOiB0cnVlCiAgfSk7CiAgU1RBQ0tJVEVNLm1tbCA9IFNUQUNLSVRFTS5TdWJjbGFzcyh7CiAgICB0eXBlOiAibW1sIiwKICAgIGlzTm90U3RhY2s6IHRydWUsCiAgICBBZGQ6IGZ1bmN0aW9uIEFkZCgpIHsKICAgICAgdGhpcy5kYXRhLnB1c2guYXBwbHkodGhpcy5kYXRhLCBhcmd1bWVudHMpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9KTsKICBTVEFDS0lURU0uZm4gPSBTVEFDS0lURU0uU3ViY2xhc3MoewogICAgdHlwZTogImZuIiwKICAgIGNoZWNrSXRlbTogZnVuY3Rpb24gY2hlY2tJdGVtKGl0ZW0pIHsKICAgICAgaWYgKHRoaXMuZGF0YVswXSkgewogICAgICAgIGlmIChpdGVtLmlzT3BlbikgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoaXRlbS50eXBlICE9PSAiZm4iKSB7CiAgICAgICAgICBpZiAoaXRlbS50eXBlICE9PSAibW1sIiB8fCAhaXRlbS5kYXRhWzBdKSB7CiAgICAgICAgICAgIHJldHVybiBbdGhpcy5kYXRhWzBdLCBpdGVtXTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoaXRlbS5kYXRhWzBdLmlzYShNTUwubXNwYWNlKSkgewogICAgICAgICAgICByZXR1cm4gW3RoaXMuZGF0YVswXSwgaXRlbV07CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIG1tbCA9IGl0ZW0uZGF0YVswXTsKCiAgICAgICAgICBpZiAobW1sLmlzRW1iZWxsaXNoZWQoKSkgewogICAgICAgICAgICBtbWwgPSBtbWwuQ29yZU1PKCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKFswLCAwLCAxLCAxLCAwLCAxLCAxLCAwLCAwLCAwXVttbWwuR2V0KCJ0ZXhDbGFzcyIpXSkgewogICAgICAgICAgICByZXR1cm4gW3RoaXMuZGF0YVswXSwgaXRlbV07CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gW3RoaXMuZGF0YVswXSwgTU1MLm1vKE1NTC5lbnRpdHkoIiN4MjA2MSIpKS5XaXRoKHsKICAgICAgICAgIHRleENsYXNzOiBNTUwuVEVYQ0xBU1MuTk9ORQogICAgICAgIH0pLCBpdGVtXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuU1VQRVIoYXJndW1lbnRzKS5jaGVja0l0ZW0uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KICB9KTsKICBTVEFDS0lURU0ubm90ID0gU1RBQ0tJVEVNLlN1YmNsYXNzKHsKICAgIHR5cGU6ICJub3QiLAogICAgY2hlY2tJdGVtOiBmdW5jdGlvbiBjaGVja0l0ZW0oaXRlbSkgewogICAgICB2YXIgbW1sLCBjOwoKICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gIm9wZW4iIHx8IGl0ZW0udHlwZSA9PT0gImxlZnQiKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICJtbWwiICYmIGl0ZW0uZGF0YVswXS50eXBlLm1hdGNoKC9eKG1vfG1pfG10ZXh0KSQvKSkgewogICAgICAgIG1tbCA9IGl0ZW0uZGF0YVswXSwgYyA9IG1tbC5kYXRhLmpvaW4oIiIpOwoKICAgICAgICBpZiAoYy5sZW5ndGggPT09IDEgJiYgIW1tbC5tb3Zlc3Vwc3ViKSB7CiAgICAgICAgICBjID0gU1RBQ0tJVEVNLm5vdC5yZW1hcFtjLmNoYXJDb2RlQXQoMCldOwoKICAgICAgICAgIGlmIChjKSB7CiAgICAgICAgICAgIG1tbC5TZXREYXRhKDAsIE1NTC5jaGFycyhTdHJpbmcuZnJvbUNoYXJDb2RlKGMpKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtbWwuQXBwZW5kKE1NTC5jaGFycygiXHUwMzM4IikpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0KICAgICAgfSAvLyAgXG1hdGhyZWx7XHJsYXB7XG5vdENoYXJ9fQoKCiAgICAgIG1tbCA9IE1NTC5tcGFkZGVkKE1NTC5tdGV4dCgiXHUyOUY4IikpLldpdGgoewogICAgICAgIHdpZHRoOiAwCiAgICAgIH0pOwogICAgICBtbWwgPSBNTUwuVGVYQXRvbShtbWwpLldpdGgoewogICAgICAgIHRleENsYXNzOiBNTUwuVEVYQ0xBU1MuUkVMCiAgICAgIH0pOwogICAgICByZXR1cm4gW21tbCwgaXRlbV07CiAgICB9CiAgfSk7CiAgU1RBQ0tJVEVNLm5vdC5yZW1hcCA9IHsKICAgIDB4MjE5MDogMHgyMTlBLAogICAgMHgyMTkyOiAweDIxOUIsCiAgICAweDIxOTQ6IDB4MjFBRSwKICAgIDB4MjFEMDogMHgyMUNELAogICAgMHgyMUQyOiAweDIxQ0YsCiAgICAweDIxRDQ6IDB4MjFDRSwKICAgIDB4MjIwODogMHgyMjA5LAogICAgMHgyMjBCOiAweDIyMEMsCiAgICAweDIyMjM6IDB4MjIyNCwKICAgIDB4MjIyNTogMHgyMjI2LAogICAgMHgyMjNDOiAweDIyNDEsCiAgICAweDAwN0U6IDB4MjI0MSwKICAgIDB4MjI0MzogMHgyMjQ0LAogICAgMHgyMjQ1OiAweDIyNDcsCiAgICAweDIyNDg6IDB4MjI0OSwKICAgIDB4MjI0RDogMHgyMjZELAogICAgMHgwMDNEOiAweDIyNjAsCiAgICAweDIyNjE6IDB4MjI2MiwKICAgIDB4MDAzQzogMHgyMjZFLAogICAgMHgwMDNFOiAweDIyNkYsCiAgICAweDIyNjQ6IDB4MjI3MCwKICAgIDB4MjI2NTogMHgyMjcxLAogICAgMHgyMjcyOiAweDIyNzQsCiAgICAweDIyNzM6IDB4MjI3NSwKICAgIDB4MjI3NjogMHgyMjc4LAogICAgMHgyMjc3OiAweDIyNzksCiAgICAweDIyN0E6IDB4MjI4MCwKICAgIDB4MjI3QjogMHgyMjgxLAogICAgMHgyMjgyOiAweDIyODQsCiAgICAweDIyODM6IDB4MjI4NSwKICAgIDB4MjI4NjogMHgyMjg4LAogICAgMHgyMjg3OiAweDIyODksCiAgICAweDIyQTI6IDB4MjJBQywKICAgIDB4MjJBODogMHgyMkFELAogICAgMHgyMkE5OiAweDIyQUUsCiAgICAweDIyQUI6IDB4MjJBRiwKICAgIDB4MjI3QzogMHgyMkUwLAogICAgMHgyMjdEOiAweDIyRTEsCiAgICAweDIyOTE6IDB4MjJFMiwKICAgIDB4MjI5MjogMHgyMkUzLAogICAgMHgyMkIyOiAweDIyRUEsCiAgICAweDIyQjM6IDB4MjJFQiwKICAgIDB4MjJCNDogMHgyMkVDLAogICAgMHgyMkI1OiAweDIyRUQsCiAgICAweDIyMDM6IDB4MjIwNAogIH07CiAgU1RBQ0tJVEVNLmRvdHMgPSBTVEFDS0lURU0uU3ViY2xhc3MoewogICAgdHlwZTogImRvdHMiLAogICAgY2hlY2tJdGVtOiBmdW5jdGlvbiBjaGVja0l0ZW0oaXRlbSkgewogICAgICBpZiAoaXRlbS50eXBlID09PSAib3BlbiIgfHwgaXRlbS50eXBlID09PSAibGVmdCIpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgdmFyIGRvdHMgPSB0aGlzLmxkb3RzOwoKICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gIm1tbCIgJiYgaXRlbS5kYXRhWzBdLmlzRW1iZWxsaXNoZWQoKSkgewogICAgICAgIHZhciB0Y2xhc3MgPSBpdGVtLmRhdGFbMF0uQ29yZU1PKCkuR2V0KCJ0ZXhDbGFzcyIpOwoKICAgICAgICBpZiAodGNsYXNzID09PSBNTUwuVEVYQ0xBU1MuQklOIHx8IHRjbGFzcyA9PT0gTU1MLlRFWENMQVNTLlJFTCkgewogICAgICAgICAgZG90cyA9IHRoaXMuY2RvdHM7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gW2RvdHMsIGl0ZW1dOwogICAgfQogIH0pOwogIHZhciBURVhERUYgPSB7CiAgICAvLwogICAgLy8gIEFkZCBuZXcgZGVmaW5pdGlvbnMgd2l0aG91dCBvdmVycmlkaW5nIHVzZXItZGVmaW5lZCBvbmVzCiAgICAvLwogICAgQWRkOiBmdW5jdGlvbiBBZGQoc3JjLCBkc3QsIG5vdXNlcikgewogICAgICBpZiAoIWRzdCkgewogICAgICAgIGRzdCA9IHRoaXM7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGlkIGluIHNyYykgewogICAgICAgIGlmIChzcmMuaGFzT3duUHJvcGVydHkoaWQpKSB7CiAgICAgICAgICBpZiAoX3R5cGVvZihzcmNbaWRdKSA9PT0gJ29iamVjdCcgJiYgIShzcmNbaWRdIGluc3RhbmNlb2YgQXJyYXkpICYmIChfdHlwZW9mKGRzdFtpZF0pID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgZHN0W2lkXSA9PT0gJ2Z1bmN0aW9uJykpIHsKICAgICAgICAgICAgdGhpcy5BZGQoc3JjW2lkXSwgZHN0W2lkXSwgc3JjW2lkXSwgbm91c2VyKTsKICAgICAgICAgIH0gZWxzZSBpZiAoIWRzdFtpZF0gfHwgIWRzdFtpZF0uaXNVc2VyIHx8ICFub3VzZXIpIHsKICAgICAgICAgICAgZHN0W2lkXSA9IHNyY1tpZF07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gZHN0OwogICAgfQogIH07CgogIHZhciBTVEFSVFVQID0gZnVuY3Rpb24gU1RBUlRVUCgpIHsKICAgIE1NTCA9IE1hdGhKYXguRWxlbWVudEpheC5tbWw7CiAgICBIVUIuSW5zZXJ0KFRFWERFRiwgewogICAgICAvLyBwYXR0ZXJucyBmb3IgbGV0dGVycyBhbmQgbnVtYmVycwogICAgICBsZXR0ZXI6IC9bYS16XS9pLAogICAgICBkaWdpdDogL1swLTkuXS8sCiAgICAgIG51bWJlcjogL14oPzpbMC05XSsoPzpceyxcfVswLTldezN9KSooPzpcLlswLTldKikqfFwuWzAtOV0rKS8sCiAgICAgIHNwZWNpYWw6IHsKICAgICAgICAnXFwnOiAnQ29udHJvbFNlcXVlbmNlJywKICAgICAgICAneyc6ICdPcGVuJywKICAgICAgICAnfSc6ICdDbG9zZScsCiAgICAgICAgJ34nOiAnVGlsZGUnLAogICAgICAgICdeJzogJ1N1cGVyc2NyaXB0JywKICAgICAgICAnXyc6ICdTdWJzY3JpcHQnLAogICAgICAgICcgJzogJ1NwYWNlJywKICAgICAgICAiXHQiOiAnU3BhY2UnLAogICAgICAgICJcciI6ICdTcGFjZScsCiAgICAgICAgIlxuIjogJ1NwYWNlJywKICAgICAgICAiJyI6ICdQcmltZScsCiAgICAgICAgJyUnOiAnQ29tbWVudCcsCiAgICAgICAgJyYnOiAnRW50cnknLAogICAgICAgICcjJzogJ0hhc2gnLAogICAgICAgICJceEEwIjogJ1NwYWNlJywKICAgICAgICAiXHUyMDE5IjogJ1ByaW1lJwogICAgICB9LAogICAgICByZW1hcDogewogICAgICAgICctJzogJzIyMTInLAogICAgICAgICcqJzogJzIyMTcnLAogICAgICAgICdgJzogJzIwMTgnIC8vIG1hcCBgIHRvIGJhY2sgcXVvdGUKCiAgICAgIH0sCiAgICAgIG1hdGhjaGFyMG1pOiB7CiAgICAgICAgLy8gTG93ZXItY2FzZSBncmVlawogICAgICAgIGFscGhhOiAnMDNCMScsCiAgICAgICAgYmV0YTogJzAzQjInLAogICAgICAgIGdhbW1hOiAnMDNCMycsCiAgICAgICAgZGVsdGE6ICcwM0I0JywKICAgICAgICBlcHNpbG9uOiAnMDNGNScsCiAgICAgICAgemV0YTogJzAzQjYnLAogICAgICAgIGV0YTogJzAzQjcnLAogICAgICAgIHRoZXRhOiAnMDNCOCcsCiAgICAgICAgaW90YTogJzAzQjknLAogICAgICAgIGthcHBhOiAnMDNCQScsCiAgICAgICAgbGFtYmRhOiAnMDNCQicsCiAgICAgICAgbXU6ICcwM0JDJywKICAgICAgICBudTogJzAzQkQnLAogICAgICAgIHhpOiAnMDNCRScsCiAgICAgICAgb21pY3JvbjogJzAzQkYnLAogICAgICAgIC8vIGFkZGVkIGZvciBjb21wbGV0ZW5lc3MKICAgICAgICBwaTogJzAzQzAnLAogICAgICAgIHJobzogJzAzQzEnLAogICAgICAgIHNpZ21hOiAnMDNDMycsCiAgICAgICAgdGF1OiAnMDNDNCcsCiAgICAgICAgdXBzaWxvbjogJzAzQzUnLAogICAgICAgIHBoaTogJzAzRDUnLAogICAgICAgIGNoaTogJzAzQzcnLAogICAgICAgIHBzaTogJzAzQzgnLAogICAgICAgIG9tZWdhOiAnMDNDOScsCiAgICAgICAgdmFyZXBzaWxvbjogJzAzQjUnLAogICAgICAgIHZhcnRoZXRhOiAnMDNEMScsCiAgICAgICAgdmFycGk6ICcwM0Q2JywKICAgICAgICB2YXJyaG86ICcwM0YxJywKICAgICAgICB2YXJzaWdtYTogJzAzQzInLAogICAgICAgIHZhcnBoaTogJzAzQzYnLAogICAgICAgIC8vIE9yZCBzeW1ib2xzCiAgICAgICAgUzogWycwMEE3JywgewogICAgICAgICAgbWF0aHZhcmlhbnQ6IE1NTC5WQVJJQU5ULk5PUk1BTAogICAgICAgIH1dLAogICAgICAgIGFsZXBoOiBbJzIxMzUnLCB7CiAgICAgICAgICBtYXRodmFyaWFudDogTU1MLlZBUklBTlQuTk9STUFMCiAgICAgICAgfV0sCiAgICAgICAgaGJhcjogWycyMTBGJywgewogICAgICAgICAgdmFyaWFudEZvcm06IHRydWUKICAgICAgICB9XSwKICAgICAgICBpbWF0aDogJzAxMzEnLAogICAgICAgIGptYXRoOiAnMDIzNycsCiAgICAgICAgZWxsOiAnMjExMycsCiAgICAgICAgd3A6IFsnMjExOCcsIHsKICAgICAgICAgIG1hdGh2YXJpYW50OiBNTUwuVkFSSUFOVC5OT1JNQUwKICAgICAgICB9XSwKICAgICAgICBSZTogWycyMTFDJywgewogICAgICAgICAgbWF0aHZhcmlhbnQ6IE1NTC5WQVJJQU5ULk5PUk1BTAogICAgICAgIH1dLAogICAgICAgIEltOiBbJzIxMTEnLCB7CiAgICAgICAgICBtYXRodmFyaWFudDogTU1MLlZBUklBTlQuTk9STUFMCiAgICAgICAgfV0sCiAgICAgICAgcGFydGlhbDogWycyMjAyJywgewogICAgICAgICAgbWF0aHZhcmlhbnQ6IE1NTC5WQVJJQU5ULk5PUk1BTAogICAgICAgIH1dLAogICAgICAgIGluZnR5OiBbJzIyMUUnLCB7CiAgICAgICAgICBtYXRodmFyaWFudDogTU1MLlZBUklBTlQuTk9STUFMCiAgICAgICAgfV0sCiAgICAgICAgcHJpbWU6IFsnMjAzMicsIHsKICAgICAgICAgIG1hdGh2YXJpYW50OiBNTUwuVkFSSUFOVC5OT1JNQUwsCiAgICAgICAgICB2YXJpYW50Rm9ybTogdHJ1ZQogICAgICAgIH1dLAogICAgICAgIGVtcHR5c2V0OiBbJzIyMDUnLCB7CiAgICAgICAgICBtYXRodmFyaWFudDogTU1MLlZBUklBTlQuTk9STUFMCiAgICAgICAgfV0sCiAgICAgICAgbmFibGE6IFsnMjIwNycsIHsKICAgICAgICAgIG1hdGh2YXJpYW50OiBNTUwuVkFSSUFOVC5OT1JNQUwKICAgICAgICB9XSwKICAgICAgICB0b3A6IFsnMjJBNCcsIHsKICAgICAgICAgIG1hdGh2YXJpYW50OiBNTUwuVkFSSUFOVC5OT1JNQUwKICAgICAgICB9XSwKICAgICAgICBib3Q6IFsnMjJBNScsIHsKICAgICAgICAgIG1hdGh2YXJpYW50OiBNTUwuVkFSSUFOVC5OT1JNQUwKICAgICAgICB9XSwKICAgICAgICBhbmdsZTogWycyMjIwJywgewogICAgICAgICAgbWF0aHZhcmlhbnQ6IE1NTC5WQVJJQU5ULk5PUk1BTAogICAgICAgIH1dLAogICAgICAgIHRyaWFuZ2xlOiBbJzI1QjMnLCB7CiAgICAgICAgICBtYXRodmFyaWFudDogTU1MLlZBUklBTlQuTk9STUFMCiAgICAgICAgfV0sCiAgICAgICAgYmFja3NsYXNoOiBbJzIyMTYnLCB7CiAgICAgICAgICBtYXRodmFyaWFudDogTU1MLlZBUklBTlQuTk9STUFMLAogICAgICAgICAgdmFyaWFudEZvcm06IHRydWUKICAgICAgICB9XSwKICAgICAgICBmb3JhbGw6IFsnMjIwMCcsIHsKICAgICAgICAgIG1hdGh2YXJpYW50OiBNTUwuVkFSSUFOVC5OT1JNQUwKICAgICAgICB9XSwKICAgICAgICBleGlzdHM6IFsnMjIwMycsIHsKICAgICAgICAgIG1hdGh2YXJpYW50OiBNTUwuVkFSSUFOVC5OT1JNQUwKICAgICAgICB9XSwKICAgICAgICBuZWc6IFsnMDBBQycsIHsKICAgICAgICAgIG1hdGh2YXJpYW50OiBNTUwuVkFSSUFOVC5OT1JNQUwKICAgICAgICB9XSwKICAgICAgICBsbm90OiBbJzAwQUMnLCB7CiAgICAgICAgICBtYXRodmFyaWFudDogTU1MLlZBUklBTlQuTk9STUFMCiAgICAgICAgfV0sCiAgICAgICAgZmxhdDogWycyNjZEJywgewogICAgICAgICAgbWF0aHZhcmlhbnQ6IE1NTC5WQVJJQU5ULk5PUk1BTAogICAgICAgIH1dLAogICAgICAgIG5hdHVyYWw6IFsnMjY2RScsIHsKICAgICAgICAgIG1hdGh2YXJpYW50OiBNTUwuVkFSSUFOVC5OT1JNQUwKICAgICAgICB9XSwKICAgICAgICBzaGFycDogWycyNjZGJywgewogICAgICAgICAgbWF0aHZhcmlhbnQ6IE1NTC5WQVJJQU5ULk5PUk1BTAogICAgICAgIH1dLAogICAgICAgIGNsdWJzdWl0OiBbJzI2NjMnLCB7CiAgICAgICAgICBtYXRodmFyaWFudDogTU1MLlZBUklBTlQuTk9STUFMCiAgICAgICAgfV0sCiAgICAgICAgZGlhbW9uZHN1aXQ6IFsnMjY2MicsIHsKICAgICAgICAgIG1hdGh2YXJpYW50OiBNTUwuVkFSSUFOVC5OT1JNQUwKICAgICAgICB9XSwKICAgICAgICBoZWFydHN1aXQ6IFsnMjY2MScsIHsKICAgICAgICAgIG1hdGh2YXJpYW50OiBNTUwuVkFSSUFOVC5OT1JNQUwKICAgICAgICB9XSwKICAgICAgICBzcGFkZXN1aXQ6IFsnMjY2MCcsIHsKICAgICAgICAgIG1hdGh2YXJpYW50OiBNTUwuVkFSSUFOVC5OT1JNQUwKICAgICAgICB9XQogICAgICB9LAogICAgICBtYXRoY2hhcjBtbzogewogICAgICAgIHN1cmQ6ICcyMjFBJywKICAgICAgICAvLyBiaWcgb3BzCiAgICAgICAgY29wcm9kOiBbJzIyMTAnLCB7CiAgICAgICAgICB0ZXhDbGFzczogTU1MLlRFWENMQVNTLk9QLAogICAgICAgICAgbW92ZXN1cHN1YjogdHJ1ZQogICAgICAgIH1dLAogICAgICAgIGJpZ3ZlZTogWycyMkMxJywgewogICAgICAgICAgdGV4Q2xhc3M6IE1NTC5URVhDTEFTUy5PUCwKICAgICAgICAgIG1vdmVzdXBzdWI6IHRydWUKICAgICAgICB9XSwKICAgICAgICBiaWd3ZWRnZTogWycyMkMwJywgewogICAgICAgICAgdGV4Q2xhc3M6IE1NTC5URVhDTEFTUy5PUCwKICAgICAgICAgIG1vdmVzdXBzdWI6IHRydWUKICAgICAgICB9XSwKICAgICAgICBiaWd1cGx1czogWycyQTA0JywgewogICAgICAgICAgdGV4Q2xhc3M6IE1NTC5URVhDTEFTUy5PUCwKICAgICAgICAgIG1vdmVzdXBzdWI6IHRydWUKICAgICAgICB9XSwKICAgICAgICBiaWdjYXA6IFsnMjJDMicsIHsKICAgICAgICAgIHRleENsYXNzOiBNTUwuVEVYQ0xBU1MuT1AsCiAgICAgICAgICBtb3Zlc3Vwc3ViOiB0cnVlCiAgICAgICAgfV0sCiAgICAgICAgYmlnY3VwOiBbJzIyQzMnLCB7CiAgICAgICAgICB0ZXhDbGFzczogTU1MLlRFWENMQVNTLk9QLAogICAgICAgICAgbW92ZXN1cHN1YjogdHJ1ZQogICAgICAgIH1dLAogICAgICAgICdpbnQnOiBbJzIyMkInLCB7CiAgICAgICAgICB0ZXhDbGFzczogTU1MLlRFWENMQVNTLk9QCiAgICAgICAgfV0sCiAgICAgICAgaW50b3A6IFsnMjIyQicsIHsKICAgICAgICAgIHRleENsYXNzOiBNTUwuVEVYQ0xBU1MuT1AsCiAgICAgICAgICBtb3Zlc3Vwc3ViOiB0cnVlLAogICAgICAgICAgbW92YWJsZWxpbWl0czogdHJ1ZQogICAgICAgIH1dLAogICAgICAgIGlpbnQ6IFsnMjIyQycsIHsKICAgICAgICAgIHRleENsYXNzOiBNTUwuVEVYQ0xBU1MuT1AKICAgICAgICB9XSwKICAgICAgICBpaWludDogWycyMjJEJywgewogICAgICAgICAgdGV4Q2xhc3M6IE1NTC5URVhDTEFTUy5PUAogICAgICAgIH1dLAogICAgICAgIHByb2Q6IFsnMjIwRicsIHsKICAgICAgICAgIHRleENsYXNzOiBNTUwuVEVYQ0xBU1MuT1AsCiAgICAgICAgICBtb3Zlc3Vwc3ViOiB0cnVlCiAgICAgICAgfV0sCiAgICAgICAgc3VtOiBbJzIyMTEnLCB7CiAgICAgICAgICB0ZXhDbGFzczogTU1MLlRFWENMQVNTLk9QLAogICAgICAgICAgbW92ZXN1cHN1YjogdHJ1ZQogICAgICAgIH1dLAogICAgICAgIGJpZ290aW1lczogWycyQTAyJywgewogICAgICAgICAgdGV4Q2xhc3M6IE1NTC5URVhDTEFTUy5PUCwKICAgICAgICAgIG1vdmVzdXBzdWI6IHRydWUKICAgICAgICB9XSwKICAgICAgICBiaWdvcGx1czogWycyQTAxJywgewogICAgICAgICAgdGV4Q2xhc3M6IE1NTC5URVhDTEFTUy5PUCwKICAgICAgICAgIG1vdmVzdXBzdWI6IHRydWUKICAgICAgICB9XSwKICAgICAgICBiaWdvZG90OiBbJzJBMDAnLCB7CiAgICAgICAgICB0ZXhDbGFzczogTU1MLlRFWENMQVNTLk9QLAogICAgICAgICAgbW92ZXN1cHN1YjogdHJ1ZQogICAgICAgIH1dLAogICAgICAgIG9pbnQ6IFsnMjIyRScsIHsKICAgICAgICAgIHRleENsYXNzOiBNTUwuVEVYQ0xBU1MuT1AKICAgICAgICB9XSwKICAgICAgICBiaWdzcWN1cDogWycyQTA2JywgewogICAgICAgICAgdGV4Q2xhc3M6IE1NTC5URVhDTEFTUy5PUCwKICAgICAgICAgIG1vdmVzdXBzdWI6IHRydWUKICAgICAgICB9XSwKICAgICAgICBzbWFsbGludDogWycyMjJCJywgewogICAgICAgICAgbGFyZ2VvcDogZmFsc2UKICAgICAgICB9XSwKICAgICAgICAvLyBiaW5hcnkgb3BlcmF0aW9ucwogICAgICAgIHRyaWFuZ2xlbGVmdDogJzI1QzMnLAogICAgICAgIHRyaWFuZ2xlcmlnaHQ6ICcyNUI5JywKICAgICAgICBiaWd0cmlhbmdsZXVwOiAnMjVCMycsCiAgICAgICAgYmlndHJpYW5nbGVkb3duOiAnMjVCRCcsCiAgICAgICAgd2VkZ2U6ICcyMjI3JywKICAgICAgICBsYW5kOiAnMjIyNycsCiAgICAgICAgdmVlOiAnMjIyOCcsCiAgICAgICAgbG9yOiAnMjIyOCcsCiAgICAgICAgY2FwOiAnMjIyOScsCiAgICAgICAgY3VwOiAnMjIyQScsCiAgICAgICAgZGRhZ2dlcjogJzIwMjEnLAogICAgICAgIGRhZ2dlcjogJzIwMjAnLAogICAgICAgIHNxY2FwOiAnMjI5MycsCiAgICAgICAgc3FjdXA6ICcyMjk0JywKICAgICAgICB1cGx1czogJzIyOEUnLAogICAgICAgIGFtYWxnOiAnMkEzRicsCiAgICAgICAgZGlhbW9uZDogJzIyQzQnLAogICAgICAgIGJ1bGxldDogJzIyMTknLAogICAgICAgIHdyOiAnMjI0MCcsCiAgICAgICAgZGl2OiAnMDBGNycsCiAgICAgICAgb2RvdDogWycyMjk5JywgewogICAgICAgICAgbGFyZ2VvcDogZmFsc2UKICAgICAgICB9XSwKICAgICAgICBvc2xhc2g6IFsnMjI5OCcsIHsKICAgICAgICAgIGxhcmdlb3A6IGZhbHNlCiAgICAgICAgfV0sCiAgICAgICAgb3RpbWVzOiBbJzIyOTcnLCB7CiAgICAgICAgICBsYXJnZW9wOiBmYWxzZQogICAgICAgIH1dLAogICAgICAgIG9taW51czogWycyMjk2JywgewogICAgICAgICAgbGFyZ2VvcDogZmFsc2UKICAgICAgICB9XSwKICAgICAgICBvcGx1czogWycyMjk1JywgewogICAgICAgICAgbGFyZ2VvcDogZmFsc2UKICAgICAgICB9XSwKICAgICAgICBtcDogJzIyMTMnLAogICAgICAgIHBtOiAnMDBCMScsCiAgICAgICAgY2lyYzogJzIyMTgnLAogICAgICAgIGJpZ2NpcmM6ICcyNUVGJywKICAgICAgICBzZXRtaW51czogWycyMjE2JywgewogICAgICAgICAgdmFyaWFudEZvcm06IHRydWUKICAgICAgICB9XSwKICAgICAgICBjZG90OiAnMjJDNScsCiAgICAgICAgYXN0OiAnMjIxNycsCiAgICAgICAgdGltZXM6ICcwMEQ3JywKICAgICAgICBzdGFyOiAnMjJDNicsCiAgICAgICAgLy8gUmVsYXRpb25zCiAgICAgICAgcHJvcHRvOiAnMjIxRCcsCiAgICAgICAgc3FzdWJzZXRlcTogJzIyOTEnLAogICAgICAgIHNxc3Vwc2V0ZXE6ICcyMjkyJywKICAgICAgICBwYXJhbGxlbDogJzIyMjUnLAogICAgICAgIG1pZDogJzIyMjMnLAogICAgICAgIGRhc2h2OiAnMjJBMycsCiAgICAgICAgdmRhc2g6ICcyMkEyJywKICAgICAgICBsZXE6ICcyMjY0JywKICAgICAgICBsZTogJzIyNjQnLAogICAgICAgIGdlcTogJzIyNjUnLAogICAgICAgIGdlOiAnMjI2NScsCiAgICAgICAgbHQ6ICcwMDNDJywKICAgICAgICBndDogJzAwM0UnLAogICAgICAgIHN1Y2M6ICcyMjdCJywKICAgICAgICBwcmVjOiAnMjI3QScsCiAgICAgICAgYXBwcm94OiAnMjI0OCcsCiAgICAgICAgc3VjY2VxOiAnMkFCMCcsCiAgICAgICAgLy8gb3IgJzIyN0MnLAogICAgICAgIHByZWNlcTogJzJBQUYnLAogICAgICAgIC8vIG9yICcyMjdEJywKICAgICAgICBzdXBzZXQ6ICcyMjgzJywKICAgICAgICBzdWJzZXQ6ICcyMjgyJywKICAgICAgICBzdXBzZXRlcTogJzIyODcnLAogICAgICAgIHN1YnNldGVxOiAnMjI4NicsCiAgICAgICAgJ2luJzogJzIyMDgnLAogICAgICAgIG5pOiAnMjIwQicsCiAgICAgICAgbm90aW46ICcyMjA5JywKICAgICAgICBvd25zOiAnMjIwQicsCiAgICAgICAgZ2c6ICcyMjZCJywKICAgICAgICBsbDogJzIyNkEnLAogICAgICAgIHNpbTogJzIyM0MnLAogICAgICAgIHNpbWVxOiAnMjI0MycsCiAgICAgICAgcGVycDogJzIyQTUnLAogICAgICAgIGVxdWl2OiAnMjI2MScsCiAgICAgICAgYXN5bXA6ICcyMjREJywKICAgICAgICBzbWlsZTogJzIzMjMnLAogICAgICAgIGZyb3duOiAnMjMyMicsCiAgICAgICAgbmU6ICcyMjYwJywKICAgICAgICBuZXE6ICcyMjYwJywKICAgICAgICBjb25nOiAnMjI0NScsCiAgICAgICAgZG90ZXE6ICcyMjUwJywKICAgICAgICBib3d0aWU6ICcyMkM4JywKICAgICAgICBtb2RlbHM6ICcyMkE4JywKICAgICAgICBub3RDaGFyOiAnMjlGOCcsCiAgICAgICAgLy8gQXJyb3dzCiAgICAgICAgTGVmdHJpZ2h0YXJyb3c6ICcyMUQ0JywKICAgICAgICBMZWZ0YXJyb3c6ICcyMUQwJywKICAgICAgICBSaWdodGFycm93OiAnMjFEMicsCiAgICAgICAgbGVmdHJpZ2h0YXJyb3c6ICcyMTk0JywKICAgICAgICBsZWZ0YXJyb3c6ICcyMTkwJywKICAgICAgICBnZXRzOiAnMjE5MCcsCiAgICAgICAgcmlnaHRhcnJvdzogJzIxOTInLAogICAgICAgIHRvOiAnMjE5MicsCiAgICAgICAgbWFwc3RvOiAnMjFBNicsCiAgICAgICAgbGVmdGhhcnBvb251cDogJzIxQkMnLAogICAgICAgIGxlZnRoYXJwb29uZG93bjogJzIxQkQnLAogICAgICAgIHJpZ2h0aGFycG9vbnVwOiAnMjFDMCcsCiAgICAgICAgcmlnaHRoYXJwb29uZG93bjogJzIxQzEnLAogICAgICAgIG5lYXJyb3c6ICcyMTk3JywKICAgICAgICBzZWFycm93OiAnMjE5OCcsCiAgICAgICAgbndhcnJvdzogJzIxOTYnLAogICAgICAgIHN3YXJyb3c6ICcyMTk5JywKICAgICAgICByaWdodGxlZnRoYXJwb29uczogJzIxQ0MnLAogICAgICAgIGhvb2tyaWdodGFycm93OiAnMjFBQScsCiAgICAgICAgaG9va2xlZnRhcnJvdzogJzIxQTknLAogICAgICAgIGxvbmdsZWZ0YXJyb3c6ICcyN0Y1JywKICAgICAgICBMb25nbGVmdGFycm93OiAnMjdGOCcsCiAgICAgICAgbG9uZ3JpZ2h0YXJyb3c6ICcyN0Y2JywKICAgICAgICBMb25ncmlnaHRhcnJvdzogJzI3RjknLAogICAgICAgIExvbmdsZWZ0cmlnaHRhcnJvdzogJzI3RkEnLAogICAgICAgIGxvbmdsZWZ0cmlnaHRhcnJvdzogJzI3RjcnLAogICAgICAgIGxvbmdtYXBzdG86ICcyN0ZDJywKICAgICAgICAvLyBNaXNjLgogICAgICAgIGxkb3RzOiAnMjAyNicsCiAgICAgICAgY2RvdHM6ICcyMkVGJywKICAgICAgICB2ZG90czogJzIyRUUnLAogICAgICAgIGRkb3RzOiAnMjJGMScsCiAgICAgICAgZG90c2M6ICcyMDI2JywKICAgICAgICAvLyBkb3RzIHdpdGggY29tbWFzCiAgICAgICAgZG90c2I6ICcyMkVGJywKICAgICAgICAvLyBkb3RzIHdpdGggYmluYXJ5IG9wcyBhbmQgcmVsYXRpb25zCiAgICAgICAgZG90c206ICcyMkVGJywKICAgICAgICAvLyBkb3RzIHdpdGggbXVsdGlwbGljYXRpb24KICAgICAgICBkb3RzaTogJzIyRUYnLAogICAgICAgIC8vIGRvdHMgd2l0aCBpbnRlZ3JhbHMKICAgICAgICBkb3RzbzogJzIwMjYnLAogICAgICAgIC8vIG90aGVyIGRvdHMKICAgICAgICBsZG90cDogWycwMDJFJywgewogICAgICAgICAgdGV4Q2xhc3M6IE1NTC5URVhDTEFTUy5QVU5DVAogICAgICAgIH1dLAogICAgICAgIGNkb3RwOiBbJzIyQzUnLCB7CiAgICAgICAgICB0ZXhDbGFzczogTU1MLlRFWENMQVNTLlBVTkNUCiAgICAgICAgfV0sCiAgICAgICAgY29sb246IFsnMDAzQScsIHsKICAgICAgICAgIHRleENsYXNzOiBNTUwuVEVYQ0xBU1MuUFVOQ1QKICAgICAgICB9XQogICAgICB9LAogICAgICBtYXRoY2hhcjc6IHsKICAgICAgICBHYW1tYTogJzAzOTMnLAogICAgICAgIERlbHRhOiAnMDM5NCcsCiAgICAgICAgVGhldGE6ICcwMzk4JywKICAgICAgICBMYW1iZGE6ICcwMzlCJywKICAgICAgICBYaTogJzAzOUUnLAogICAgICAgIFBpOiAnMDNBMCcsCiAgICAgICAgU2lnbWE6ICcwM0EzJywKICAgICAgICBVcHNpbG9uOiAnMDNBNScsCiAgICAgICAgUGhpOiAnMDNBNicsCiAgICAgICAgUHNpOiAnMDNBOCcsCiAgICAgICAgT21lZ2E6ICcwM0E5JywKICAgICAgICAnXyc6ICcwMDVGJywKICAgICAgICAnIyc6ICcwMDIzJywKICAgICAgICAnJCc6ICcwMDI0JywKICAgICAgICAnJSc6ICcwMDI1JywKICAgICAgICAnJic6ICcwMDI2JywKICAgICAgICBBbmQ6ICcwMDI2JwogICAgICB9LAogICAgICBkZWxpbWl0ZXI6IHsKICAgICAgICAnKCc6ICcoJywKICAgICAgICAnKSc6ICcpJywKICAgICAgICAnWyc6ICdbJywKICAgICAgICAnXSc6ICddJywKICAgICAgICAnPCc6ICcyN0U4JywKICAgICAgICAnPic6ICcyN0U5JywKICAgICAgICAnXFxsdCc6ICcyN0U4JywKICAgICAgICAnXFxndCc6ICcyN0U5JywKICAgICAgICAnLyc6ICcvJywKICAgICAgICAnfCc6IFsnfCcsIHsKICAgICAgICAgIHRleENsYXNzOiBNTUwuVEVYQ0xBU1MuT1JECiAgICAgICAgfV0sCiAgICAgICAgJy4nOiAnJywKICAgICAgICAnXFxcXCc6ICdcXCcsCiAgICAgICAgJ1xcbG1vdXN0YWNoZSc6ICcyM0IwJywKICAgICAgICAvLyBub24tc3RhbmRhcmQKICAgICAgICAnXFxybW91c3RhY2hlJzogJzIzQjEnLAogICAgICAgIC8vIG5vbi1zdGFuZGFyZAogICAgICAgICdcXGxncm91cCc6ICcyN0VFJywKICAgICAgICAvLyBub24tc3RhbmRhcmQKICAgICAgICAnXFxyZ3JvdXAnOiAnMjdFRicsCiAgICAgICAgLy8gbm9uLXN0YW5kYXJkCiAgICAgICAgJ1xcYXJyb3d2ZXJ0JzogJzIzRDAnLAogICAgICAgICdcXEFycm93dmVydCc6ICcyMDE2JywKICAgICAgICAnXFxicmFjZXZlcnQnOiAnMjNBQScsCiAgICAgICAgLy8gbm9uLXN0YW5kYXJkCiAgICAgICAgJ1xcVmVydCc6IFsnMjIyNScsIHsKICAgICAgICAgIHRleENsYXNzOiBNTUwuVEVYQ0xBU1MuT1JECiAgICAgICAgfV0sCiAgICAgICAgJ1xcfCc6IFsnMjIyNScsIHsKICAgICAgICAgIHRleENsYXNzOiBNTUwuVEVYQ0xBU1MuT1JECiAgICAgICAgfV0sCiAgICAgICAgJ1xcdmVydCc6IFsnfCcsIHsKICAgICAgICAgIHRleENsYXNzOiBNTUwuVEVYQ0xBU1MuT1JECiAgICAgICAgfV0sCiAgICAgICAgIlxcdXBhcnJvdyI6ICcyMTkxJywKICAgICAgICAnXFxkb3duYXJyb3cnOiAnMjE5MycsCiAgICAgICAgIlxcdXBkb3duYXJyb3ciOiAnMjE5NScsCiAgICAgICAgIlxcVXBhcnJvdyI6ICcyMUQxJywKICAgICAgICAnXFxEb3duYXJyb3cnOiAnMjFEMycsCiAgICAgICAgIlxcVXBkb3duYXJyb3ciOiAnMjFENScsCiAgICAgICAgJ1xcYmFja3NsYXNoJzogJ1xcJywKICAgICAgICAnXFxyYW5nbGUnOiAnMjdFOScsCiAgICAgICAgJ1xcbGFuZ2xlJzogJzI3RTgnLAogICAgICAgICdcXHJicmFjZSc6ICd9JywKICAgICAgICAnXFxsYnJhY2UnOiAneycsCiAgICAgICAgJ1xcfSc6ICd9JywKICAgICAgICAnXFx7JzogJ3snLAogICAgICAgICdcXHJjZWlsJzogJzIzMDknLAogICAgICAgICdcXGxjZWlsJzogJzIzMDgnLAogICAgICAgICdcXHJmbG9vcic6ICcyMzBCJywKICAgICAgICAnXFxsZmxvb3InOiAnMjMwQScsCiAgICAgICAgJ1xcbGJyYWNrJzogJ1snLAogICAgICAgICdcXHJicmFjayc6ICddJwogICAgICB9LAogICAgICBtYWNyb3M6IHsKICAgICAgICBkaXNwbGF5c3R5bGU6IFsnU2V0U3R5bGUnLCAnRCcsIHRydWUsIDBdLAogICAgICAgIHRleHRzdHlsZTogWydTZXRTdHlsZScsICdUJywgZmFsc2UsIDBdLAogICAgICAgIHNjcmlwdHN0eWxlOiBbJ1NldFN0eWxlJywgJ1MnLCBmYWxzZSwgMV0sCiAgICAgICAgc2NyaXB0c2NyaXB0c3R5bGU6IFsnU2V0U3R5bGUnLCAnU1MnLCBmYWxzZSwgMl0sCiAgICAgICAgcm06IFsnU2V0Rm9udCcsIE1NTC5WQVJJQU5ULk5PUk1BTF0sCiAgICAgICAgbWl0OiBbJ1NldEZvbnQnLCBNTUwuVkFSSUFOVC5JVEFMSUNdLAogICAgICAgIG9sZHN0eWxlOiBbJ1NldEZvbnQnLCBNTUwuVkFSSUFOVC5PTERTVFlMRV0sCiAgICAgICAgY2FsOiBbJ1NldEZvbnQnLCBNTUwuVkFSSUFOVC5DQUxJR1JBUEhJQ10sCiAgICAgICAgaXQ6IFsnU2V0Rm9udCcsICItdGV4LW1hdGhpdCJdLAogICAgICAgIC8vIG5lZWRzIHNwZWNpYWwgaGFuZGxpbmcKICAgICAgICBiZjogWydTZXRGb250JywgTU1MLlZBUklBTlQuQk9MRF0sCiAgICAgICAgYmJGb250OiBbJ1NldEZvbnQnLCBNTUwuVkFSSUFOVC5ET1VCTEVTVFJVQ0tdLAogICAgICAgIHNjcjogWydTZXRGb250JywgTU1MLlZBUklBTlQuU0NSSVBUXSwKICAgICAgICBmcmFrOiBbJ1NldEZvbnQnLCBNTUwuVkFSSUFOVC5GUkFLVFVSXSwKICAgICAgICBzZjogWydTZXRGb250JywgTU1MLlZBUklBTlQuU0FOU1NFUklGXSwKICAgICAgICB0dDogWydTZXRGb250JywgTU1MLlZBUklBTlQuTU9OT1NQQUNFXSwKICAgICAgICAvLyAgICAgIGZvbnQ6CiAgICAgICAgdGlueTogWydTZXRTaXplJywgMC41XSwKICAgICAgICBUaW55OiBbJ1NldFNpemUnLCAwLjZdLAogICAgICAgIC8vIG5vbi1zdGFuZGFyZAogICAgICAgIHNjcmlwdHNpemU6IFsnU2V0U2l6ZScsIDAuN10sCiAgICAgICAgc21hbGw6IFsnU2V0U2l6ZScsIDAuODVdLAogICAgICAgIG5vcm1hbHNpemU6IFsnU2V0U2l6ZScsIDEuMF0sCiAgICAgICAgbGFyZ2U6IFsnU2V0U2l6ZScsIDEuMl0sCiAgICAgICAgTGFyZ2U6IFsnU2V0U2l6ZScsIDEuNDRdLAogICAgICAgIExBUkdFOiBbJ1NldFNpemUnLCAxLjczXSwKICAgICAgICBodWdlOiBbJ1NldFNpemUnLCAyLjA3XSwKICAgICAgICBIdWdlOiBbJ1NldFNpemUnLCAyLjQ5XSwKICAgICAgICBhcmNzaW46IFsnTmFtZWRGbiddLAogICAgICAgIGFyY2NvczogWydOYW1lZEZuJ10sCiAgICAgICAgYXJjdGFuOiBbJ05hbWVkRm4nXSwKICAgICAgICBhcmc6IFsnTmFtZWRGbiddLAogICAgICAgIGNvczogWydOYW1lZEZuJ10sCiAgICAgICAgY29zaDogWydOYW1lZEZuJ10sCiAgICAgICAgY290OiBbJ05hbWVkRm4nXSwKICAgICAgICBjb3RoOiBbJ05hbWVkRm4nXSwKICAgICAgICBjc2M6IFsnTmFtZWRGbiddLAogICAgICAgIGRlZzogWydOYW1lZEZuJ10sCiAgICAgICAgZGV0OiAnTmFtZWRPcCcsCiAgICAgICAgZGltOiBbJ05hbWVkRm4nXSwKICAgICAgICBleHA6IFsnTmFtZWRGbiddLAogICAgICAgIGdjZDogJ05hbWVkT3AnLAogICAgICAgIGhvbTogWydOYW1lZEZuJ10sCiAgICAgICAgaW5mOiAnTmFtZWRPcCcsCiAgICAgICAga2VyOiBbJ05hbWVkRm4nXSwKICAgICAgICBsZzogWydOYW1lZEZuJ10sCiAgICAgICAgbGltOiAnTmFtZWRPcCcsCiAgICAgICAgbGltaW5mOiBbJ05hbWVkT3AnLCAnbGltJnRoaW5zcDtpbmYnXSwKICAgICAgICBsaW1zdXA6IFsnTmFtZWRPcCcsICdsaW0mdGhpbnNwO3N1cCddLAogICAgICAgIGxuOiBbJ05hbWVkRm4nXSwKICAgICAgICBsb2c6IFsnTmFtZWRGbiddLAogICAgICAgIG1heDogJ05hbWVkT3AnLAogICAgICAgIG1pbjogJ05hbWVkT3AnLAogICAgICAgIFByOiAnTmFtZWRPcCcsCiAgICAgICAgc2VjOiBbJ05hbWVkRm4nXSwKICAgICAgICBzaW46IFsnTmFtZWRGbiddLAogICAgICAgIHNpbmg6IFsnTmFtZWRGbiddLAogICAgICAgIHN1cDogJ05hbWVkT3AnLAogICAgICAgIHRhbjogWydOYW1lZEZuJ10sCiAgICAgICAgdGFuaDogWydOYW1lZEZuJ10sCiAgICAgICAgbGltaXRzOiBbJ0xpbWl0cycsIDFdLAogICAgICAgIG5vbGltaXRzOiBbJ0xpbWl0cycsIDBdLAogICAgICAgIG92ZXJsaW5lOiBbJ1VuZGVyT3ZlcicsICcwMEFGJywgbnVsbCwgMV0sCiAgICAgICAgdW5kZXJsaW5lOiBbJ1VuZGVyT3ZlcicsICcwMDVGJ10sCiAgICAgICAgb3ZlcmJyYWNlOiBbJ1VuZGVyT3ZlcicsICcyM0RFJywgMV0sCiAgICAgICAgdW5kZXJicmFjZTogWydVbmRlck92ZXInLCAnMjNERicsIDFdLAogICAgICAgIG92ZXJwYXJlbjogWydVbmRlck92ZXInLCAnMjNEQyddLAogICAgICAgIHVuZGVycGFyZW46IFsnVW5kZXJPdmVyJywgJzIzREQnXSwKICAgICAgICBvdmVycmlnaHRhcnJvdzogWydVbmRlck92ZXInLCAnMjE5MiddLAogICAgICAgIHVuZGVycmlnaHRhcnJvdzogWydVbmRlck92ZXInLCAnMjE5MiddLAogICAgICAgIG92ZXJsZWZ0YXJyb3c6IFsnVW5kZXJPdmVyJywgJzIxOTAnXSwKICAgICAgICB1bmRlcmxlZnRhcnJvdzogWydVbmRlck92ZXInLCAnMjE5MCddLAogICAgICAgIG92ZXJsZWZ0cmlnaHRhcnJvdzogWydVbmRlck92ZXInLCAnMjE5NCddLAogICAgICAgIHVuZGVybGVmdHJpZ2h0YXJyb3c6IFsnVW5kZXJPdmVyJywgJzIxOTQnXSwKICAgICAgICBvdmVyc2V0OiAnT3ZlcnNldCcsCiAgICAgICAgdW5kZXJzZXQ6ICdVbmRlcnNldCcsCiAgICAgICAgc3RhY2tyZWw6IFsnTWFjcm8nLCAnXFxtYXRocmVse1xcbWF0aG9weyMyfVxcbGltaXRzXnsjMX19JywgMl0sCiAgICAgICAgb3ZlcjogJ092ZXInLAogICAgICAgIG92ZXJ3aXRoZGVsaW1zOiAnT3ZlcicsCiAgICAgICAgYXRvcDogJ092ZXInLAogICAgICAgIGF0b3B3aXRoZGVsaW1zOiAnT3ZlcicsCiAgICAgICAgYWJvdmU6ICdPdmVyJywKICAgICAgICBhYm92ZXdpdGhkZWxpbXM6ICdPdmVyJywKICAgICAgICBicmFjZTogWydPdmVyJywgJ3snLCAnfSddLAogICAgICAgIGJyYWNrOiBbJ092ZXInLCAnWycsICddJ10sCiAgICAgICAgY2hvb3NlOiBbJ092ZXInLCAnKCcsICcpJ10sCiAgICAgICAgZnJhYzogJ0ZyYWMnLAogICAgICAgIHNxcnQ6ICdTcXJ0JywKICAgICAgICByb290OiAnUm9vdCcsCiAgICAgICAgdXByb290OiBbJ01vdmVSb290JywgJ3VwUm9vdCddLAogICAgICAgIGxlZnRyb290OiBbJ01vdmVSb290JywgJ2xlZnRSb290J10sCiAgICAgICAgbGVmdDogJ0xlZnRSaWdodCcsCiAgICAgICAgcmlnaHQ6ICdMZWZ0UmlnaHQnLAogICAgICAgIG1pZGRsZTogJ01pZGRsZScsCiAgICAgICAgbGxhcDogJ0xhcCcsCiAgICAgICAgcmxhcDogJ0xhcCcsCiAgICAgICAgcmFpc2U6ICdSYWlzZUxvd2VyJywKICAgICAgICBsb3dlcjogJ1JhaXNlTG93ZXInLAogICAgICAgIG1vdmVsZWZ0OiAnTW92ZUxlZnRSaWdodCcsCiAgICAgICAgbW92ZXJpZ2h0OiAnTW92ZUxlZnRSaWdodCcsCiAgICAgICAgJywnOiBbJ1NwYWNlcicsIE1NTC5MRU5HVEguVEhJTk1BVEhTUEFDRV0sCiAgICAgICAgJzonOiBbJ1NwYWNlcicsIE1NTC5MRU5HVEguTUVESVVNTUFUSFNQQUNFXSwKICAgICAgICAvLyBmb3IgTGFUZVgKICAgICAgICAnPic6IFsnU3BhY2VyJywgTU1MLkxFTkdUSC5NRURJVU1NQVRIU1BBQ0VdLAogICAgICAgICc7JzogWydTcGFjZXInLCBNTUwuTEVOR1RILlRISUNLTUFUSFNQQUNFXSwKICAgICAgICAnISc6IFsnU3BhY2VyJywgTU1MLkxFTkdUSC5ORUdBVElWRVRISU5NQVRIU1BBQ0VdLAogICAgICAgIGVuc3BhY2U6IFsnU3BhY2VyJywgIi41ZW0iXSwKICAgICAgICBxdWFkOiBbJ1NwYWNlcicsICIxZW0iXSwKICAgICAgICBxcXVhZDogWydTcGFjZXInLCAiMmVtIl0sCiAgICAgICAgdGhpbnNwYWNlOiBbJ1NwYWNlcicsIE1NTC5MRU5HVEguVEhJTk1BVEhTUEFDRV0sCiAgICAgICAgbmVndGhpbnNwYWNlOiBbJ1NwYWNlcicsIE1NTC5MRU5HVEguTkVHQVRJVkVUSElOTUFUSFNQQUNFXSwKICAgICAgICBoc2tpcDogJ0hza2lwJywKICAgICAgICBoc3BhY2U6ICdIc2tpcCcsCiAgICAgICAga2VybjogJ0hza2lwJywKICAgICAgICBtc2tpcDogJ0hza2lwJywKICAgICAgICBtc3BhY2U6ICdIc2tpcCcsCiAgICAgICAgbWtlcm46ICdIc2tpcCcsCiAgICAgICAgUnVsZTogWydSdWxlJ10sCiAgICAgICAgU3BhY2U6IFsnUnVsZScsICdibGFuayddLAogICAgICAgIGJpZzogWydNYWtlQmlnJywgTU1MLlRFWENMQVNTLk9SRCwgMC44NV0sCiAgICAgICAgQmlnOiBbJ01ha2VCaWcnLCBNTUwuVEVYQ0xBU1MuT1JELCAxLjE1XSwKICAgICAgICBiaWdnOiBbJ01ha2VCaWcnLCBNTUwuVEVYQ0xBU1MuT1JELCAxLjQ1XSwKICAgICAgICBCaWdnOiBbJ01ha2VCaWcnLCBNTUwuVEVYQ0xBU1MuT1JELCAxLjc1XSwKICAgICAgICBiaWdsOiBbJ01ha2VCaWcnLCBNTUwuVEVYQ0xBU1MuT1BFTiwgMC44NV0sCiAgICAgICAgQmlnbDogWydNYWtlQmlnJywgTU1MLlRFWENMQVNTLk9QRU4sIDEuMTVdLAogICAgICAgIGJpZ2dsOiBbJ01ha2VCaWcnLCBNTUwuVEVYQ0xBU1MuT1BFTiwgMS40NV0sCiAgICAgICAgQmlnZ2w6IFsnTWFrZUJpZycsIE1NTC5URVhDTEFTUy5PUEVOLCAxLjc1XSwKICAgICAgICBiaWdyOiBbJ01ha2VCaWcnLCBNTUwuVEVYQ0xBU1MuQ0xPU0UsIDAuODVdLAogICAgICAgIEJpZ3I6IFsnTWFrZUJpZycsIE1NTC5URVhDTEFTUy5DTE9TRSwgMS4xNV0sCiAgICAgICAgYmlnZ3I6IFsnTWFrZUJpZycsIE1NTC5URVhDTEFTUy5DTE9TRSwgMS40NV0sCiAgICAgICAgQmlnZ3I6IFsnTWFrZUJpZycsIE1NTC5URVhDTEFTUy5DTE9TRSwgMS43NV0sCiAgICAgICAgYmlnbTogWydNYWtlQmlnJywgTU1MLlRFWENMQVNTLlJFTCwgMC44NV0sCiAgICAgICAgQmlnbTogWydNYWtlQmlnJywgTU1MLlRFWENMQVNTLlJFTCwgMS4xNV0sCiAgICAgICAgYmlnZ206IFsnTWFrZUJpZycsIE1NTC5URVhDTEFTUy5SRUwsIDEuNDVdLAogICAgICAgIEJpZ2dtOiBbJ01ha2VCaWcnLCBNTUwuVEVYQ0xBU1MuUkVMLCAxLjc1XSwKICAgICAgICBtYXRob3JkOiBbJ1RlWEF0b20nLCBNTUwuVEVYQ0xBU1MuT1JEXSwKICAgICAgICBtYXRob3A6IFsnVGVYQXRvbScsIE1NTC5URVhDTEFTUy5PUF0sCiAgICAgICAgbWF0aG9wZW46IFsnVGVYQXRvbScsIE1NTC5URVhDTEFTUy5PUEVOXSwKICAgICAgICBtYXRoY2xvc2U6IFsnVGVYQXRvbScsIE1NTC5URVhDTEFTUy5DTE9TRV0sCiAgICAgICAgbWF0aGJpbjogWydUZVhBdG9tJywgTU1MLlRFWENMQVNTLkJJTl0sCiAgICAgICAgbWF0aHJlbDogWydUZVhBdG9tJywgTU1MLlRFWENMQVNTLlJFTF0sCiAgICAgICAgbWF0aHB1bmN0OiBbJ1RlWEF0b20nLCBNTUwuVEVYQ0xBU1MuUFVOQ1RdLAogICAgICAgIG1hdGhpbm5lcjogWydUZVhBdG9tJywgTU1MLlRFWENMQVNTLklOTkVSXSwKICAgICAgICB2Y2VudGVyOiBbJ1RlWEF0b20nLCBNTUwuVEVYQ0xBU1MuVkNFTlRFUl0sCiAgICAgICAgbWF0aGNob2ljZTogWydFeHRlbnNpb24nLCAnbWF0aGNob2ljZSddLAogICAgICAgIGJ1aWxkcmVsOiAnQnVpbGRSZWwnLAogICAgICAgIGhib3g6IFsnSEJveCcsIDBdLAogICAgICAgIHRleHQ6ICdIQm94JywKICAgICAgICBtYm94OiBbJ0hCb3gnLCAwXSwKICAgICAgICBmYm94OiAnRkJveCcsCiAgICAgICAgc3RydXQ6ICdTdHJ1dCcsCiAgICAgICAgbWF0aHN0cnV0OiBbJ01hY3JvJywgJ1xcdnBoYW50b217KH0nXSwKICAgICAgICBwaGFudG9tOiAnUGhhbnRvbScsCiAgICAgICAgdnBoYW50b206IFsnUGhhbnRvbScsIDEsIDBdLAogICAgICAgIGhwaGFudG9tOiBbJ1BoYW50b20nLCAwLCAxXSwKICAgICAgICBzbWFzaDogJ1NtYXNoJywKICAgICAgICBhY3V0ZTogWydBY2NlbnQnLCAiMDBCNCJdLAogICAgICAgIC8vIG9yIDAzMDEgb3IgMDJDQQogICAgICAgIGdyYXZlOiBbJ0FjY2VudCcsICIwMDYwIl0sCiAgICAgICAgLy8gb3IgMDMwMCBvciAwMkNCCiAgICAgICAgZGRvdDogWydBY2NlbnQnLCAiMDBBOCJdLAogICAgICAgIC8vIG9yIDAzMDgKICAgICAgICB0aWxkZTogWydBY2NlbnQnLCAiMDA3RSJdLAogICAgICAgIC8vIG9yIDAzMDMgb3IgMDJEQwogICAgICAgIGJhcjogWydBY2NlbnQnLCAiMDBBRiJdLAogICAgICAgIC8vIG9yIDAzMDQgb3IgMDJDOQogICAgICAgIGJyZXZlOiBbJ0FjY2VudCcsICIwMkQ4Il0sCiAgICAgICAgLy8gb3IgMDMwNgogICAgICAgIGNoZWNrOiBbJ0FjY2VudCcsICIwMkM3Il0sCiAgICAgICAgLy8gb3IgMDMwQwogICAgICAgIGhhdDogWydBY2NlbnQnLCAiMDA1RSJdLAogICAgICAgIC8vIG9yIDAzMDIgb3IgMDJDNgogICAgICAgIHZlYzogWydBY2NlbnQnLCAiMjE5MiJdLAogICAgICAgIC8vIG9yIDIwRDcKICAgICAgICBkb3Q6IFsnQWNjZW50JywgIjAyRDkiXSwKICAgICAgICAvLyBvciAwMzA3CiAgICAgICAgd2lkZXRpbGRlOiBbJ0FjY2VudCcsICIwMDdFIiwgMV0sCiAgICAgICAgLy8gb3IgMDMwMyBvciAwMkRDCiAgICAgICAgd2lkZWhhdDogWydBY2NlbnQnLCAiMDA1RSIsIDFdLAogICAgICAgIC8vIG9yIDAzMDIgb3IgMDJDNgogICAgICAgIG1hdHJpeDogJ01hdHJpeCcsCiAgICAgICAgYXJyYXk6ICdNYXRyaXgnLAogICAgICAgIHBtYXRyaXg6IFsnTWF0cml4JywgJygnLCAnKSddLAogICAgICAgIGNhc2VzOiBbJ01hdHJpeCcsICd7JywgJycsICJsZWZ0IGxlZnQiLCBudWxsLCAiLjFlbSIsIG51bGwsIHRydWVdLAogICAgICAgIGVxYWxpZ246IFsnTWF0cml4JywgbnVsbCwgbnVsbCwgInJpZ2h0IGxlZnQiLCBNTUwuTEVOR1RILlRISUNLTUFUSFNQQUNFLCAiLjVlbSIsICdEJ10sCiAgICAgICAgZGlzcGxheWxpbmVzOiBbJ01hdHJpeCcsIG51bGwsIG51bGwsICJjZW50ZXIiLCBudWxsLCAiLjVlbSIsICdEJ10sCiAgICAgICAgY3I6ICdDcicsCiAgICAgICAgJ1xcJzogJ0NyTGFUZVgnLAogICAgICAgIG5ld2xpbmU6ICdDcicsCiAgICAgICAgaGxpbmU6IFsnSExpbmUnLCAnc29saWQnXSwKICAgICAgICBoZGFzaGxpbmU6IFsnSExpbmUnLCAnZGFzaGVkJ10sCiAgICAgICAgLy8gICAgICBub2FsaWduOiAgICAgICAgICAgICdIYW5kbGVOb0FsaWduJywKICAgICAgICBlcWFsaWdubm86IFsnTWF0cml4JywgbnVsbCwgbnVsbCwgInJpZ2h0IGxlZnQiLCBNTUwuTEVOR1RILlRISUNLTUFUSFNQQUNFLCAiLjVlbSIsICdEJywgbnVsbCwgInJpZ2h0Il0sCiAgICAgICAgbGVxYWxpZ25ubzogWydNYXRyaXgnLCBudWxsLCBudWxsLCAicmlnaHQgbGVmdCIsIE1NTC5MRU5HVEguVEhJQ0tNQVRIU1BBQ0UsICIuNWVtIiwgJ0QnLCBudWxsLCAibGVmdCJdLAogICAgICAgIGhmaWxsOiAnSEZpbGwnLAogICAgICAgIGhmaWw6ICdIRmlsbCcsCiAgICAgICAgLy8gXGhmaWwgdHJlYXRlZCBhcyBcaGZpbGwgZm9yIG5vdwogICAgICAgIGhmaWxsbDogJ0hGaWxsJywKICAgICAgICAvLyBcaGZpbGxsIHRyZWF0ZWQgYXMgXGhmaWxsIGZvciBub3cKICAgICAgICAvLyAgVGVYIHN1YnN0aXR1dGlvbiBtYWNyb3MKICAgICAgICBibW9kOiBbJ01hY3JvJywgJ1xcbW1sVG9rZW57bW99W2xzcGFjZT0idGhpY2ttYXRoc3BhY2UiIHJzcGFjZT0idGhpY2ttYXRoc3BhY2UiXXttb2R9J10sCiAgICAgICAgcG1vZDogWydNYWNybycsICdcXHBvZHtcXG1tbFRva2Vue21pfXttb2R9XFxrZXJuIDZtdSAjMX0nLCAxXSwKICAgICAgICBtb2Q6IFsnTWFjcm8nLCAnXFxtYXRoY2hvaWNle1xca2VybjE4bXV9e1xca2VybjEybXV9e1xca2VybjEybXV9e1xca2VybjEybXV9XFxtbWxUb2tlbnttaX17bW9kfVxcLFxcLCMxJywgMV0sCiAgICAgICAgcG9kOiBbJ01hY3JvJywgJ1xcbWF0aGNob2ljZXtcXGtlcm4xOG11fXtcXGtlcm44bXV9e1xca2VybjhtdX17XFxrZXJuOG11fSgjMSknLCAxXSwKICAgICAgICBpZmY6IFsnTWFjcm8nLCAnXFw7XFxMb25nbGVmdHJpZ2h0YXJyb3dcXDsnXSwKICAgICAgICBza2V3OiBbJ01hY3JvJywgJ3t7IzJ7IzNcXG1rZXJuIzFtdX1cXG1rZXJuLSMxbXV9e319JywgM10sCiAgICAgICAgbWF0aGNhbDogWydNYWNybycsICd7XFxjYWwgIzF9JywgMV0sCiAgICAgICAgbWF0aHNjcjogWydNYWNybycsICd7XFxzY3IgIzF9JywgMV0sCiAgICAgICAgbWF0aHJtOiBbJ01hY3JvJywgJ3tcXHJtICMxfScsIDFdLAogICAgICAgIG1hdGhiZjogWydNYWNybycsICd7XFxiZiAjMX0nLCAxXSwKICAgICAgICBtYXRoYmI6IFsnTWFjcm8nLCAne1xcYmJGb250ICMxfScsIDFdLAogICAgICAgIEJiYjogWydNYWNybycsICd7XFxiYkZvbnQgIzF9JywgMV0sCiAgICAgICAgbWF0aGl0OiBbJ01hY3JvJywgJ3tcXGl0ICMxfScsIDFdLAogICAgICAgIG1hdGhmcmFrOiBbJ01hY3JvJywgJ3tcXGZyYWsgIzF9JywgMV0sCiAgICAgICAgbWF0aHNmOiBbJ01hY3JvJywgJ3tcXHNmICMxfScsIDFdLAogICAgICAgIG1hdGh0dDogWydNYWNybycsICd7XFx0dCAjMX0nLCAxXSwKICAgICAgICB0ZXh0cm06IFsnTWFjcm8nLCAnXFxtYXRob3Jke1xccm1cXHRleHR7IzF9fScsIDFdLAogICAgICAgIHRleHRpdDogWydNYWNybycsICdcXG1hdGhvcmR7XFxpdFxcdGV4dHsjMX19JywgMV0sCiAgICAgICAgdGV4dGJmOiBbJ01hY3JvJywgJ1xcbWF0aG9yZHtcXGJmXFx0ZXh0eyMxfX0nLCAxXSwKICAgICAgICB0ZXh0c2Y6IFsnTWFjcm8nLCAnXFxtYXRob3Jke1xcc2ZcXHRleHR7IzF9fScsIDFdLAogICAgICAgIHRleHR0dDogWydNYWNybycsICdcXG1hdGhvcmR7XFx0dFxcdGV4dHsjMX19JywgMV0sCiAgICAgICAgcG1iOiBbJ01hY3JvJywgJ1xccmxhcHsjMX1cXGtlcm4xcHh7IzF9JywgMV0sCiAgICAgICAgVGVYOiBbJ01hY3JvJywgJ1RcXGtlcm4tLjE0ZW1cXGxvd2VyLjVleHtFfVxca2Vybi0uMTE1ZW0gWCddLAogICAgICAgIExhVGVYOiBbJ01hY3JvJywgJ0xcXGtlcm4tLjMyNWVtXFxyYWlzZS4yMWVte1xcc2NyaXB0c3R5bGV7QX19XFxrZXJuLS4xN2VtXFxUZVgnXSwKICAgICAgICAnICc6IFsnTWFjcm8nLCAnXFx0ZXh0eyB9J10sCiAgICAgICAgLy8gIFNwZWNpYWxseSBoYW5kbGVkCiAgICAgICAgbm90OiAnTm90JywKICAgICAgICBkb3RzOiAnRG90cycsCiAgICAgICAgc3BhY2U6ICdUaWxkZScsCiAgICAgICAgIlx4QTAiOiAnVGlsZGUnLAogICAgICAgIC8vICBMYVRlWAogICAgICAgIGJlZ2luOiAnQmVnaW5FbmQnLAogICAgICAgIGVuZDogJ0JlZ2luRW5kJywKICAgICAgICBuZXdjb21tYW5kOiBbJ0V4dGVuc2lvbicsICduZXdjb21tYW5kJ10sCiAgICAgICAgcmVuZXdjb21tYW5kOiBbJ0V4dGVuc2lvbicsICduZXdjb21tYW5kJ10sCiAgICAgICAgbmV3ZW52aXJvbm1lbnQ6IFsnRXh0ZW5zaW9uJywgJ25ld2NvbW1hbmQnXSwKICAgICAgICByZW5ld2Vudmlyb25tZW50OiBbJ0V4dGVuc2lvbicsICduZXdjb21tYW5kJ10sCiAgICAgICAgZGVmOiBbJ0V4dGVuc2lvbicsICduZXdjb21tYW5kJ10sCiAgICAgICAgbGV0OiBbJ0V4dGVuc2lvbicsICduZXdjb21tYW5kJ10sCiAgICAgICAgdmVyYjogWydFeHRlbnNpb24nLCAndmVyYiddLAogICAgICAgIGJvbGRzeW1ib2w6IFsnRXh0ZW5zaW9uJywgJ2JvbGRzeW1ib2wnXSwKICAgICAgICB0YWc6IFsnRXh0ZW5zaW9uJywgJ0FNU21hdGgnXSwKICAgICAgICBub3RhZzogWydFeHRlbnNpb24nLCAnQU1TbWF0aCddLAogICAgICAgIGxhYmVsOiBbJ0V4dGVuc2lvbicsICdBTVNtYXRoJ10sCiAgICAgICAgcmVmOiBbJ0V4dGVuc2lvbicsICdBTVNtYXRoJ10sCiAgICAgICAgZXFyZWY6IFsnRXh0ZW5zaW9uJywgJ0FNU21hdGgnXSwKICAgICAgICBub251bWJlcjogWydNYWNybycsICdcXG5vdGFnJ10sCiAgICAgICAgLy8gIEV4dGVuc2lvbnMgdG8gVGVYCiAgICAgICAgdW5pY29kZTogWydFeHRlbnNpb24nLCAndW5pY29kZSddLAogICAgICAgIGNvbG9yOiAnQ29sb3InLAogICAgICAgIGhyZWY6IFsnRXh0ZW5zaW9uJywgJ0hUTUwnXSwKICAgICAgICAnY2xhc3MnOiBbJ0V4dGVuc2lvbicsICdIVE1MJ10sCiAgICAgICAgc3R5bGU6IFsnRXh0ZW5zaW9uJywgJ0hUTUwnXSwKICAgICAgICBjc3NJZDogWydFeHRlbnNpb24nLCAnSFRNTCddLAogICAgICAgIGJib3g6IFsnRXh0ZW5zaW9uJywgJ2Jib3gnXSwKICAgICAgICBtbWxUb2tlbjogJ01tbFRva2VuJywKICAgICAgICByZXF1aXJlOiAnUmVxdWlyZScKICAgICAgfSwKICAgICAgZW52aXJvbm1lbnQ6IHsKICAgICAgICBhcnJheTogWydBbGlnbmVkQXJyYXknXSwKICAgICAgICBtYXRyaXg6IFsnQXJyYXknLCBudWxsLCBudWxsLCBudWxsLCAnYyddLAogICAgICAgIHBtYXRyaXg6IFsnQXJyYXknLCBudWxsLCAnKCcsICcpJywgJ2MnXSwKICAgICAgICBibWF0cml4OiBbJ0FycmF5JywgbnVsbCwgJ1snLCAnXScsICdjJ10sCiAgICAgICAgQm1hdHJpeDogWydBcnJheScsIG51bGwsICdcXHsnLCAnXFx9JywgJ2MnXSwKICAgICAgICB2bWF0cml4OiBbJ0FycmF5JywgbnVsbCwgJ1xcdmVydCcsICdcXHZlcnQnLCAnYyddLAogICAgICAgIFZtYXRyaXg6IFsnQXJyYXknLCBudWxsLCAnXFxWZXJ0JywgJ1xcVmVydCcsICdjJ10sCiAgICAgICAgY2FzZXM6IFsnQXJyYXknLCBudWxsLCAnXFx7JywgJy4nLCAnbGwnLCBudWxsLCAiLjJlbSIsICdUJ10sCiAgICAgICAgZXF1YXRpb246IFtudWxsLCAnRXF1YXRpb24nXSwKICAgICAgICAnZXF1YXRpb24qJzogW251bGwsICdFcXVhdGlvbiddLAogICAgICAgIGVxbmFycmF5OiBbJ0V4dGVuc2lvbkVudicsIG51bGwsICdBTVNtYXRoJ10sCiAgICAgICAgJ2VxbmFycmF5Kic6IFsnRXh0ZW5zaW9uRW52JywgbnVsbCwgJ0FNU21hdGgnXSwKICAgICAgICBhbGlnbjogWydFeHRlbnNpb25FbnYnLCBudWxsLCAnQU1TbWF0aCddLAogICAgICAgICdhbGlnbionOiBbJ0V4dGVuc2lvbkVudicsIG51bGwsICdBTVNtYXRoJ10sCiAgICAgICAgYWxpZ25lZDogWydFeHRlbnNpb25FbnYnLCBudWxsLCAnQU1TbWF0aCddLAogICAgICAgIG11bHRsaW5lOiBbJ0V4dGVuc2lvbkVudicsIG51bGwsICdBTVNtYXRoJ10sCiAgICAgICAgJ211bHRsaW5lKic6IFsnRXh0ZW5zaW9uRW52JywgbnVsbCwgJ0FNU21hdGgnXSwKICAgICAgICBzcGxpdDogWydFeHRlbnNpb25FbnYnLCBudWxsLCAnQU1TbWF0aCddLAogICAgICAgIGdhdGhlcjogWydFeHRlbnNpb25FbnYnLCBudWxsLCAnQU1TbWF0aCddLAogICAgICAgICdnYXRoZXIqJzogWydFeHRlbnNpb25FbnYnLCBudWxsLCAnQU1TbWF0aCddLAogICAgICAgIGdhdGhlcmVkOiBbJ0V4dGVuc2lvbkVudicsIG51bGwsICdBTVNtYXRoJ10sCiAgICAgICAgYWxpZ25hdDogWydFeHRlbnNpb25FbnYnLCBudWxsLCAnQU1TbWF0aCddLAogICAgICAgICdhbGlnbmF0Kic6IFsnRXh0ZW5zaW9uRW52JywgbnVsbCwgJ0FNU21hdGgnXSwKICAgICAgICBhbGlnbmVkYXQ6IFsnRXh0ZW5zaW9uRW52JywgbnVsbCwgJ0FNU21hdGgnXQogICAgICB9LAogICAgICBwX2hlaWdodDogMS4yIC8gLjg1IC8vIGNtZXgxMCBoZWlnaHQgcGx1cyBkZXB0aCBvdmVyIC44NQoKICAgIH0pOyAvLwogICAgLy8gIEFkZCBtYWNyb3MgZGVmaW5lZCBpbiB0aGUgY29uZmlndXJhdGlvbgogICAgLy8KCiAgICBpZiAodGhpcy5jb25maWcuTWFjcm9zKSB7CiAgICAgIHZhciBNQUNST1MgPSB0aGlzLmNvbmZpZy5NYWNyb3M7CgogICAgICBmb3IgKHZhciBpZCBpbiBNQUNST1MpIHsKICAgICAgICBpZiAoTUFDUk9TLmhhc093blByb3BlcnR5KGlkKSkgewogICAgICAgICAgaWYgKHR5cGVvZiBNQUNST1NbaWRdID09PSAic3RyaW5nIikgewogICAgICAgICAgICBURVhERUYubWFjcm9zW2lkXSA9IFsnTWFjcm8nLCBNQUNST1NbaWRdXTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFRFWERFRi5tYWNyb3NbaWRdID0gWyJNYWNybyJdLmNvbmNhdChNQUNST1NbaWRdKTsKICAgICAgICAgIH0KCiAgICAgICAgICBURVhERUYubWFjcm9zW2lkXS5pc1VzZXIgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCiAgLyoKICAgKiAgIFRoZSBUZVggUGFyc2VyCiAgICovCgoKICB2YXIgUEFSU0UgPSBNYXRoSmF4Lk9iamVjdC5TdWJjbGFzcyh7CiAgICBJbml0OiBmdW5jdGlvbiBJbml0KHN0cmluZywgZW52KSB7CiAgICAgIHRoaXMuc3RyaW5nID0gc3RyaW5nOwogICAgICB0aGlzLmkgPSAwOwogICAgICB0aGlzLm1hY3JvQ291bnQgPSAwOwogICAgICB2YXIgRU5WOwoKICAgICAgaWYgKGVudikgewogICAgICAgIEVOViA9IHt9OwoKICAgICAgICBmb3IgKHZhciBpZCBpbiBlbnYpIHsKICAgICAgICAgIGlmIChlbnYuaGFzT3duUHJvcGVydHkoaWQpKSB7CiAgICAgICAgICAgIEVOVltpZF0gPSBlbnZbaWRdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5zdGFjayA9IFRFWC5TdGFjayhFTlYsICEhZW52KTsKICAgICAgdGhpcy5QYXJzZSgpOwogICAgICB0aGlzLlB1c2goU1RBQ0tJVEVNLnN0b3AoKSk7CiAgICB9LAogICAgUGFyc2U6IGZ1bmN0aW9uIFBhcnNlKCkgewogICAgICB2YXIgYywgbjsKCiAgICAgIHdoaWxlICh0aGlzLmkgPCB0aGlzLnN0cmluZy5sZW5ndGgpIHsKICAgICAgICBjID0gdGhpcy5zdHJpbmcuY2hhckF0KHRoaXMuaSsrKTsKICAgICAgICBuID0gYy5jaGFyQ29kZUF0KDApOwoKICAgICAgICBpZiAobiA+PSAweEQ4MDAgJiYgbiA8IDB4REMwMCkgewogICAgICAgICAgYyArPSB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5pKyspOwogICAgICAgIH0KCiAgICAgICAgaWYgKFRFWERFRi5zcGVjaWFsW2NdKSB7CiAgICAgICAgICB0aGlzW1RFWERFRi5zcGVjaWFsW2NdXShjKTsKICAgICAgICB9IGVsc2UgaWYgKFRFWERFRi5sZXR0ZXIudGVzdChjKSkgewogICAgICAgICAgdGhpcy5WYXJpYWJsZShjKTsKICAgICAgICB9IGVsc2UgaWYgKFRFWERFRi5kaWdpdC50ZXN0KGMpKSB7CiAgICAgICAgICB0aGlzLk51bWJlcihjKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5PdGhlcihjKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBQdXNoOiBmdW5jdGlvbiBQdXNoKCkgewogICAgICB0aGlzLnN0YWNrLlB1c2guYXBwbHkodGhpcy5zdGFjaywgYXJndW1lbnRzKTsKICAgIH0sCiAgICBtbWw6IGZ1bmN0aW9uIG1tbCgpIHsKICAgICAgaWYgKHRoaXMuc3RhY2suVG9wKCkudHlwZSAhPT0gIm1tbCIpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuc3RhY2suVG9wKCkuZGF0YVswXTsKICAgIH0sCiAgICBtbWxUb2tlbjogZnVuY3Rpb24gbW1sVG9rZW4odG9rZW4pIHsKICAgICAgcmV0dXJuIHRva2VuOwogICAgfSwKICAgIC8vIHVzZWQgYnkgYm9sZHN5bWJvbCBleHRlbnNpb24KCiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKICAgIC8qCiAgICAgKiAgIEhhbmRsZSB2YXJpb3VzIHRva2VuIGNsYXNzZXMKICAgICAqLwoKICAgIC8qCiAgICAgKiAgTG9va3VwIGEgY29udHJvbC1zZXF1ZW5jZSBhbmQgcHJvY2VzcyBpdAogICAgICovCiAgICBDb250cm9sU2VxdWVuY2U6IGZ1bmN0aW9uIENvbnRyb2xTZXF1ZW5jZShjKSB7CiAgICAgIHZhciBuYW1lID0gdGhpcy5HZXRDUygpLAogICAgICAgICAgbWFjcm8gPSB0aGlzLmNzRmluZE1hY3JvKG5hbWUpOwoKICAgICAgaWYgKG1hY3JvKSB7CiAgICAgICAgaWYgKCEobWFjcm8gaW5zdGFuY2VvZiBBcnJheSkpIHsKICAgICAgICAgIG1hY3JvID0gW21hY3JvXTsKICAgICAgICB9CgogICAgICAgIHZhciBmbiA9IG1hY3JvWzBdOwoKICAgICAgICBpZiAoIShmbiBpbnN0YW5jZW9mIEZ1bmN0aW9uKSkgewogICAgICAgICAgZm4gPSB0aGlzW2ZuXTsKICAgICAgICB9CgogICAgICAgIGZuLmFwcGx5KHRoaXMsIFtjICsgbmFtZV0uY29uY2F0KG1hY3JvLnNsaWNlKDEpKSk7CiAgICAgIH0gZWxzZSBpZiAoVEVYREVGLm1hdGhjaGFyMG1pW25hbWVdKSB7CiAgICAgICAgdGhpcy5jc01hdGhjaGFyMG1pKG5hbWUsIFRFWERFRi5tYXRoY2hhcjBtaVtuYW1lXSk7CiAgICAgIH0gZWxzZSBpZiAoVEVYREVGLm1hdGhjaGFyMG1vW25hbWVdKSB7CiAgICAgICAgdGhpcy5jc01hdGhjaGFyMG1vKG5hbWUsIFRFWERFRi5tYXRoY2hhcjBtb1tuYW1lXSk7CiAgICAgIH0gZWxzZSBpZiAoVEVYREVGLm1hdGhjaGFyN1tuYW1lXSkgewogICAgICAgIHRoaXMuY3NNYXRoY2hhcjcobmFtZSwgVEVYREVGLm1hdGhjaGFyN1tuYW1lXSk7CiAgICAgIH0gZWxzZSBpZiAoVEVYREVGLmRlbGltaXRlclsiXFwiICsgbmFtZV0gIT0gbnVsbCkgewogICAgICAgIHRoaXMuY3NEZWxpbWl0ZXIobmFtZSwgVEVYREVGLmRlbGltaXRlclsiXFwiICsgbmFtZV0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY3NVbmRlZmluZWQoYyArIG5hbWUpOwogICAgICB9CiAgICB9LAogICAgLy8KICAgIC8vICBMb29rIHVwIGEgbWFjcm8gaW4gdGhlIG1hY3JvcyBsaXN0CiAgICAvLyAgKG92ZXJyaWRkZW4gaW4gYmVnaW5ncm91cCBleHRlbnNpb24pCiAgICAvLwogICAgY3NGaW5kTWFjcm86IGZ1bmN0aW9uIGNzRmluZE1hY3JvKG5hbWUpIHsKICAgICAgcmV0dXJuIFRFWERFRi5tYWNyb3NbbmFtZV07CiAgICB9LAogICAgLy8KICAgIC8vICBIYW5kbGUgbm9ybWFsIG1hdGhjaGFyIChhcyBhbiBtaSkKICAgIC8vCiAgICBjc01hdGhjaGFyMG1pOiBmdW5jdGlvbiBjc01hdGhjaGFyMG1pKG5hbWUsIG1jaGFyKSB7CiAgICAgIHZhciBkZWYgPSB7CiAgICAgICAgbWF0aHZhcmlhbnQ6IE1NTC5WQVJJQU5ULklUQUxJQwogICAgICB9OwoKICAgICAgaWYgKG1jaGFyIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICBkZWYgPSBtY2hhclsxXTsKICAgICAgICBtY2hhciA9IG1jaGFyWzBdOwogICAgICB9CgogICAgICB0aGlzLlB1c2godGhpcy5tbWxUb2tlbihNTUwubWkoTU1MLmVudGl0eSgiI3giICsgbWNoYXIpKS5XaXRoKGRlZikpKTsKICAgIH0sCiAgICAvLwogICAgLy8gIEhhbmRsZSBub3JtYWwgbWF0aGNoYXIgKGFzIGFuIG1vKQogICAgLy8KICAgIGNzTWF0aGNoYXIwbW86IGZ1bmN0aW9uIGNzTWF0aGNoYXIwbW8obmFtZSwgbWNoYXIpIHsKICAgICAgdmFyIGRlZiA9IHsKICAgICAgICBzdHJldGNoeTogZmFsc2UKICAgICAgfTsKCiAgICAgIGlmIChtY2hhciBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgZGVmID0gbWNoYXJbMV07CiAgICAgICAgZGVmLnN0cmV0Y2h5ID0gZmFsc2U7CiAgICAgICAgbWNoYXIgPSBtY2hhclswXTsKICAgICAgfQoKICAgICAgdGhpcy5QdXNoKHRoaXMubW1sVG9rZW4oTU1MLm1vKE1NTC5lbnRpdHkoIiN4IiArIG1jaGFyKSkuV2l0aChkZWYpKSk7CiAgICB9LAogICAgLy8KICAgIC8vICBIYW5kbGUgbWF0aGNoYXIgaW4gY3VycmVudCBmYW1pbHkKICAgIC8vCiAgICBjc01hdGhjaGFyNzogZnVuY3Rpb24gY3NNYXRoY2hhcjcobmFtZSwgbWNoYXIpIHsKICAgICAgdmFyIGRlZiA9IHsKICAgICAgICBtYXRodmFyaWFudDogTU1MLlZBUklBTlQuTk9STUFMCiAgICAgIH07CgogICAgICBpZiAobWNoYXIgaW5zdGFuY2VvZiBBcnJheSkgewogICAgICAgIGRlZiA9IG1jaGFyWzFdOwogICAgICAgIG1jaGFyID0gbWNoYXJbMF07CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnN0YWNrLmVudi5mb250KSB7CiAgICAgICAgZGVmLm1hdGh2YXJpYW50ID0gdGhpcy5zdGFjay5lbnYuZm9udDsKICAgICAgfQoKICAgICAgdGhpcy5QdXNoKHRoaXMubW1sVG9rZW4oTU1MLm1pKE1NTC5lbnRpdHkoIiN4IiArIG1jaGFyKSkuV2l0aChkZWYpKSk7CiAgICB9LAogICAgLy8KICAgIC8vICBIYW5kbGUgZGVsaW1pdGVyCiAgICAvLwogICAgY3NEZWxpbWl0ZXI6IGZ1bmN0aW9uIGNzRGVsaW1pdGVyKG5hbWUsIGRlbGltKSB7CiAgICAgIHZhciBkZWYgPSB7fTsKCiAgICAgIGlmIChkZWxpbSBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgZGVmID0gZGVsaW1bMV07CiAgICAgICAgZGVsaW0gPSBkZWxpbVswXTsKICAgICAgfQoKICAgICAgaWYgKGRlbGltLmxlbmd0aCA9PT0gNCkgewogICAgICAgIGRlbGltID0gTU1MLmVudGl0eSgnI3gnICsgZGVsaW0pOwogICAgICB9IGVsc2UgewogICAgICAgIGRlbGltID0gTU1MLmNoYXJzKGRlbGltKTsKICAgICAgfQoKICAgICAgdGhpcy5QdXNoKHRoaXMubW1sVG9rZW4oTU1MLm1vKGRlbGltKS5XaXRoKHsKICAgICAgICBmZW5jZTogZmFsc2UsCiAgICAgICAgc3RyZXRjaHk6IGZhbHNlCiAgICAgIH0pLldpdGgoZGVmKSkpOwogICAgfSwKICAgIC8vCiAgICAvLyAgSGFuZGxlIHVuZGVmaW5lZCBjb250cm9sIHNlcXVlbmNlCiAgICAvLyAgKG92ZXJyaWRkZW4gaW4gbm9VbmRlZmluZWQgZXh0ZW5zaW9uKQogICAgLy8KICAgIGNzVW5kZWZpbmVkOiBmdW5jdGlvbiBjc1VuZGVmaW5lZChuYW1lKSB7CiAgICAgIFRFWC5FcnJvcihbIlVuZGVmaW5lZENvbnRyb2xTZXF1ZW5jZSIsICJVbmRlZmluZWQgY29udHJvbCBzZXF1ZW5jZSAlMSIsIG5hbWVdKTsKICAgIH0sCgogICAgLyoKICAgICAqICBIYW5kbGUgYSB2YXJpYWJsZSAoYSBzaW5nbGUgbGV0dGVyKQogICAgICovCiAgICBWYXJpYWJsZTogZnVuY3Rpb24gVmFyaWFibGUoYykgewogICAgICB2YXIgZGVmID0ge307CgogICAgICBpZiAodGhpcy5zdGFjay5lbnYuZm9udCkgewogICAgICAgIGRlZi5tYXRodmFyaWFudCA9IHRoaXMuc3RhY2suZW52LmZvbnQ7CiAgICAgIH0KCiAgICAgIHRoaXMuUHVzaCh0aGlzLm1tbFRva2VuKE1NTC5taShNTUwuY2hhcnMoYykpLldpdGgoZGVmKSkpOwogICAgfSwKCiAgICAvKgogICAgICogIERldGVybWluZSB0aGUgZXh0ZW50IG9mIGEgbnVtYmVyIChwYXR0ZXJuIG1heSBuZWVkIHdvcmspCiAgICAgKi8KICAgIE51bWJlcjogZnVuY3Rpb24gTnVtYmVyKGMpIHsKICAgICAgdmFyIG1tbCwKICAgICAgICAgIG4gPSB0aGlzLnN0cmluZy5zbGljZSh0aGlzLmkgLSAxKS5tYXRjaChURVhERUYubnVtYmVyKTsKCiAgICAgIGlmIChuKSB7CiAgICAgICAgbW1sID0gTU1MLm1uKG5bMF0ucmVwbGFjZSgvW3t9XS9nLCAiIikpOwogICAgICAgIHRoaXMuaSArPSBuWzBdLmxlbmd0aCAtIDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbW1sID0gTU1MLm1vKE1NTC5jaGFycyhjKSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnN0YWNrLmVudi5mb250KSB7CiAgICAgICAgbW1sLm1hdGh2YXJpYW50ID0gdGhpcy5zdGFjay5lbnYuZm9udDsKICAgICAgfQoKICAgICAgdGhpcy5QdXNoKHRoaXMubW1sVG9rZW4obW1sKSk7CiAgICB9LAoKICAgIC8qCiAgICAgKiAgSGFuZGxlIHsgYW5kIH0KICAgICAqLwogICAgT3BlbjogZnVuY3Rpb24gT3BlbihjKSB7CiAgICAgIHRoaXMuUHVzaChTVEFDS0lURU0ub3BlbigpKTsKICAgIH0sCiAgICBDbG9zZTogZnVuY3Rpb24gQ2xvc2UoYykgewogICAgICB0aGlzLlB1c2goU1RBQ0tJVEVNLmNsb3NlKCkpOwogICAgfSwKCiAgICAvKgogICAgICogIEhhbmRsZSB0aWxkZSBhbmQgc3BhY2VzCiAgICAgKi8KICAgIFRpbGRlOiBmdW5jdGlvbiBUaWxkZShjKSB7CiAgICAgIHRoaXMuUHVzaChNTUwubXRleHQoTU1MLmNoYXJzKE5CU1ApKSk7CiAgICB9LAogICAgU3BhY2U6IGZ1bmN0aW9uIFNwYWNlKGMpIHt9LAoKICAgIC8qCiAgICAgKiAgSGFuZGxlIF4sIF8sIGFuZCAnCiAgICAgKi8KICAgIFN1cGVyc2NyaXB0OiBmdW5jdGlvbiBTdXBlcnNjcmlwdChjKSB7CiAgICAgIGlmICh0aGlzLkdldE5leHQoKS5tYXRjaCgvXGQvKSkgLy8gZG9uJ3QgdHJlYXQgbnVtYmVycyBhcyBhIHVuaXQKICAgICAgICB7CiAgICAgICAgICB0aGlzLnN0cmluZyA9IHRoaXMuc3RyaW5nLnN1YnN0cigwLCB0aGlzLmkgKyAxKSArICIgIiArIHRoaXMuc3RyaW5nLnN1YnN0cih0aGlzLmkgKyAxKTsKICAgICAgICB9CgogICAgICB2YXIgcHJpbWVzLAogICAgICAgICAgYmFzZSwKICAgICAgICAgIHRvcCA9IHRoaXMuc3RhY2suVG9wKCk7CgogICAgICBpZiAodG9wLnR5cGUgPT09ICJwcmltZSIpIHsKICAgICAgICBiYXNlID0gdG9wLmRhdGFbMF07CiAgICAgICAgcHJpbWVzID0gdG9wLmRhdGFbMV07CiAgICAgICAgdGhpcy5zdGFjay5Qb3AoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBiYXNlID0gdGhpcy5zdGFjay5QcmV2KCk7CgogICAgICAgIGlmICghYmFzZSkgewogICAgICAgICAgYmFzZSA9IE1NTC5taSgiIik7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoYmFzZS5pc0VtYmVsbGlzaGVkV3JhcHBlcikgewogICAgICAgIGJhc2UgPSBiYXNlLmRhdGFbMF0uZGF0YVswXTsKICAgICAgfQoKICAgICAgdmFyIG1vdmVzdXBzdWIgPSBiYXNlLm1vdmVzdXBzdWIsCiAgICAgICAgICBwb3NpdGlvbiA9IGJhc2Uuc3VwOwoKICAgICAgaWYgKGJhc2UudHlwZSA9PT0gIm1zdWJzdXAiICYmIGJhc2UuZGF0YVtiYXNlLnN1cF0gfHwgYmFzZS50eXBlID09PSAibXVuZGVyb3ZlciIgJiYgYmFzZS5kYXRhW2Jhc2Uub3Zlcl0gJiYgIWJhc2Uuc3Vic3VwT0spIHsKICAgICAgICBURVguRXJyb3IoWyJEb3VibGVFeHBvbmVudCIsICJEb3VibGUgZXhwb25lbnQ6IHVzZSBicmFjZXMgdG8gY2xhcmlmeSJdKTsKICAgICAgfQoKICAgICAgaWYgKGJhc2UudHlwZSAhPT0gIm1zdWJzdXAiKSB7CiAgICAgICAgaWYgKG1vdmVzdXBzdWIpIHsKICAgICAgICAgIGlmIChiYXNlLnR5cGUgIT09ICJtdW5kZXJvdmVyIiB8fCBiYXNlLmRhdGFbYmFzZS5vdmVyXSkgewogICAgICAgICAgICBpZiAoYmFzZS5tb3ZhYmxlbGltaXRzICYmIGJhc2UuaXNhKE1NTC5taSkpIHsKICAgICAgICAgICAgICBiYXNlID0gdGhpcy5taTJtbyhiYXNlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYmFzZSA9IE1NTC5tdW5kZXJvdmVyKGJhc2UsIG51bGwsIG51bGwpLldpdGgoewogICAgICAgICAgICAgIG1vdmVzdXBzdWI6IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgcG9zaXRpb24gPSBiYXNlLm92ZXI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGJhc2UgPSBNTUwubXN1YnN1cChiYXNlLCBudWxsLCBudWxsKTsKICAgICAgICAgIHBvc2l0aW9uID0gYmFzZS5zdXA7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLlB1c2goU1RBQ0tJVEVNLnN1YnN1cChiYXNlKS5XaXRoKHsKICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sCiAgICAgICAgcHJpbWVzOiBwcmltZXMsCiAgICAgICAgbW92ZXN1cHN1YjogbW92ZXN1cHN1YgogICAgICB9KSk7CiAgICB9LAogICAgU3Vic2NyaXB0OiBmdW5jdGlvbiBTdWJzY3JpcHQoYykgewogICAgICBpZiAodGhpcy5HZXROZXh0KCkubWF0Y2goL1xkLykpIC8vIGRvbid0IHRyZWF0IG51bWJlcnMgYXMgYSB1bml0CiAgICAgICAgewogICAgICAgICAgdGhpcy5zdHJpbmcgPSB0aGlzLnN0cmluZy5zdWJzdHIoMCwgdGhpcy5pICsgMSkgKyAiICIgKyB0aGlzLnN0cmluZy5zdWJzdHIodGhpcy5pICsgMSk7CiAgICAgICAgfQoKICAgICAgdmFyIHByaW1lcywKICAgICAgICAgIGJhc2UsCiAgICAgICAgICB0b3AgPSB0aGlzLnN0YWNrLlRvcCgpOwoKICAgICAgaWYgKHRvcC50eXBlID09PSAicHJpbWUiKSB7CiAgICAgICAgYmFzZSA9IHRvcC5kYXRhWzBdOwogICAgICAgIHByaW1lcyA9IHRvcC5kYXRhWzFdOwogICAgICAgIHRoaXMuc3RhY2suUG9wKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYmFzZSA9IHRoaXMuc3RhY2suUHJldigpOwoKICAgICAgICBpZiAoIWJhc2UpIHsKICAgICAgICAgIGJhc2UgPSBNTUwubWkoIiIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKGJhc2UuaXNFbWJlbGxpc2hlZFdyYXBwZXIpIHsKICAgICAgICBiYXNlID0gYmFzZS5kYXRhWzBdLmRhdGFbMF07CiAgICAgIH0KCiAgICAgIHZhciBtb3Zlc3Vwc3ViID0gYmFzZS5tb3Zlc3Vwc3ViLAogICAgICAgICAgcG9zaXRpb24gPSBiYXNlLnN1YjsKCiAgICAgIGlmIChiYXNlLnR5cGUgPT09ICJtc3Vic3VwIiAmJiBiYXNlLmRhdGFbYmFzZS5zdWJdIHx8IGJhc2UudHlwZSA9PT0gIm11bmRlcm92ZXIiICYmIGJhc2UuZGF0YVtiYXNlLnVuZGVyXSAmJiAhYmFzZS5zdWJzdXBPSykgewogICAgICAgIFRFWC5FcnJvcihbIkRvdWJsZVN1YnNjcmlwdHMiLCAiRG91YmxlIHN1YnNjcmlwdHM6IHVzZSBicmFjZXMgdG8gY2xhcmlmeSJdKTsKICAgICAgfQoKICAgICAgaWYgKGJhc2UudHlwZSAhPT0gIm1zdWJzdXAiKSB7CiAgICAgICAgaWYgKG1vdmVzdXBzdWIpIHsKICAgICAgICAgIGlmIChiYXNlLnR5cGUgIT09ICJtdW5kZXJvdmVyIiB8fCBiYXNlLmRhdGFbYmFzZS51bmRlcl0pIHsKICAgICAgICAgICAgaWYgKGJhc2UubW92YWJsZWxpbWl0cyAmJiBiYXNlLmlzYShNTUwubWkpKSB7CiAgICAgICAgICAgICAgYmFzZSA9IHRoaXMubWkybW8oYmFzZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJhc2UgPSBNTUwubXVuZGVyb3ZlcihiYXNlLCBudWxsLCBudWxsKS5XaXRoKHsKICAgICAgICAgICAgICBtb3Zlc3Vwc3ViOiB0cnVlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIHBvc2l0aW9uID0gYmFzZS51bmRlcjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYmFzZSA9IE1NTC5tc3Vic3VwKGJhc2UsIG51bGwsIG51bGwpOwogICAgICAgICAgcG9zaXRpb24gPSBiYXNlLnN1YjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuUHVzaChTVEFDS0lURU0uc3Vic3VwKGJhc2UpLldpdGgoewogICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbiwKICAgICAgICBwcmltZXM6IHByaW1lcywKICAgICAgICBtb3Zlc3Vwc3ViOiBtb3Zlc3Vwc3ViCiAgICAgIH0pKTsKICAgIH0sCiAgICBQUklNRTogIlx1MjAzMiIsCiAgICBTTUFSVFFVT1RFOiAiXHUyMDE5IiwKICAgIFByaW1lOiBmdW5jdGlvbiBQcmltZShjKSB7CiAgICAgIHZhciBiYXNlID0gdGhpcy5zdGFjay5QcmV2KCk7CgogICAgICBpZiAoIWJhc2UpIHsKICAgICAgICBiYXNlID0gTU1MLm1pKCk7CiAgICAgIH0KCiAgICAgIGlmIChiYXNlLnR5cGUgPT09ICJtc3Vic3VwIiAmJiBiYXNlLmRhdGFbYmFzZS5zdXBdKSB7CiAgICAgICAgVEVYLkVycm9yKFsiRG91YmxlRXhwb25lbnRQcmltZSIsICJQcmltZSBjYXVzZXMgZG91YmxlIGV4cG9uZW50OiB1c2UgYnJhY2VzIHRvIGNsYXJpZnkiXSk7CiAgICAgIH0KCiAgICAgIHZhciBzdXAgPSAiIjsKICAgICAgdGhpcy5pLS07CgogICAgICBkbyB7CiAgICAgICAgc3VwICs9IHRoaXMuUFJJTUU7CiAgICAgICAgdGhpcy5pKyssIGMgPSB0aGlzLkdldE5leHQoKTsKICAgICAgfSB3aGlsZSAoYyA9PT0gIiciIHx8IGMgPT09IHRoaXMuU01BUlRRVU9URSk7CgogICAgICBzdXAgPSBbIiIsICJcdTIwMzIiLCAiXHUyMDMzIiwgIlx1MjAzNCIsICJcdTIwNTciXVtzdXAubGVuZ3RoXSB8fCBzdXA7CiAgICAgIHRoaXMuUHVzaChTVEFDS0lURU0ucHJpbWUoYmFzZSwgdGhpcy5tbWxUb2tlbihNTUwubW8oc3VwKSkpKTsKICAgIH0sCiAgICBtaTJtbzogZnVuY3Rpb24gbWkybW8obWkpIHsKICAgICAgdmFyIG1vID0gTU1MLm1vKCk7CiAgICAgIG1vLkFwcGVuZC5hcHBseShtbywgbWkuZGF0YSk7CiAgICAgIHZhciBpZDsKCiAgICAgIGZvciAoaWQgaW4gbW8uZGVmYXVsdHMpIHsKICAgICAgICBpZiAobW8uZGVmYXVsdHMuaGFzT3duUHJvcGVydHkoaWQpICYmIG1pW2lkXSAhPSBudWxsKSB7CiAgICAgICAgICBtb1tpZF0gPSBtaVtpZF07CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKGlkIGluIE1NTC5jb3B5QXR0cmlidXRlcykgewogICAgICAgIGlmIChNTUwuY29weUF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoaWQpICYmIG1pW2lkXSAhPSBudWxsKSB7CiAgICAgICAgICBtb1tpZF0gPSBtaVtpZF07CiAgICAgICAgfQogICAgICB9CgogICAgICBtby5sc3BhY2UgPSBtby5yc3BhY2UgPSAiMCI7IC8vIHByZXZlbnQgbW8gZnJvbSBoYXZpbmcgc3BhY2UgaW4gTmF0aXZlTU1MCgogICAgICBtby51c2VNTUxzcGFjaW5nICY9IH4obW8uU1BBQ0VfQVRUUi5sc3BhY2UgfCBtby5TUEFDRV9BVFRSLnJzcGFjZSk7IC8vIGRvbid0IGNvdW50IHRoZXNlIGV4cGxpY2l0IHNldHRpbmdzCgogICAgICByZXR1cm4gbW87CiAgICB9LAoKICAgIC8qCiAgICAgKiAgSGFuZGxlIGNvbW1lbnRzCiAgICAgKi8KICAgIENvbW1lbnQ6IGZ1bmN0aW9uIENvbW1lbnQoYykgewogICAgICB3aGlsZSAodGhpcy5pIDwgdGhpcy5zdHJpbmcubGVuZ3RoICYmIHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLmkpICE9ICJcbiIpIHsKICAgICAgICB0aGlzLmkrKzsKICAgICAgfQogICAgfSwKCiAgICAvKgogICAgICogIEhhbmRsZSBoYXNoIG1hcmtzIG91dHNpZGUgb2YgZGVmaW5pdGlvbnMKICAgICAqLwogICAgSGFzaDogZnVuY3Rpb24gSGFzaChjKSB7CiAgICAgIFRFWC5FcnJvcihbIkNhbnRVc2VIYXNoMSIsICJZb3UgY2FuJ3QgdXNlICdtYWNybyBwYXJhbWV0ZXIgY2hhcmFjdGVyICMnIGluIG1hdGggbW9kZSJdKTsKICAgIH0sCgogICAgLyoKICAgICAqICBIYW5kbGUgb3RoZXIgY2hhcmFjdGVycyAoYXMgPG1vPiBlbGVtZW50cykKICAgICAqLwogICAgT3RoZXI6IGZ1bmN0aW9uIE90aGVyKGMpIHsKICAgICAgdmFyIGRlZiwgbW87CgogICAgICBpZiAodGhpcy5zdGFjay5lbnYuZm9udCkgewogICAgICAgIGRlZiA9IHsKICAgICAgICAgIG1hdGh2YXJpYW50OiB0aGlzLnN0YWNrLmVudi5mb250CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgaWYgKFRFWERFRi5yZW1hcFtjXSkgewogICAgICAgIGMgPSBURVhERUYucmVtYXBbY107CgogICAgICAgIGlmIChjIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgIGRlZiA9IGNbMV07CiAgICAgICAgICBjID0gY1swXTsKICAgICAgICB9CgogICAgICAgIG1vID0gTU1MLm1vKE1NTC5lbnRpdHkoJyN4JyArIGMpKS5XaXRoKGRlZik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbW8gPSBNTUwubW8oYykuV2l0aChkZWYpOwogICAgICB9CgogICAgICBpZiAobW8uYXV0b0RlZmF1bHQoInN0cmV0Y2h5IiwgdHJ1ZSkpIHsKICAgICAgICBtby5zdHJldGNoeSA9IGZhbHNlOwogICAgICB9CgogICAgICBpZiAobW8uYXV0b0RlZmF1bHQoInRleENsYXNzIiwgdHJ1ZSkgPT0gIiIpIHsKICAgICAgICBtbyA9IE1NTC5UZVhBdG9tKG1vKTsKICAgICAgfQoKICAgICAgdGhpcy5QdXNoKHRoaXMubW1sVG9rZW4obW8pKTsKICAgIH0sCgogICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCiAgICAvKgogICAgICogICBNYWNyb3MKICAgICAqLwogICAgU2V0Rm9udDogZnVuY3Rpb24gU2V0Rm9udChuYW1lLCBmb250KSB7CiAgICAgIHRoaXMuc3RhY2suZW52LmZvbnQgPSBmb250OwogICAgfSwKICAgIFNldFN0eWxlOiBmdW5jdGlvbiBTZXRTdHlsZShuYW1lLCB0ZXhTdHlsZSwgc3R5bGUsIGxldmVsKSB7CiAgICAgIHRoaXMuc3RhY2suZW52LnN0eWxlID0gdGV4U3R5bGU7CiAgICAgIHRoaXMuc3RhY2suZW52LmxldmVsID0gbGV2ZWw7CiAgICAgIHRoaXMuUHVzaChTVEFDS0lURU0uc3R5bGUoKS5XaXRoKHsKICAgICAgICBzdHlsZXM6IHsKICAgICAgICAgIGRpc3BsYXlzdHlsZTogc3R5bGUsCiAgICAgICAgICBzY3JpcHRsZXZlbDogbGV2ZWwKICAgICAgICB9CiAgICAgIH0pKTsKICAgIH0sCiAgICBTZXRTaXplOiBmdW5jdGlvbiBTZXRTaXplKG5hbWUsIHNpemUpIHsKICAgICAgdGhpcy5zdGFjay5lbnYuc2l6ZSA9IHNpemU7CiAgICAgIHRoaXMuUHVzaChTVEFDS0lURU0uc3R5bGUoKS5XaXRoKHsKICAgICAgICBzdHlsZXM6IHsKICAgICAgICAgIG1hdGhzaXplOiBzaXplICsgImVtIgogICAgICAgIH0KICAgICAgfSkpOyAvLyBjb252ZXJ0IHRvIGFic29sdXRlPwogICAgfSwKICAgIENvbG9yOiBmdW5jdGlvbiBDb2xvcihuYW1lKSB7CiAgICAgIHZhciBjb2xvciA9IHRoaXMuR2V0QXJndW1lbnQobmFtZSk7CiAgICAgIHZhciBvbGQgPSB0aGlzLnN0YWNrLmVudi5jb2xvcjsKICAgICAgdGhpcy5zdGFjay5lbnYuY29sb3IgPSBjb2xvcjsKICAgICAgdmFyIG1hdGggPSB0aGlzLlBhcnNlQXJnKG5hbWUpOwoKICAgICAgaWYgKG9sZCkgewogICAgICAgIHRoaXMuc3RhY2suZW52LmNvbG9yOwogICAgICB9IGVsc2UgewogICAgICAgIGRlbGV0ZSB0aGlzLnN0YWNrLmVudi5jb2xvcjsKICAgICAgfQoKICAgICAgdGhpcy5QdXNoKE1NTC5tc3R5bGUobWF0aCkuV2l0aCh7CiAgICAgICAgbWF0aGNvbG9yOiBjb2xvcgogICAgICB9KSk7CiAgICB9LAogICAgU3BhY2VyOiBmdW5jdGlvbiBTcGFjZXIobmFtZSwgc3BhY2UpIHsKICAgICAgdGhpcy5QdXNoKE1NTC5tc3BhY2UoKS5XaXRoKHsKICAgICAgICB3aWR0aDogc3BhY2UsCiAgICAgICAgbWF0aHNpemU6IE1NTC5TSVpFLk5PUk1BTCwKICAgICAgICBzY3JpcHRsZXZlbDogMAogICAgICB9KSk7CiAgICB9LAogICAgTGVmdFJpZ2h0OiBmdW5jdGlvbiBMZWZ0UmlnaHQobmFtZSkgewogICAgICB0aGlzLlB1c2goU1RBQ0tJVEVNW25hbWUuc3Vic3RyKDEpXSgpLldpdGgoewogICAgICAgIGRlbGltOiB0aGlzLkdldERlbGltaXRlcihuYW1lKQogICAgICB9KSk7CiAgICB9LAogICAgTWlkZGxlOiBmdW5jdGlvbiBNaWRkbGUobmFtZSkgewogICAgICB2YXIgZGVsaW0gPSB0aGlzLkdldERlbGltaXRlcihuYW1lKTsKCiAgICAgIGlmICh0aGlzLnN0YWNrLlRvcCgpLnR5cGUgIT09ICJsZWZ0IikgewogICAgICAgIFRFWC5FcnJvcihbIk1pc3BsYWNlZE1pZGRsZSIsICIlMSBtdXN0IGJlIHdpdGhpbiBcXGxlZnQgYW5kIFxccmlnaHQiLCBuYW1lXSk7CiAgICAgIH0KCiAgICAgIHRoaXMuUHVzaChNTUwubW8oZGVsaW0pLldpdGgoewogICAgICAgIHN0cmV0Y2h5OiB0cnVlCiAgICAgIH0pKTsKICAgIH0sCiAgICBOYW1lZEZuOiBmdW5jdGlvbiBOYW1lZEZuKG5hbWUsIGlkKSB7CiAgICAgIGlmICghaWQpIHsKICAgICAgICBpZCA9IG5hbWUuc3Vic3RyKDEpOwogICAgICB9CgogICAgICA7CiAgICAgIHZhciBtbWwgPSBNTUwubWkoaWQpLldpdGgoewogICAgICAgIHRleENsYXNzOiBNTUwuVEVYQ0xBU1MuT1AKICAgICAgfSk7CiAgICAgIHRoaXMuUHVzaChTVEFDS0lURU0uZm4odGhpcy5tbWxUb2tlbihtbWwpKSk7CiAgICB9LAogICAgTmFtZWRPcDogZnVuY3Rpb24gTmFtZWRPcChuYW1lLCBpZCkgewogICAgICBpZiAoIWlkKSB7CiAgICAgICAgaWQgPSBuYW1lLnN1YnN0cigxKTsKICAgICAgfQoKICAgICAgOwogICAgICBpZCA9IGlkLnJlcGxhY2UoLyZ0aGluc3A7LywgIlx1MjAwNiIpOwogICAgICB2YXIgbW1sID0gTU1MLm1vKGlkKS5XaXRoKHsKICAgICAgICBtb3ZhYmxlbGltaXRzOiB0cnVlLAogICAgICAgIG1vdmVzdXBzdWI6IHRydWUsCiAgICAgICAgZm9ybTogTU1MLkZPUk0uUFJFRklYLAogICAgICAgIHRleENsYXNzOiBNTUwuVEVYQ0xBU1MuT1AKICAgICAgfSk7CiAgICAgIG1tbC51c2VNTUxzcGFjaW5nICY9IH5tbWwuU1BBQ0VfQVRUUi5mb3JtOyAvLyBkb24ndCBjb3VudCB0aGlzIGV4cGxpY2l0IGZvcm0gc2V0dGluZwoKICAgICAgdGhpcy5QdXNoKHRoaXMubW1sVG9rZW4obW1sKSk7CiAgICB9LAogICAgTGltaXRzOiBmdW5jdGlvbiBMaW1pdHMobmFtZSwgbGltaXRzKSB7CiAgICAgIHZhciBvcCA9IHRoaXMuc3RhY2suUHJldigibm9wb3AiKTsKCiAgICAgIGlmICghb3AgfHwgb3AuR2V0KCJ0ZXhDbGFzcyIpICE9PSBNTUwuVEVYQ0xBU1MuT1AgJiYgb3AubW92ZXN1cHN1YiA9PSBudWxsKSB7CiAgICAgICAgVEVYLkVycm9yKFsiTWlzcGxhY2VkTGltaXRzIiwgIiUxIGlzIGFsbG93ZWQgb25seSBvbiBvcGVyYXRvcnMiLCBuYW1lXSk7CiAgICAgIH0KCiAgICAgIHZhciB0b3AgPSB0aGlzLnN0YWNrLlRvcCgpOwoKICAgICAgaWYgKG9wLnR5cGUgPT09ICJtdW5kZXJvdmVyIiAmJiAhbGltaXRzKSB7CiAgICAgICAgb3AgPSB0b3AuZGF0YVt0b3AuZGF0YS5sZW5ndGggLSAxXSA9IE1NTC5tc3Vic3VwLmFwcGx5KE1NTC5zdWJzdXAsIG9wLmRhdGEpOwogICAgICB9IGVsc2UgaWYgKG9wLnR5cGUgPT09ICJtc3Vic3VwIiAmJiBsaW1pdHMpIHsKICAgICAgICBvcCA9IHRvcC5kYXRhW3RvcC5kYXRhLmxlbmd0aCAtIDFdID0gTU1MLm11bmRlcm92ZXIuYXBwbHkoTU1MLnVuZGVyb3Zlciwgb3AuZGF0YSk7CiAgICAgIH0KCiAgICAgIG9wLm1vdmVzdXBzdWIgPSBsaW1pdHMgPyB0cnVlIDogZmFsc2U7CiAgICAgIG9wLkNvcmUoKS5tb3ZhYmxlbGltaXRzID0gZmFsc2U7CiAgICAgIGlmIChvcC5tb3ZhYmxlbGltaXRzKSBvcC5tb3ZhYmxlbGltaXRzID0gZmFsc2U7CiAgICB9LAogICAgT3ZlcjogZnVuY3Rpb24gT3ZlcihuYW1lLCBvcGVuLCBjbG9zZSkgewogICAgICB2YXIgbW1sID0gU1RBQ0tJVEVNLm92ZXIoKS5XaXRoKHsKICAgICAgICBuYW1lOiBuYW1lCiAgICAgIH0pOwoKICAgICAgaWYgKG9wZW4gfHwgY2xvc2UpIHsKICAgICAgICBtbWwub3BlbiA9IG9wZW47CiAgICAgICAgbW1sLmNsb3NlID0gY2xvc2U7CiAgICAgIH0gZWxzZSBpZiAobmFtZS5tYXRjaCgvd2l0aGRlbGltcyQvKSkgewogICAgICAgIG1tbC5vcGVuID0gdGhpcy5HZXREZWxpbWl0ZXIobmFtZSk7CiAgICAgICAgbW1sLmNsb3NlID0gdGhpcy5HZXREZWxpbWl0ZXIobmFtZSk7CiAgICAgIH0KCiAgICAgIGlmIChuYW1lLm1hdGNoKC9eXFxhYm92ZS8pKSB7CiAgICAgICAgbW1sLnRoaWNrbmVzcyA9IHRoaXMuR2V0RGltZW4obmFtZSk7CiAgICAgIH0gZWxzZSBpZiAobmFtZS5tYXRjaCgvXlxcYXRvcC8pIHx8IG9wZW4gfHwgY2xvc2UpIHsKICAgICAgICBtbWwudGhpY2tuZXNzID0gMDsKICAgICAgfQoKICAgICAgdGhpcy5QdXNoKG1tbCk7CiAgICB9LAogICAgRnJhYzogZnVuY3Rpb24gRnJhYyhuYW1lKSB7CiAgICAgIHZhciBudW0gPSB0aGlzLlBhcnNlQXJnKG5hbWUpOwogICAgICB2YXIgZGVuID0gdGhpcy5QYXJzZUFyZyhuYW1lKTsKICAgICAgdGhpcy5QdXNoKE1NTC5tZnJhYyhudW0sIGRlbikpOwogICAgfSwKICAgIFNxcnQ6IGZ1bmN0aW9uIFNxcnQobmFtZSkgewogICAgICB2YXIgbiA9IHRoaXMuR2V0QnJhY2tldHMobmFtZSksCiAgICAgICAgICBhcmcgPSB0aGlzLkdldEFyZ3VtZW50KG5hbWUpOwoKICAgICAgaWYgKGFyZyA9PT0gIlxcZnJhYyIpIHsKICAgICAgICBhcmcgKz0gInsiICsgdGhpcy5HZXRBcmd1bWVudChhcmcpICsgIn17IiArIHRoaXMuR2V0QXJndW1lbnQoYXJnKSArICJ9IjsKICAgICAgfQoKICAgICAgdmFyIG1tbCA9IFRFWC5QYXJzZShhcmcsIHRoaXMuc3RhY2suZW52KS5tbWwoKTsKCiAgICAgIGlmICghbikgewogICAgICAgIG1tbCA9IE1NTC5tc3FydC5hcHBseShNTUwsIG1tbC5hcnJheSgpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtbWwgPSBNTUwubXJvb3QobW1sLCB0aGlzLnBhcnNlUm9vdChuKSk7CiAgICAgIH0KCiAgICAgIHRoaXMuUHVzaChtbWwpOwogICAgfSwKICAgIFJvb3Q6IGZ1bmN0aW9uIFJvb3QobmFtZSkgewogICAgICB2YXIgbiA9IHRoaXMuR2V0VXBUbyhuYW1lLCAiXFxvZiIpOwogICAgICB2YXIgYXJnID0gdGhpcy5QYXJzZUFyZyhuYW1lKTsKICAgICAgdGhpcy5QdXNoKE1NTC5tcm9vdChhcmcsIHRoaXMucGFyc2VSb290KG4pKSk7CiAgICB9LAogICAgcGFyc2VSb290OiBmdW5jdGlvbiBwYXJzZVJvb3QobikgewogICAgICB2YXIgZW52ID0gdGhpcy5zdGFjay5lbnYsCiAgICAgICAgICBpblJvb3QgPSBlbnYuaW5Sb290OwogICAgICBlbnYuaW5Sb290ID0gdHJ1ZTsKICAgICAgdmFyIHBhcnNlciA9IFRFWC5QYXJzZShuLCBlbnYpOwogICAgICBuID0gcGFyc2VyLm1tbCgpOwogICAgICB2YXIgZ2xvYmFsID0gcGFyc2VyLnN0YWNrLmdsb2JhbDsKCiAgICAgIGlmIChnbG9iYWwubGVmdFJvb3QgfHwgZ2xvYmFsLnVwUm9vdCkgewogICAgICAgIG4gPSBNTUwubXBhZGRlZChuKTsKCiAgICAgICAgaWYgKGdsb2JhbC5sZWZ0Um9vdCkgewogICAgICAgICAgbi53aWR0aCA9IGdsb2JhbC5sZWZ0Um9vdDsKICAgICAgICB9CgogICAgICAgIGlmIChnbG9iYWwudXBSb290KSB7CiAgICAgICAgICBuLnZvZmZzZXQgPSBnbG9iYWwudXBSb290OwogICAgICAgICAgbi5oZWlnaHQgPSBnbG9iYWwudXBSb290OwogICAgICAgIH0KICAgICAgfQoKICAgICAgZW52LmluUm9vdCA9IGluUm9vdDsKICAgICAgcmV0dXJuIG47CiAgICB9LAogICAgTW92ZVJvb3Q6IGZ1bmN0aW9uIE1vdmVSb290KG5hbWUsIGlkKSB7CiAgICAgIGlmICghdGhpcy5zdGFjay5lbnYuaW5Sb290KSB7CiAgICAgICAgVEVYLkVycm9yKFsiTWlzcGxhY2VkTW92ZVJvb3QiLCAiJTEgY2FuIGFwcGVhciBvbmx5IHdpdGhpbiBhIHJvb3QiLCBuYW1lXSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnN0YWNrLmdsb2JhbFtpZF0pIHsKICAgICAgICBURVguRXJyb3IoWyJNdWx0aXBsZU1vdmVSb290IiwgIk11bHRpcGxlIHVzZSBvZiAlMSIsIG5hbWVdKTsKICAgICAgfQoKICAgICAgdmFyIG4gPSB0aGlzLkdldEFyZ3VtZW50KG5hbWUpOwoKICAgICAgaWYgKCFuLm1hdGNoKC8tP1swLTldKy8pKSB7CiAgICAgICAgVEVYLkVycm9yKFsiSW50ZWdlckFyZyIsICJUaGUgYXJndW1lbnQgdG8gJTEgbXVzdCBiZSBhbiBpbnRlZ2VyIiwgbmFtZV0pOwogICAgICB9CgogICAgICBuID0gbiAvIDE1ICsgImVtIjsKCiAgICAgIGlmIChuLnN1YnN0cigwLCAxKSAhPT0gIi0iKSB7CiAgICAgICAgbiA9ICIrIiArIG47CiAgICAgIH0KCiAgICAgIHRoaXMuc3RhY2suZ2xvYmFsW2lkXSA9IG47CiAgICB9LAogICAgQWNjZW50OiBmdW5jdGlvbiBBY2NlbnQobmFtZSwgYWNjZW50LCBzdHJldGNoeSkgewogICAgICB2YXIgYyA9IHRoaXMuUGFyc2VBcmcobmFtZSk7CiAgICAgIHZhciBkZWYgPSB7CiAgICAgICAgYWNjZW50OiB0cnVlCiAgICAgIH07CgogICAgICBpZiAodGhpcy5zdGFjay5lbnYuZm9udCkgewogICAgICAgIGRlZi5tYXRodmFyaWFudCA9IHRoaXMuc3RhY2suZW52LmZvbnQ7CiAgICAgIH0KCiAgICAgIHZhciBtbWwgPSB0aGlzLm1tbFRva2VuKE1NTC5tbyhNTUwuZW50aXR5KCIjeCIgKyBhY2NlbnQpKS5XaXRoKGRlZikpOwogICAgICBtbWwuc3RyZXRjaHkgPSBzdHJldGNoeSA/IHRydWUgOiBmYWxzZTsKICAgICAgdGhpcy5QdXNoKE1NTC5UZVhBdG9tKE1NTC5tdW5kZXJvdmVyKGMsIG51bGwsIG1tbCkuV2l0aCh7CiAgICAgICAgYWNjZW50OiB0cnVlCiAgICAgIH0pKSk7CiAgICB9LAogICAgVW5kZXJPdmVyOiBmdW5jdGlvbiBVbmRlck92ZXIobmFtZSwgYywgc3RhY2ssIG5vYWNjZW50KSB7CiAgICAgIHZhciBwb3MgPSB7CiAgICAgICAgbzogIm92ZXIiLAogICAgICAgIHU6ICJ1bmRlciIKICAgICAgfVtuYW1lLmNoYXJBdCgxKV07CiAgICAgIHZhciBiYXNlID0gdGhpcy5QYXJzZUFyZyhuYW1lKTsKCiAgICAgIGlmIChiYXNlLkdldCgibW92YWJsZWxpbWl0cyIpKSB7CiAgICAgICAgYmFzZS5tb3ZhYmxlbGltaXRzID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIGlmIChiYXNlLmlzYShNTUwubXVuZGVyb3ZlcikgJiYgYmFzZS5pc0VtYmVsbGlzaGVkKCkpIHsKICAgICAgICBiYXNlLkNvcmUoKS5XaXRoKHsKICAgICAgICAgIGxzcGFjZTogMCwKICAgICAgICAgIHJzcGFjZTogMAogICAgICAgIH0pOyAvLyBnZXQgc3BhY2luZyByaWdodCBmb3IgTmF0aXZlTU1MCgogICAgICAgIGJhc2UgPSBNTUwubXJvdyhNTUwubW8oKS5XaXRoKHsKICAgICAgICAgIHJzcGFjZTogMAogICAgICAgIH0pLCBiYXNlKTsgLy8gYWRkIGFuIGVtcHR5IDxtaT4gc28gaXQncyBub3QgZW1iZWxsaXNoZWQgYW55IG1vcmUKICAgICAgfQoKICAgICAgdmFyIG1tbCA9IE1NTC5tdW5kZXJvdmVyKGJhc2UsIG51bGwsIG51bGwpOwogICAgICBtbWwuU2V0RGF0YShtbWxbcG9zXSwgdGhpcy5tbWxUb2tlbihNTUwubW8oTU1MLmVudGl0eSgiI3giICsgYykpLldpdGgoewogICAgICAgIHN0cmV0Y2h5OiB0cnVlLAogICAgICAgIGFjY2VudDogIW5vYWNjZW50CiAgICAgIH0pKSk7CgogICAgICBpZiAoc3RhY2spIHsKICAgICAgICBtbWwgPSBNTUwuVGVYQXRvbShtbWwpLldpdGgoewogICAgICAgICAgdGV4Q2xhc3M6IE1NTC5URVhDTEFTUy5PUCwKICAgICAgICAgIG1vdmVzdXBzdWI6IHRydWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdGhpcy5QdXNoKG1tbC5XaXRoKHsKICAgICAgICBzdWJzdXBPSzogdHJ1ZQogICAgICB9KSk7CiAgICB9LAogICAgT3ZlcnNldDogZnVuY3Rpb24gT3ZlcnNldChuYW1lKSB7CiAgICAgIHZhciB0b3AgPSB0aGlzLlBhcnNlQXJnKG5hbWUpLAogICAgICAgICAgYmFzZSA9IHRoaXMuUGFyc2VBcmcobmFtZSk7CiAgICAgIGlmIChiYXNlLm1vdmFibGVsaW1pdHMpIGJhc2UubW92YWJsZWxpbWl0cyA9IGZhbHNlOwogICAgICB0aGlzLlB1c2goTU1MLm1vdmVyKGJhc2UsIHRvcCkpOwogICAgfSwKICAgIFVuZGVyc2V0OiBmdW5jdGlvbiBVbmRlcnNldChuYW1lKSB7CiAgICAgIHZhciBib3QgPSB0aGlzLlBhcnNlQXJnKG5hbWUpLAogICAgICAgICAgYmFzZSA9IHRoaXMuUGFyc2VBcmcobmFtZSk7CiAgICAgIGlmIChiYXNlLm1vdmFibGVsaW1pdHMpIGJhc2UubW92YWJsZWxpbWl0cyA9IGZhbHNlOwogICAgICB0aGlzLlB1c2goTU1MLm11bmRlcihiYXNlLCBib3QpKTsKICAgIH0sCiAgICBUZVhBdG9tOiBmdW5jdGlvbiBUZVhBdG9tKG5hbWUsIG1jbGFzcykgewogICAgICB2YXIgZGVmID0gewogICAgICAgIHRleENsYXNzOiBtY2xhc3MKICAgICAgfSwKICAgICAgICAgIG1tbDsKCiAgICAgIGlmIChtY2xhc3MgPT0gTU1MLlRFWENMQVNTLk9QKSB7CiAgICAgICAgZGVmLm1vdmVzdXBzdWIgPSBkZWYubW92YWJsZWxpbWl0cyA9IHRydWU7CiAgICAgICAgdmFyIGFyZyA9IHRoaXMuR2V0QXJndW1lbnQobmFtZSk7CiAgICAgICAgdmFyIG1hdGNoID0gYXJnLm1hdGNoKC9eXHMqXFxybVxzKyhbYS16QS1aMC05IF0rKSQvKTsKCiAgICAgICAgaWYgKG1hdGNoKSB7CiAgICAgICAgICBkZWYubWF0aHZhcmlhbnQgPSBNTUwuVkFSSUFOVC5OT1JNQUw7CiAgICAgICAgICBtbWwgPSBTVEFDS0lURU0uZm4odGhpcy5tbWxUb2tlbihNTUwubWkobWF0Y2hbMV0pLldpdGgoZGVmKSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBtbWwgPSBTVEFDS0lURU0uZm4oTU1MLlRlWEF0b20oVEVYLlBhcnNlKGFyZywgdGhpcy5zdGFjay5lbnYpLm1tbCgpKS5XaXRoKGRlZikpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBtbWwgPSBNTUwuVGVYQXRvbSh0aGlzLlBhcnNlQXJnKG5hbWUpKS5XaXRoKGRlZik7CiAgICAgIH0KCiAgICAgIHRoaXMuUHVzaChtbWwpOwogICAgfSwKICAgIE1tbFRva2VuOiBmdW5jdGlvbiBNbWxUb2tlbihuYW1lKSB7CiAgICAgIHZhciB0eXBlID0gdGhpcy5HZXRBcmd1bWVudChuYW1lKSwKICAgICAgICAgIGF0dHIgPSB0aGlzLkdldEJyYWNrZXRzKG5hbWUsICIiKS5yZXBsYWNlKC9eXHMrLywgIiIpLAogICAgICAgICAgZGF0YSA9IHRoaXMuR2V0QXJndW1lbnQobmFtZSksCiAgICAgICAgICBkZWYgPSB7CiAgICAgICAgYXR0ck5hbWVzOiBbXQogICAgICB9LAogICAgICAgICAgbWF0Y2g7CgogICAgICBpZiAoIU1NTFt0eXBlXSB8fCAhTU1MW3R5cGVdLnByb3RvdHlwZS5pc1Rva2VuKSB7CiAgICAgICAgVEVYLkVycm9yKFsiTm90TWF0aE1MVG9rZW4iLCAiJTEgaXMgbm90IGEgdG9rZW4gZWxlbWVudCIsIHR5cGVdKTsKICAgICAgfQoKICAgICAgd2hpbGUgKGF0dHIgIT09ICIiKSB7CiAgICAgICAgbWF0Y2ggPSBhdHRyLm1hdGNoKC9eKFthLXpdKylccyo9XHMqKCdbXiddKid8IlteIl0qInxbXiAsXSopXHMqLD9ccyovaSk7CgogICAgICAgIGlmICghbWF0Y2gpIHsKICAgICAgICAgIFRFWC5FcnJvcihbIkludmFsaWRNYXRoTUxBdHRyIiwgIkludmFsaWQgTWF0aE1MIGF0dHJpYnV0ZTogJTEiLCBhdHRyXSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoTU1MW3R5cGVdLnByb3RvdHlwZS5kZWZhdWx0c1ttYXRjaFsxXV0gPT0gbnVsbCAmJiAhdGhpcy5NbWxUb2tlbkFsbG93W21hdGNoWzFdXSkgewogICAgICAgICAgVEVYLkVycm9yKFsiVW5rbm93bkF0dHJGb3JFbGVtZW50IiwgIiUxIGlzIG5vdCBhIHJlY29nbml6ZWQgYXR0cmlidXRlIGZvciAlMiIsIG1hdGNoWzFdLCB0eXBlXSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLk1tbEZpbHRlckF0dHJpYnV0ZShtYXRjaFsxXSwgbWF0Y2hbMl0ucmVwbGFjZSgvXihbJyJdKSguKilcMSQvLCAiJDIiKSk7CgogICAgICAgIGlmICh2YWx1ZSkgewogICAgICAgICAgaWYgKHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09ICJ0cnVlIikgewogICAgICAgICAgICB2YWx1ZSA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09ICJmYWxzZSIpIHsKICAgICAgICAgICAgdmFsdWUgPSBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBkZWZbbWF0Y2hbMV1dID0gdmFsdWU7CiAgICAgICAgICBkZWYuYXR0ck5hbWVzLnB1c2gobWF0Y2hbMV0pOwogICAgICAgIH0KCiAgICAgICAgYXR0ciA9IGF0dHIuc3Vic3RyKG1hdGNoWzBdLmxlbmd0aCk7CiAgICAgIH0KCiAgICAgIHRoaXMuUHVzaCh0aGlzLm1tbFRva2VuKE1NTFt0eXBlXShkYXRhKS5XaXRoKGRlZikpKTsKICAgIH0sCiAgICBNbWxGaWx0ZXJBdHRyaWJ1dGU6IGZ1bmN0aW9uIE1tbEZpbHRlckF0dHJpYnV0ZShuYW1lLCB2YWx1ZSkgewogICAgICByZXR1cm4gdmFsdWU7CiAgICB9LAogICAgTW1sVG9rZW5BbGxvdzogewogICAgICBmb250ZmFtaWx5OiAxLAogICAgICBmb250c2l6ZTogMSwKICAgICAgZm9udHdlaWdodDogMSwKICAgICAgZm9udHN0eWxlOiAxLAogICAgICBjb2xvcjogMSwKICAgICAgYmFja2dyb3VuZDogMSwKICAgICAgaWQ6IDEsCiAgICAgICJjbGFzcyI6IDEsCiAgICAgIGhyZWY6IDEsCiAgICAgIHN0eWxlOiAxCiAgICB9LAogICAgU3RydXQ6IGZ1bmN0aW9uIFN0cnV0KG5hbWUpIHsKICAgICAgdGhpcy5QdXNoKE1NTC5tcGFkZGVkKE1NTC5tcm93KCkpLldpdGgoewogICAgICAgIGhlaWdodDogIjguNnB0IiwKICAgICAgICBkZXB0aDogIjNwdCIsCiAgICAgICAgd2lkdGg6IDAKICAgICAgfSkpOwogICAgfSwKICAgIFBoYW50b206IGZ1bmN0aW9uIFBoYW50b20obmFtZSwgdiwgaCkgewogICAgICB2YXIgYm94ID0gTU1MLm1waGFudG9tKHRoaXMuUGFyc2VBcmcobmFtZSkpOwoKICAgICAgaWYgKHYgfHwgaCkgewogICAgICAgIGJveCA9IE1NTC5tcGFkZGVkKGJveCk7CgogICAgICAgIGlmIChoKSB7CiAgICAgICAgICBib3guaGVpZ2h0ID0gYm94LmRlcHRoID0gMDsKICAgICAgICB9CgogICAgICAgIGlmICh2KSB7CiAgICAgICAgICBib3gud2lkdGggPSAwOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5QdXNoKE1NTC5UZVhBdG9tKGJveCkpOwogICAgfSwKICAgIFNtYXNoOiBmdW5jdGlvbiBTbWFzaChuYW1lKSB7CiAgICAgIHZhciBidCA9IHRoaXMudHJpbVNwYWNlcyh0aGlzLkdldEJyYWNrZXRzKG5hbWUsICIiKSk7CiAgICAgIHZhciBzbWFzaCA9IE1NTC5tcGFkZGVkKHRoaXMuUGFyc2VBcmcobmFtZSkpOwoKICAgICAgc3dpdGNoIChidCkgewogICAgICAgIGNhc2UgImIiOgogICAgICAgICAgc21hc2guZGVwdGggPSAwOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgInQiOgogICAgICAgICAgc21hc2guaGVpZ2h0ID0gMDsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgc21hc2guaGVpZ2h0ID0gc21hc2guZGVwdGggPSAwOwogICAgICB9CgogICAgICB0aGlzLlB1c2goTU1MLlRlWEF0b20oc21hc2gpKTsKICAgIH0sCiAgICBMYXA6IGZ1bmN0aW9uIExhcChuYW1lKSB7CiAgICAgIHZhciBtbWwgPSBNTUwubXBhZGRlZCh0aGlzLlBhcnNlQXJnKG5hbWUpKS5XaXRoKHsKICAgICAgICB3aWR0aDogMAogICAgICB9KTsKCiAgICAgIGlmIChuYW1lID09PSAiXFxsbGFwIikgewogICAgICAgIG1tbC5sc3BhY2UgPSAiLTF3aWR0aCI7CiAgICAgIH0KCiAgICAgIHRoaXMuUHVzaChNTUwuVGVYQXRvbShtbWwpKTsKICAgIH0sCiAgICBSYWlzZUxvd2VyOiBmdW5jdGlvbiBSYWlzZUxvd2VyKG5hbWUpIHsKICAgICAgdmFyIGggPSB0aGlzLkdldERpbWVuKG5hbWUpOwogICAgICB2YXIgaXRlbSA9IFNUQUNLSVRFTS5wb3NpdGlvbigpLldpdGgoewogICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgbW92ZTogJ3ZlcnRpY2FsJwogICAgICB9KTsKCiAgICAgIGlmIChoLmNoYXJBdCgwKSA9PT0gJy0nKSB7CiAgICAgICAgaCA9IGguc2xpY2UoMSk7CiAgICAgICAgbmFtZSA9IHsKICAgICAgICAgIHJhaXNlOiAiXFxsb3dlciIsCiAgICAgICAgICBsb3dlcjogIlxccmFpc2UiCiAgICAgICAgfVtuYW1lLnN1YnN0cigxKV07CiAgICAgIH0KCiAgICAgIGlmIChuYW1lID09PSAiXFxsb3dlciIpIHsKICAgICAgICBpdGVtLmRoID0gJy0nICsgaDsKICAgICAgICBpdGVtLmRkID0gJysnICsgaDsKICAgICAgfSBlbHNlIHsKICAgICAgICBpdGVtLmRoID0gJysnICsgaDsKICAgICAgICBpdGVtLmRkID0gJy0nICsgaDsKICAgICAgfQoKICAgICAgdGhpcy5QdXNoKGl0ZW0pOwogICAgfSwKICAgIE1vdmVMZWZ0UmlnaHQ6IGZ1bmN0aW9uIE1vdmVMZWZ0UmlnaHQobmFtZSkgewogICAgICB2YXIgaCA9IHRoaXMuR2V0RGltZW4obmFtZSk7CiAgICAgIHZhciBuaCA9IGguY2hhckF0KDApID09PSAnLScgPyBoLnNsaWNlKDEpIDogJy0nICsgaDsKCiAgICAgIGlmIChuYW1lID09PSAiXFxtb3ZlbGVmdCIpIHsKICAgICAgICB2YXIgdG1wID0gaDsKICAgICAgICBoID0gbmg7CiAgICAgICAgbmggPSB0bXA7CiAgICAgIH0KCiAgICAgIHRoaXMuUHVzaChTVEFDS0lURU0ucG9zaXRpb24oKS5XaXRoKHsKICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgIG1vdmU6ICdob3Jpem9udGFsJywKICAgICAgICBsZWZ0OiBNTUwubXNwYWNlKCkuV2l0aCh7CiAgICAgICAgICB3aWR0aDogaCwKICAgICAgICAgIG1hdGhzaXplOiBNTUwuU0laRS5OT1JNQUwKICAgICAgICB9KSwKICAgICAgICByaWdodDogTU1MLm1zcGFjZSgpLldpdGgoewogICAgICAgICAgd2lkdGg6IG5oLAogICAgICAgICAgbWF0aHNpemU6IE1NTC5TSVpFLk5PUk1BTAogICAgICAgIH0pCiAgICAgIH0pKTsKICAgIH0sCiAgICBIc2tpcDogZnVuY3Rpb24gSHNraXAobmFtZSkgewogICAgICB0aGlzLlB1c2goTU1MLm1zcGFjZSgpLldpdGgoewogICAgICAgIHdpZHRoOiB0aGlzLkdldERpbWVuKG5hbWUpLAogICAgICAgIG1hdGhzaXplOiBNTUwuU0laRS5OT1JNQUwKICAgICAgfSkpOwogICAgfSwKICAgIFJ1bGU6IGZ1bmN0aW9uIFJ1bGUobmFtZSwgc3R5bGUpIHsKICAgICAgdmFyIHcgPSB0aGlzLkdldERpbWVuKG5hbWUpLAogICAgICAgICAgaCA9IHRoaXMuR2V0RGltZW4obmFtZSksCiAgICAgICAgICBkID0gdGhpcy5HZXREaW1lbihuYW1lKTsKICAgICAgdmFyIG1tbCwKICAgICAgICAgIGRlZiA9IHsKICAgICAgICB3aWR0aDogdywKICAgICAgICBoZWlnaHQ6IGgsCiAgICAgICAgZGVwdGg6IGQKICAgICAgfTsKCiAgICAgIGlmIChzdHlsZSAhPT0gJ2JsYW5rJykgewogICAgICAgIGlmIChwYXJzZUZsb2F0KHcpICYmIHBhcnNlRmxvYXQoaCkgKyBwYXJzZUZsb2F0KGQpKSB7CiAgICAgICAgICBkZWYubWF0aGJhY2tncm91bmQgPSB0aGlzLnN0YWNrLmVudi5jb2xvciB8fCAiYmxhY2siOwogICAgICAgIH0KCiAgICAgICAgbW1sID0gTU1MLm1wYWRkZWQoTU1MLm1yb3coKSkuV2l0aChkZWYpOwogICAgICB9IGVsc2UgewogICAgICAgIG1tbCA9IE1NTC5tc3BhY2UoKS5XaXRoKGRlZik7CiAgICAgIH0KCiAgICAgIHRoaXMuUHVzaChtbWwpOwogICAgfSwKICAgIE1ha2VCaWc6IGZ1bmN0aW9uIE1ha2VCaWcobmFtZSwgbWNsYXNzLCBzaXplKSB7CiAgICAgIHNpemUgKj0gVEVYREVGLnBfaGVpZ2h0OwogICAgICBzaXplID0gU3RyaW5nKHNpemUpLnJlcGxhY2UoLyhcLlxkXGRcZCkuKy8sICckMScpICsgImVtIjsKICAgICAgdmFyIGRlbGltID0gdGhpcy5HZXREZWxpbWl0ZXIobmFtZSwgdHJ1ZSk7CiAgICAgIHRoaXMuUHVzaChNTUwuVGVYQXRvbShNTUwubW8oZGVsaW0pLldpdGgoewogICAgICAgIG1pbnNpemU6IHNpemUsCiAgICAgICAgbWF4c2l6ZTogc2l6ZSwKICAgICAgICBmZW5jZTogdHJ1ZSwKICAgICAgICBzdHJldGNoeTogdHJ1ZSwKICAgICAgICBzeW1tZXRyaWM6IHRydWUKICAgICAgfSkpLldpdGgoewogICAgICAgIHRleENsYXNzOiBtY2xhc3MKICAgICAgfSkpOwogICAgfSwKICAgIEJ1aWxkUmVsOiBmdW5jdGlvbiBCdWlsZFJlbChuYW1lKSB7CiAgICAgIHZhciB0b3AgPSB0aGlzLlBhcnNlVXBUbyhuYW1lLCAiXFxvdmVyIik7CiAgICAgIHZhciBib3QgPSB0aGlzLlBhcnNlQXJnKG5hbWUpOwogICAgICB0aGlzLlB1c2goTU1MLlRlWEF0b20oTU1MLm11bmRlcm92ZXIoYm90LCBudWxsLCB0b3ApKS5XaXRoKHsKICAgICAgICB0ZXhDbGFzczogTU1MLlRFWENMQVNTLlJFTAogICAgICB9KSk7CiAgICB9LAogICAgSEJveDogZnVuY3Rpb24gSEJveChuYW1lLCBzdHlsZSkgewogICAgICB0aGlzLlB1c2guYXBwbHkodGhpcywgdGhpcy5JbnRlcm5hbE1hdGgodGhpcy5HZXRBcmd1bWVudChuYW1lKSwgc3R5bGUpKTsKICAgIH0sCiAgICBGQm94OiBmdW5jdGlvbiBGQm94KG5hbWUpIHsKICAgICAgdGhpcy5QdXNoKE1NTC5tZW5jbG9zZS5hcHBseShNTUwsIHRoaXMuSW50ZXJuYWxNYXRoKHRoaXMuR2V0QXJndW1lbnQobmFtZSkpKS5XaXRoKHsKICAgICAgICBub3RhdGlvbjogImJveCIKICAgICAgfSkpOwogICAgfSwKICAgIE5vdDogZnVuY3Rpb24gTm90KG5hbWUpIHsKICAgICAgdGhpcy5QdXNoKFNUQUNLSVRFTS5ub3QoKSk7CiAgICB9LAogICAgRG90czogZnVuY3Rpb24gRG90cyhuYW1lKSB7CiAgICAgIHRoaXMuUHVzaChTVEFDS0lURU0uZG90cygpLldpdGgoewogICAgICAgIGxkb3RzOiB0aGlzLm1tbFRva2VuKE1NTC5tbyhNTUwuZW50aXR5KCIjeDIwMjYiKSkuV2l0aCh7CiAgICAgICAgICBzdHJldGNoeTogZmFsc2UKICAgICAgICB9KSksCiAgICAgICAgY2RvdHM6IHRoaXMubW1sVG9rZW4oTU1MLm1vKE1NTC5lbnRpdHkoIiN4MjJFRiIpKS5XaXRoKHsKICAgICAgICAgIHN0cmV0Y2h5OiBmYWxzZQogICAgICAgIH0pKQogICAgICB9KSk7CiAgICB9LAogICAgUmVxdWlyZTogZnVuY3Rpb24gUmVxdWlyZShuYW1lKSB7CiAgICAgIHZhciBmaWxlID0gdGhpcy5HZXRBcmd1bWVudChuYW1lKS5yZXBsYWNlKC8uKlwvLywgIiIpIC8vIHJlbW92ZSBhbnkgbGVhZGluZyBwYXRoCiAgICAgIC5yZXBsYWNlKC9bXmEtejAtOV8uLV0vaWcsICIiKTsgLy8gcmVtb3ZlIGlsbGVnYWwgY2hhcmFjdGVycwoKICAgICAgdGhpcy5FeHRlbnNpb24obnVsbCwgZmlsZSk7CiAgICB9LAogICAgRXh0ZW5zaW9uOiBmdW5jdGlvbiBFeHRlbnNpb24obmFtZSwgZmlsZSwgYXJyYXkpIHsKICAgICAgaWYgKG5hbWUgJiYgIV90eXBlb2YobmFtZSkgPT09ICJzdHJpbmciKSB7CiAgICAgICAgbmFtZSA9IG5hbWUubmFtZTsKICAgICAgfQoKICAgICAgZmlsZSA9IFRFWC5leHRlbnNpb25EaXIgKyAiLyIgKyBmaWxlOwoKICAgICAgaWYgKCFmaWxlLm1hdGNoKC9cLmpzJC8pKSB7CiAgICAgICAgZmlsZSArPSAiLmpzIjsKICAgICAgfQoKICAgICAgaWYgKCFBSkFYLmxvYWRlZFtBSkFYLmZpbGVVUkwoZmlsZSldKSB7CiAgICAgICAgaWYgKG5hbWUgIT0gbnVsbCkgewogICAgICAgICAgZGVsZXRlIFRFWERFRlthcnJheSB8fCAnbWFjcm9zJ11bbmFtZS5yZXBsYWNlKC9eXFwvLCAiIildOwogICAgICAgIH0KCiAgICAgICAgSFVCLlJlc3RhcnRBZnRlcihBSkFYLlJlcXVpcmUoZmlsZSkpOwogICAgICB9CiAgICB9LAogICAgTWFjcm86IGZ1bmN0aW9uIE1hY3JvKG5hbWUsIG1hY3JvLCBhcmdjb3VudCwgZGVmKSB7CiAgICAgIGlmIChhcmdjb3VudCkgewogICAgICAgIHZhciBhcmdzID0gW107CgogICAgICAgIGlmIChkZWYgIT0gbnVsbCkgewogICAgICAgICAgdmFyIG9wdGlvbmFsID0gdGhpcy5HZXRCcmFja2V0cyhuYW1lKTsKICAgICAgICAgIGFyZ3MucHVzaChvcHRpb25hbCA9PSBudWxsID8gZGVmIDogb3B0aW9uYWwpOwogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgaSA9IGFyZ3MubGVuZ3RoOyBpIDwgYXJnY291bnQ7IGkrKykgewogICAgICAgICAgYXJncy5wdXNoKHRoaXMuR2V0QXJndW1lbnQobmFtZSkpOwogICAgICAgIH0KCiAgICAgICAgbWFjcm8gPSB0aGlzLlN1YnN0aXR1dGVBcmdzKGFyZ3MsIG1hY3JvKTsKICAgICAgfQoKICAgICAgdGhpcy5zdHJpbmcgPSB0aGlzLkFkZEFyZ3MobWFjcm8sIHRoaXMuc3RyaW5nLnNsaWNlKHRoaXMuaSkpOwogICAgICB0aGlzLmkgPSAwOwoKICAgICAgaWYgKCsrdGhpcy5tYWNyb0NvdW50ID4gVEVYLmNvbmZpZy5NQVhNQUNST1MpIHsKICAgICAgICBURVguRXJyb3IoWyJNYXhNYWNyb1N1YjEiLCAiTWF0aEpheCBtYXhpbXVtIG1hY3JvIHN1YnN0aXR1dGlvbiBjb3VudCBleGNlZWRlZDsgIiArICJpcyB0aGVyZSBhIHJlY3Vyc2l2ZSBtYWNybyBjYWxsPyJdKTsKICAgICAgfQogICAgfSwKICAgIE1hdHJpeDogZnVuY3Rpb24gTWF0cml4KG5hbWUsIG9wZW4sIGNsb3NlLCBhbGlnbiwgc3BhY2luZywgdnNwYWNpbmcsIHN0eWxlLCBjYXNlcywgbnVtYmVyZWQpIHsKICAgICAgdmFyIGMgPSB0aGlzLkdldE5leHQoKTsKCiAgICAgIGlmIChjID09PSAiIikgewogICAgICAgIFRFWC5FcnJvcihbIk1pc3NpbmdBcmdGb3IiLCAiTWlzc2luZyBhcmd1bWVudCBmb3IgJTEiLCBuYW1lXSk7CiAgICAgIH0KCiAgICAgIGlmIChjID09PSAieyIpIHsKICAgICAgICB0aGlzLmkrKzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnN0cmluZyA9IGMgKyAifSIgKyB0aGlzLnN0cmluZy5zbGljZSh0aGlzLmkgKyAxKTsKICAgICAgICB0aGlzLmkgPSAwOwogICAgICB9CgogICAgICB2YXIgYXJyYXkgPSBTVEFDS0lURU0uYXJyYXkoKS5XaXRoKHsKICAgICAgICByZXF1aXJlQ2xvc2U6IHRydWUsCiAgICAgICAgYXJyYXlkZWY6IHsKICAgICAgICAgIHJvd3NwYWNpbmc6IHZzcGFjaW5nIHx8ICI0cHQiLAogICAgICAgICAgY29sdW1uc3BhY2luZzogc3BhY2luZyB8fCAiMWVtIgogICAgICAgIH0KICAgICAgfSk7CgogICAgICBpZiAoY2FzZXMpIHsKICAgICAgICBhcnJheS5pc0Nhc2VzID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKG51bWJlcmVkKSB7CiAgICAgICAgYXJyYXkuaXNOdW1iZXJlZCA9IHRydWU7CiAgICAgICAgYXJyYXkuYXJyYXlkZWYuc2lkZSA9IG51bWJlcmVkOwogICAgICB9CgogICAgICBpZiAob3BlbiB8fCBjbG9zZSkgewogICAgICAgIGFycmF5Lm9wZW4gPSBvcGVuOwogICAgICAgIGFycmF5LmNsb3NlID0gY2xvc2U7CiAgICAgIH0KCiAgICAgIGlmIChzdHlsZSA9PT0gIkQiKSB7CiAgICAgICAgYXJyYXkuYXJyYXlkZWYuZGlzcGxheXN0eWxlID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKGFsaWduICE9IG51bGwpIHsKICAgICAgICBhcnJheS5hcnJheWRlZi5jb2x1bW5hbGlnbiA9IGFsaWduOwogICAgICB9CgogICAgICB0aGlzLlB1c2goYXJyYXkpOwogICAgfSwKICAgIEVudHJ5OiBmdW5jdGlvbiBFbnRyeShuYW1lKSB7CiAgICAgIHRoaXMuUHVzaChTVEFDS0lURU0uY2VsbCgpLldpdGgoewogICAgICAgIGlzRW50cnk6IHRydWUsCiAgICAgICAgbmFtZTogbmFtZQogICAgICB9KSk7CgogICAgICBpZiAodGhpcy5zdGFjay5Ub3AoKS5pc0Nhc2VzKSB7CiAgICAgICAgdmFyIHN0cmluZyA9IHRoaXMuc3RyaW5nOwogICAgICAgIHZhciBicmFjZXMgPSAwLAogICAgICAgICAgICBpID0gdGhpcy5pLAogICAgICAgICAgICBtID0gc3RyaW5nLmxlbmd0aDsKCiAgICAgICAgd2hpbGUgKGkgPCBtKSB7CiAgICAgICAgICB2YXIgYyA9IHN0cmluZy5jaGFyQXQoaSk7CgogICAgICAgICAgaWYgKGMgPT09ICJ7IikgewogICAgICAgICAgICBicmFjZXMrKzsKICAgICAgICAgICAgaSsrOwogICAgICAgICAgfSBlbHNlIGlmIChjID09PSAifSIpIHsKICAgICAgICAgICAgaWYgKGJyYWNlcyA9PT0gMCkgewogICAgICAgICAgICAgIG0gPSAwOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGJyYWNlcy0tOwogICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChjID09PSAiJiIgJiYgYnJhY2VzID09PSAwKSB7CiAgICAgICAgICAgIFRFWC5FcnJvcihbIkV4dHJhQWxpZ25UYWIiLCAiRXh0cmEgYWxpZ25tZW50IHRhYiBpbiBcXGNhc2VzIHRleHQiXSk7CiAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICJcXCIpIHsKICAgICAgICAgICAgaWYgKHN0cmluZy5zdWJzdHIoaSkubWF0Y2goL14oKFxcY3IpW15hLXpBLVpdfFxcXFwpLykpIHsKICAgICAgICAgICAgICBtID0gMDsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpICs9IDI7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGkrKzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciB0ZXh0ID0gc3RyaW5nLnN1YnN0cih0aGlzLmksIGkgLSB0aGlzLmkpOwoKICAgICAgICBpZiAoIXRleHQubWF0Y2goL15ccypcXHRleHRbXmEtekEtWl0vKSkgewogICAgICAgICAgdGhpcy5QdXNoLmFwcGx5KHRoaXMsIHRoaXMuSW50ZXJuYWxNYXRoKHRleHQsIDApKTsKICAgICAgICAgIHRoaXMuaSA9IGk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgQ3I6IGZ1bmN0aW9uIENyKG5hbWUpIHsKICAgICAgdGhpcy5QdXNoKFNUQUNLSVRFTS5jZWxsKCkuV2l0aCh7CiAgICAgICAgaXNDUjogdHJ1ZSwKICAgICAgICBuYW1lOiBuYW1lCiAgICAgIH0pKTsKICAgIH0sCiAgICBDckxhVGVYOiBmdW5jdGlvbiBDckxhVGVYKG5hbWUpIHsKICAgICAgdmFyIG47CgogICAgICBpZiAodGhpcy5zdHJpbmcuY2hhckF0KHRoaXMuaSkgPT09ICJbIikgewogICAgICAgIG4gPSB0aGlzLkdldEJyYWNrZXRzKG5hbWUsICIiKS5yZXBsYWNlKC8gL2csICIiKS5yZXBsYWNlKC8sLywgIi4iKTsKCiAgICAgICAgaWYgKG4gJiYgIXRoaXMubWF0Y2hEaW1lbihuKSkgewogICAgICAgICAgVEVYLkVycm9yKFsiQnJhY2tldE11c3RCZURpbWVuc2lvbiIsICJCcmFja2V0IGFyZ3VtZW50IHRvICUxIG11c3QgYmUgYSBkaW1lbnNpb24iLCBuYW1lXSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLlB1c2goU1RBQ0tJVEVNLmNlbGwoKS5XaXRoKHsKICAgICAgICBpc0NSOiB0cnVlLAogICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgbGluZWJyZWFrOiB0cnVlCiAgICAgIH0pKTsKICAgICAgdmFyIHRvcCA9IHRoaXMuc3RhY2suVG9wKCk7CgogICAgICBpZiAodG9wLmlzYShTVEFDS0lURU0uYXJyYXkpKSB7CiAgICAgICAgaWYgKG4gJiYgdG9wLmFycmF5ZGVmLnJvd3NwYWNpbmcpIHsKICAgICAgICAgIHZhciByb3dzID0gdG9wLmFycmF5ZGVmLnJvd3NwYWNpbmcuc3BsaXQoLyAvKTsKCiAgICAgICAgICBpZiAoIXRvcC5yb3dzcGFjaW5nKSB7CiAgICAgICAgICAgIHRvcC5yb3dzcGFjaW5nID0gdGhpcy5kaW1lbjJlbShyb3dzWzBdKTsKICAgICAgICAgIH0KCiAgICAgICAgICB3aGlsZSAocm93cy5sZW5ndGggPCB0b3AudGFibGUubGVuZ3RoKSB7CiAgICAgICAgICAgIHJvd3MucHVzaCh0aGlzLkVtKHRvcC5yb3dzcGFjaW5nKSk7CiAgICAgICAgICB9CgogICAgICAgICAgcm93c1t0b3AudGFibGUubGVuZ3RoIC0gMV0gPSB0aGlzLkVtKE1hdGgubWF4KDAsIHRvcC5yb3dzcGFjaW5nICsgdGhpcy5kaW1lbjJlbShuKSkpOwogICAgICAgICAgdG9wLmFycmF5ZGVmLnJvd3NwYWNpbmcgPSByb3dzLmpvaW4oJyAnKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKG4pIHsKICAgICAgICAgIHRoaXMuUHVzaChNTUwubXNwYWNlKCkuV2l0aCh7CiAgICAgICAgICAgIGRlcHRoOiBuCiAgICAgICAgICB9KSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLlB1c2goTU1MLm1zcGFjZSgpLldpdGgoewogICAgICAgICAgbGluZWJyZWFrOiBNTUwuTElORUJSRUFLLk5FV0xJTkUKICAgICAgICB9KSk7CiAgICAgIH0KICAgIH0sCiAgICBlbVBlckluY2g6IDcuMiwKICAgIHB4UGVySW5jaDogNzIsCiAgICBtYXRjaERpbWVuOiBmdW5jdGlvbiBtYXRjaERpbWVuKGRpbSkgewogICAgICByZXR1cm4gZGltLm1hdGNoKC9eKC0/KD86XC5cZCt8XGQrKD86XC5cZCopPykpKHB4fHB0fGVtfGV4fG11fHBjfGlufG1tfGNtKSQvKTsKICAgIH0sCiAgICBkaW1lbjJlbTogZnVuY3Rpb24gZGltZW4yZW0oZGltKSB7CiAgICAgIHZhciBtYXRjaCA9IHRoaXMubWF0Y2hEaW1lbihkaW0pOwogICAgICB2YXIgbSA9IHBhcnNlRmxvYXQobWF0Y2hbMV0gfHwgIjEiKSwKICAgICAgICAgIHVuaXQgPSBtYXRjaFsyXTsKCiAgICAgIGlmICh1bml0ID09PSAiZW0iKSB7CiAgICAgICAgcmV0dXJuIG07CiAgICAgIH0KCiAgICAgIGlmICh1bml0ID09PSAiZXgiKSB7CiAgICAgICAgcmV0dXJuIG0gKiAuNDM7CiAgICAgIH0KCiAgICAgIGlmICh1bml0ID09PSAicHQiKSB7CiAgICAgICAgcmV0dXJuIG0gLyAxMDsKICAgICAgfSAvLyAxMCBwdCB0byBhbiBlbQoKCiAgICAgIGlmICh1bml0ID09PSAicGMiKSB7CiAgICAgICAgcmV0dXJuIG0gKiAxLjI7CiAgICAgIH0gLy8gMTIgcHQgdG8gYSBwYwoKCiAgICAgIGlmICh1bml0ID09PSAicHgiKSB7CiAgICAgICAgcmV0dXJuIG0gKiB0aGlzLmVtUGVySW5jaCAvIHRoaXMucHhQZXJJbmNoOwogICAgICB9CgogICAgICBpZiAodW5pdCA9PT0gImluIikgewogICAgICAgIHJldHVybiBtICogdGhpcy5lbVBlckluY2g7CiAgICAgIH0KCiAgICAgIGlmICh1bml0ID09PSAiY20iKSB7CiAgICAgICAgcmV0dXJuIG0gKiB0aGlzLmVtUGVySW5jaCAvIDIuNTQ7CiAgICAgIH0gLy8gMi41NCBjbSB0byBhbiBpbmNoCgoKICAgICAgaWYgKHVuaXQgPT09ICJtbSIpIHsKICAgICAgICByZXR1cm4gbSAqIHRoaXMuZW1QZXJJbmNoIC8gMjUuNDsKICAgICAgfSAvLyAxMCBtbSB0byBhIGNtCgoKICAgICAgaWYgKHVuaXQgPT09ICJtdSIpIHsKICAgICAgICByZXR1cm4gbSAvIDE4OwogICAgICB9CgogICAgICByZXR1cm4gMDsKICAgIH0sCiAgICBFbTogZnVuY3Rpb24gRW0obSkgewogICAgICBpZiAoTWF0aC5hYnMobSkgPCAuMDAwNikgewogICAgICAgIHJldHVybiAiMGVtIjsKICAgICAgfQoKICAgICAgcmV0dXJuIG0udG9GaXhlZCgzKS5yZXBsYWNlKC9cLj8wKyQvLCAiIikgKyAiZW0iOwogICAgfSwKICAgIEhMaW5lOiBmdW5jdGlvbiBITGluZShuYW1lLCBzdHlsZSkgewogICAgICBpZiAoc3R5bGUgPT0gbnVsbCkgewogICAgICAgIHN0eWxlID0gInNvbGlkIjsKICAgICAgfQoKICAgICAgdmFyIHRvcCA9IHRoaXMuc3RhY2suVG9wKCk7CgogICAgICBpZiAoIXRvcC5pc2EoU1RBQ0tJVEVNLmFycmF5KSB8fCB0b3AuZGF0YS5sZW5ndGgpIHsKICAgICAgICBURVguRXJyb3IoWyJNaXNwbGFjZWQiLCAiTWlzcGxhY2VkICUxIiwgbmFtZV0pOwogICAgICB9CgogICAgICBpZiAodG9wLnRhYmxlLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdG9wLmZyYW1lLnB1c2goInRvcCIpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBsaW5lcyA9IHRvcC5hcnJheWRlZi5yb3dsaW5lcyA/IHRvcC5hcnJheWRlZi5yb3dsaW5lcy5zcGxpdCgvIC8pIDogW107CgogICAgICAgIHdoaWxlIChsaW5lcy5sZW5ndGggPCB0b3AudGFibGUubGVuZ3RoKSB7CiAgICAgICAgICBsaW5lcy5wdXNoKCJub25lIik7CiAgICAgICAgfQoKICAgICAgICBsaW5lc1t0b3AudGFibGUubGVuZ3RoIC0gMV0gPSBzdHlsZTsKICAgICAgICB0b3AuYXJyYXlkZWYucm93bGluZXMgPSBsaW5lcy5qb2luKCcgJyk7CiAgICAgIH0KICAgIH0sCiAgICBIRmlsbDogZnVuY3Rpb24gSEZpbGwobmFtZSkgewogICAgICB2YXIgdG9wID0gdGhpcy5zdGFjay5Ub3AoKTsKICAgICAgaWYgKHRvcC5pc2EoU1RBQ0tJVEVNLmFycmF5KSkgdG9wLmhmaWxsLnB1c2godG9wLmRhdGEubGVuZ3RoKTtlbHNlIFRFWC5FcnJvcihbIlVuc3VwcG9ydGVkSEZpbGwiLCAiVW5zdXBwb3J0ZWQgdXNlIG9mICUxIiwgbmFtZV0pOwogICAgfSwKCiAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLwoKICAgIC8qCiAgICAgKiAgIExhVGVYIGVudmlyb25tZW50cwogICAgICovCiAgICBCZWdpbkVuZDogZnVuY3Rpb24gQmVnaW5FbmQobmFtZSkgewogICAgICB2YXIgZW52ID0gdGhpcy5HZXRBcmd1bWVudChuYW1lKSwKICAgICAgICAgIGlzRW5kID0gZmFsc2U7CgogICAgICBpZiAoZW52Lm1hdGNoKC9eXFxlbmRcXC8pKSB7CiAgICAgICAgaXNFbmQgPSB0cnVlOwogICAgICAgIGVudiA9IGVudi5zdWJzdHIoNSk7CiAgICAgIH0gLy8gc3BlY2lhbCBcZW5ke30gZm9yIFxuZXdlbnZpcm9ubWVudCBlbnZpcm9ubWVudHMKCgogICAgICBpZiAoZW52Lm1hdGNoKC9cXC9pKSkgewogICAgICAgIFRFWC5FcnJvcihbIkludmFsaWRFbnYiLCAiSW52YWxpZCBlbnZpcm9ubWVudCBuYW1lICclMSciLCBlbnZdKTsKICAgICAgfQoKICAgICAgdmFyIGNtZCA9IHRoaXMuZW52RmluZE5hbWUoZW52KTsKCiAgICAgIGlmICghY21kKSB7CiAgICAgICAgVEVYLkVycm9yKFsiVW5rbm93bkVudiIsICJVbmtub3duIGVudmlyb25tZW50ICclMSciLCBlbnZdKTsKICAgICAgfQoKICAgICAgaWYgKCEoY21kIGluc3RhbmNlb2YgQXJyYXkpKSB7CiAgICAgICAgY21kID0gW2NtZF07CiAgICAgIH0KCiAgICAgIHZhciBlbmQgPSBjbWRbMV0gaW5zdGFuY2VvZiBBcnJheSA/IGNtZFsxXVswXSA6IGNtZFsxXTsKICAgICAgdmFyIG1tbCA9IFNUQUNLSVRFTS5iZWdpbigpLldpdGgoewogICAgICAgIG5hbWU6IGVudiwKICAgICAgICBlbmQ6IGVuZCwKICAgICAgICBwYXJzZTogdGhpcwogICAgICB9KTsKCiAgICAgIGlmIChuYW1lID09PSAiXFxlbmQiKSB7CiAgICAgICAgaWYgKCFpc0VuZCAmJiBjbWRbMV0gaW5zdGFuY2VvZiBBcnJheSAmJiB0aGlzW2NtZFsxXVsxXV0pIHsKICAgICAgICAgIG1tbCA9IHRoaXNbY21kWzFdWzFdXS5hcHBseSh0aGlzLCBbbW1sXS5jb25jYXQoY21kLnNsaWNlKDIpKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1tbCA9IFNUQUNLSVRFTS5lbmQoKS5XaXRoKHsKICAgICAgICAgICAgbmFtZTogZW52CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKCsrdGhpcy5tYWNyb0NvdW50ID4gVEVYLmNvbmZpZy5NQVhNQUNST1MpIHsKICAgICAgICAgIFRFWC5FcnJvcihbIk1heE1hY3JvU3ViMiIsICJNYXRoSmF4IG1heGltdW0gc3Vic3RpdHV0aW9uIGNvdW50IGV4Y2VlZGVkOyAiICsgImlzIHRoZXJlIGEgcmVjdXJzaXZlIGxhdGV4IGVudmlyb25tZW50PyJdKTsKICAgICAgICB9CgogICAgICAgIGlmIChjbWRbMF0gJiYgdGhpc1tjbWRbMF1dKSB7CiAgICAgICAgICBtbWwgPSB0aGlzW2NtZFswXV0uYXBwbHkodGhpcywgW21tbF0uY29uY2F0KGNtZC5zbGljZSgyKSkpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5QdXNoKG1tbCk7CiAgICB9LAogICAgZW52RmluZE5hbWU6IGZ1bmN0aW9uIGVudkZpbmROYW1lKG5hbWUpIHsKICAgICAgcmV0dXJuIFRFWERFRi5lbnZpcm9ubWVudFtuYW1lXTsKICAgIH0sCiAgICBFcXVhdGlvbjogZnVuY3Rpb24gRXF1YXRpb24oYmVnaW4sIHJvdykgewogICAgICByZXR1cm4gcm93OwogICAgfSwKICAgIEV4dGVuc2lvbkVudjogZnVuY3Rpb24gRXh0ZW5zaW9uRW52KGJlZ2luLCBmaWxlKSB7CiAgICAgIHRoaXMuRXh0ZW5zaW9uKGJlZ2luLm5hbWUsIGZpbGUsICJlbnZpcm9ubWVudCIpOwogICAgfSwKICAgIEFycmF5OiBmdW5jdGlvbiBBcnJheShiZWdpbiwgb3BlbiwgY2xvc2UsIGFsaWduLCBzcGFjaW5nLCB2c3BhY2luZywgc3R5bGUsIHJhZ2dlZEhlaWdodCkgewogICAgICBpZiAoIWFsaWduKSB7CiAgICAgICAgYWxpZ24gPSB0aGlzLkdldEFyZ3VtZW50KCJcXGJlZ2lueyIgKyBiZWdpbi5uYW1lICsgIn0iKTsKICAgICAgfQoKICAgICAgdmFyIGxpbmVzID0gKCJjIiArIGFsaWduKS5yZXBsYWNlKC9bXmNscnw6XS9nLCAnJykucmVwbGFjZSgvW158Ol0oW3w6XSkrL2csICckMScpOwogICAgICBhbGlnbiA9IGFsaWduLnJlcGxhY2UoL1teY2xyXS9nLCAnJykuc3BsaXQoJycpLmpvaW4oJyAnKTsKICAgICAgYWxpZ24gPSBhbGlnbi5yZXBsYWNlKC9sL2csICdsZWZ0JykucmVwbGFjZSgvci9nLCAncmlnaHQnKS5yZXBsYWNlKC9jL2csICdjZW50ZXInKTsKICAgICAgdmFyIGFycmF5ID0gU1RBQ0tJVEVNLmFycmF5KCkuV2l0aCh7CiAgICAgICAgYXJyYXlkZWY6IHsKICAgICAgICAgIGNvbHVtbmFsaWduOiBhbGlnbiwKICAgICAgICAgIGNvbHVtbnNwYWNpbmc6IHNwYWNpbmcgfHwgIjFlbSIsCiAgICAgICAgICByb3dzcGFjaW5nOiB2c3BhY2luZyB8fCAiNHB0IgogICAgICAgIH0KICAgICAgfSk7CgogICAgICBpZiAobGluZXMubWF0Y2goL1t8Ol0vKSkgewogICAgICAgIGlmIChsaW5lcy5jaGFyQXQoMCkubWF0Y2goL1t8Ol0vKSkgewogICAgICAgICAgYXJyYXkuZnJhbWUucHVzaCgibGVmdCIpOwogICAgICAgICAgYXJyYXkuZnJhbWUuZGFzaGVkID0gbGluZXMuY2hhckF0KDApID09PSAiOiI7CiAgICAgICAgfQoKICAgICAgICBpZiAobGluZXMuY2hhckF0KGxpbmVzLmxlbmd0aCAtIDEpLm1hdGNoKC9bfDpdLykpIHsKICAgICAgICAgIGFycmF5LmZyYW1lLnB1c2goInJpZ2h0Iik7CiAgICAgICAgfQoKICAgICAgICBsaW5lcyA9IGxpbmVzLnN1YnN0cigxLCBsaW5lcy5sZW5ndGggLSAyKTsKICAgICAgICBhcnJheS5hcnJheWRlZi5jb2x1bW5saW5lcyA9IGxpbmVzLnNwbGl0KCcnKS5qb2luKCcgJykucmVwbGFjZSgvW158OiBdL2csICdub25lJykucmVwbGFjZSgvXHwvZywgJ3NvbGlkJykucmVwbGFjZSgvOi9nLCAnZGFzaGVkJyk7CiAgICAgIH0KCiAgICAgIGlmIChvcGVuKSB7CiAgICAgICAgYXJyYXkub3BlbiA9IHRoaXMuY29udmVydERlbGltaXRlcihvcGVuKTsKICAgICAgfQoKICAgICAgaWYgKGNsb3NlKSB7CiAgICAgICAgYXJyYXkuY2xvc2UgPSB0aGlzLmNvbnZlcnREZWxpbWl0ZXIoY2xvc2UpOwogICAgICB9CgogICAgICBpZiAoc3R5bGUgPT09ICJEIikgewogICAgICAgIGFycmF5LmFycmF5ZGVmLmRpc3BsYXlzdHlsZSA9IHRydWU7CiAgICAgIH0gZWxzZSBpZiAoc3R5bGUpIHsKICAgICAgICBhcnJheS5hcnJheWRlZi5kaXNwbGF5c3R5bGUgPSBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKHN0eWxlID09PSAiUyIpIHsKICAgICAgICBhcnJheS5hcnJheWRlZi5zY3JpcHRsZXZlbCA9IDE7CiAgICAgIH0gLy8gRklYTUU6IHNob3VsZCB1c2UgbXN0eWxlPwoKCiAgICAgIGlmIChyYWdnZWRIZWlnaHQpIHsKICAgICAgICBhcnJheS5hcnJheWRlZi51c2VIZWlnaHQgPSBmYWxzZTsKICAgICAgfQoKICAgICAgdGhpcy5QdXNoKGJlZ2luKTsKICAgICAgcmV0dXJuIGFycmF5OwogICAgfSwKICAgIEFsaWduZWRBcnJheTogZnVuY3Rpb24gQWxpZ25lZEFycmF5KGJlZ2luKSB7CiAgICAgIHZhciBhbGlnbiA9IHRoaXMuR2V0QnJhY2tldHMoIlxcYmVnaW57IiArIGJlZ2luLm5hbWUgKyAifSIpOwogICAgICByZXR1cm4gdGhpcy5zZXRBcnJheUFsaWduKHRoaXMuQXJyYXkuYXBwbHkodGhpcywgYXJndW1lbnRzKSwgYWxpZ24pOwogICAgfSwKICAgIHNldEFycmF5QWxpZ246IGZ1bmN0aW9uIHNldEFycmF5QWxpZ24oYXJyYXksIGFsaWduKSB7CiAgICAgIGFsaWduID0gdGhpcy50cmltU3BhY2VzKGFsaWduIHx8ICIiKTsKCiAgICAgIGlmIChhbGlnbiA9PT0gInQiKSB7CiAgICAgICAgYXJyYXkuYXJyYXlkZWYuYWxpZ24gPSAiYmFzZWxpbmUgMSI7CiAgICAgIH0gZWxzZSBpZiAoYWxpZ24gPT09ICJiIikgewogICAgICAgIGFycmF5LmFycmF5ZGVmLmFsaWduID0gImJhc2VsaW5lIC0xIjsKICAgICAgfSBlbHNlIGlmIChhbGlnbiA9PT0gImMiKSB7CiAgICAgICAgYXJyYXkuYXJyYXlkZWYuYWxpZ24gPSAiY2VudGVyIjsKICAgICAgfSBlbHNlIGlmIChhbGlnbikgewogICAgICAgIGFycmF5LmFycmF5ZGVmLmFsaWduID0gYWxpZ247CiAgICAgIH0gLy8gRklYTUU6IHNob3VsZCBiZSBhbiBlcnJvcj8KCgogICAgICByZXR1cm4gYXJyYXk7CiAgICB9LAoKICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogICAgLyoKICAgICAqICAgU3RyaW5nIGhhbmRsaW5nIHJvdXRpbmVzCiAgICAgKi8KCiAgICAvKgogICAgICogIENvbnZlcnQgZGVsaW1pdGVyIHRvIGNoYXJhY3RlcgogICAgICovCiAgICBjb252ZXJ0RGVsaW1pdGVyOiBmdW5jdGlvbiBjb252ZXJ0RGVsaW1pdGVyKGMpIHsKICAgICAgaWYgKGMpIHsKICAgICAgICBjID0gVEVYREVGLmRlbGltaXRlcltjXTsKICAgICAgfQoKICAgICAgaWYgKGMgPT0gbnVsbCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICBpZiAoYyBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgYyA9IGNbMF07CiAgICAgIH0KCiAgICAgIGlmIChjLmxlbmd0aCA9PT0gNCkgewogICAgICAgIGMgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGMsIDE2KSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjOwogICAgfSwKCiAgICAvKgogICAgICogIFRyaW0gc3BhY2VzIGZyb20gYSBzdHJpbmcKICAgICAqLwogICAgdHJpbVNwYWNlczogZnVuY3Rpb24gdHJpbVNwYWNlcyh0ZXh0KSB7CiAgICAgIGlmICh0eXBlb2YgdGV4dCAhPSAnc3RyaW5nJykgewogICAgICAgIHJldHVybiB0ZXh0OwogICAgICB9CgogICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKC9eXHMrfFxzKyQvZywgJycpOwogICAgfSwKCiAgICAvKgogICAgICogICBDaGVjayBpZiB0aGUgbmV4dCBjaGFyYWN0ZXIgaXMgYSBzcGFjZQogICAgICovCiAgICBuZXh0SXNTcGFjZTogZnVuY3Rpb24gbmV4dElzU3BhY2UoKSB7CiAgICAgIHJldHVybiB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5pKS5tYXRjaCgvXHMvKTsKICAgIH0sCgogICAgLyoKICAgICAqICBHZXQgdGhlIG5leHQgbm9uLXNwYWNlIGNoYXJhY3RlcgogICAgICovCiAgICBHZXROZXh0OiBmdW5jdGlvbiBHZXROZXh0KCkgewogICAgICB3aGlsZSAodGhpcy5uZXh0SXNTcGFjZSgpKSB7CiAgICAgICAgdGhpcy5pKys7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5pKTsKICAgIH0sCgogICAgLyoKICAgICAqICBHZXQgYW5kIHJldHVybiBhIGNvbnRyb2wtc2VxdWVuY2UgbmFtZQogICAgICovCiAgICBHZXRDUzogZnVuY3Rpb24gR2V0Q1MoKSB7CiAgICAgIHZhciBDUyA9IHRoaXMuc3RyaW5nLnNsaWNlKHRoaXMuaSkubWF0Y2goL14oW2Etel0rfC4pID8vaSk7CgogICAgICBpZiAoQ1MpIHsKICAgICAgICB0aGlzLmkgKz0gQ1NbMV0ubGVuZ3RoOwogICAgICAgIHJldHVybiBDU1sxXTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmkrKzsKICAgICAgICByZXR1cm4gIiAiOwogICAgICB9CiAgICB9LAoKICAgIC8qCiAgICAgKiAgR2V0IGFuZCByZXR1cm4gYSBUZVggYXJndW1lbnQgKGVpdGhlciBhIHNpbmdsZSBjaGFyYWN0ZXIgb3IgY29udHJvbCBzZXF1ZW5jZSwKICAgICAqICBvciB0aGUgY29udGVudHMgb2YgdGhlIG5leHQgc2V0IG9mIGJyYWNlcykuCiAgICAgKi8KICAgIEdldEFyZ3VtZW50OiBmdW5jdGlvbiBHZXRBcmd1bWVudChuYW1lLCBub25lT0spIHsKICAgICAgc3dpdGNoICh0aGlzLkdldE5leHQoKSkgewogICAgICAgIGNhc2UgIiI6CiAgICAgICAgICBpZiAoIW5vbmVPSykgewogICAgICAgICAgICBURVguRXJyb3IoWyJNaXNzaW5nQXJnRm9yIiwgIk1pc3NpbmcgYXJndW1lbnQgZm9yICUxIiwgbmFtZV0pOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBudWxsOwoKICAgICAgICBjYXNlICd9JzoKICAgICAgICAgIGlmICghbm9uZU9LKSB7CiAgICAgICAgICAgIFRFWC5FcnJvcihbIkV4dHJhQ2xvc2VNaXNzaW5nT3BlbiIsICJFeHRyYSBjbG9zZSBicmFjZSBvciBtaXNzaW5nIG9wZW4gYnJhY2UiXSk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIG51bGw7CgogICAgICAgIGNhc2UgJ1xcJzoKICAgICAgICAgIHRoaXMuaSsrOwogICAgICAgICAgcmV0dXJuICJcXCIgKyB0aGlzLkdldENTKCk7CgogICAgICAgIGNhc2UgJ3snOgogICAgICAgICAgdmFyIGogPSArK3RoaXMuaSwKICAgICAgICAgICAgICBwYXJlbnMgPSAxOwoKICAgICAgICAgIHdoaWxlICh0aGlzLmkgPCB0aGlzLnN0cmluZy5sZW5ndGgpIHsKICAgICAgICAgICAgc3dpdGNoICh0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5pKyspKSB7CiAgICAgICAgICAgICAgY2FzZSAnXFwnOgogICAgICAgICAgICAgICAgdGhpcy5pKys7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAneyc6CiAgICAgICAgICAgICAgICBwYXJlbnMrKzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlICd9JzoKICAgICAgICAgICAgICAgIGlmICgtLXBhcmVucyA9PSAwKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmluZy5zbGljZShqLCB0aGlzLmkgLSAxKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIFRFWC5FcnJvcihbIk1pc3NpbmdDbG9zZUJyYWNlIiwgIk1pc3NpbmcgY2xvc2UgYnJhY2UiXSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLmkrKyk7CiAgICB9LAoKICAgIC8qCiAgICAgKiAgR2V0IGFuIG9wdGlvbmFsIExhVGVYIGFyZ3VtZW50IGluIGJyYWNrZXRzCiAgICAgKi8KICAgIEdldEJyYWNrZXRzOiBmdW5jdGlvbiBHZXRCcmFja2V0cyhuYW1lLCBkZWYpIHsKICAgICAgaWYgKHRoaXMuR2V0TmV4dCgpICE9ICdbJykgewogICAgICAgIHJldHVybiBkZWY7CiAgICAgIH0KCiAgICAgIDsKICAgICAgdmFyIGogPSArK3RoaXMuaSwKICAgICAgICAgIHBhcmVucyA9IDA7CgogICAgICB3aGlsZSAodGhpcy5pIDwgdGhpcy5zdHJpbmcubGVuZ3RoKSB7CiAgICAgICAgc3dpdGNoICh0aGlzLnN0cmluZy5jaGFyQXQodGhpcy5pKyspKSB7CiAgICAgICAgICBjYXNlICd7JzoKICAgICAgICAgICAgcGFyZW5zKys7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ1xcJzoKICAgICAgICAgICAgdGhpcy5pKys7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ30nOgogICAgICAgICAgICBpZiAocGFyZW5zLS0gPD0gMCkgewogICAgICAgICAgICAgIFRFWC5FcnJvcihbIkV4dHJhQ2xvc2VMb29raW5nIiwgIkV4dHJhIGNsb3NlIGJyYWNlIHdoaWxlIGxvb2tpbmcgZm9yICUxIiwgIiddJyJdKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAnXSc6CiAgICAgICAgICAgIGlmIChwYXJlbnMgPT0gMCkgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cmluZy5zbGljZShqLCB0aGlzLmkgLSAxKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CgogICAgICBURVguRXJyb3IoWyJNaXNzaW5nQ2xvc2VCcmFja2V0IiwgIkNvdWxkbid0IGZpbmQgY2xvc2luZyAnXScgZm9yIGFyZ3VtZW50IHRvICUxIiwgbmFtZV0pOwogICAgfSwKCiAgICAvKgogICAgICogIEdldCB0aGUgbmFtZSBvZiBhIGRlbGltaXRlciAoY2hlY2sgaXQgaW4gdGhlIGRlbGltaXRlciBsaXN0KS4KICAgICAqLwogICAgR2V0RGVsaW1pdGVyOiBmdW5jdGlvbiBHZXREZWxpbWl0ZXIobmFtZSwgYnJhY2VPSykgewogICAgICB3aGlsZSAodGhpcy5uZXh0SXNTcGFjZSgpKSB7CiAgICAgICAgdGhpcy5pKys7CiAgICAgIH0KCiAgICAgIHZhciBjID0gdGhpcy5zdHJpbmcuY2hhckF0KHRoaXMuaSk7CiAgICAgIHRoaXMuaSsrOwoKICAgICAgaWYgKHRoaXMuaSA8PSB0aGlzLnN0cmluZy5sZW5ndGgpIHsKICAgICAgICBpZiAoYyA9PSAiXFwiKSB7CiAgICAgICAgICBjICs9IHRoaXMuR2V0Q1MobmFtZSk7CiAgICAgICAgfSBlbHNlIGlmIChjID09PSAieyIgJiYgYnJhY2VPSykgewogICAgICAgICAgdGhpcy5pLS07CiAgICAgICAgICBjID0gdGhpcy5HZXRBcmd1bWVudChuYW1lKTsKICAgICAgICB9CgogICAgICAgIGlmIChURVhERUYuZGVsaW1pdGVyW2NdICE9IG51bGwpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnREZWxpbWl0ZXIoYyk7CiAgICAgICAgfQogICAgICB9CgogICAgICBURVguRXJyb3IoWyJNaXNzaW5nT3JVbnJlY29nbml6ZWREZWxpbSIsICJNaXNzaW5nIG9yIHVucmVjb2duaXplZCBkZWxpbWl0ZXIgZm9yICUxIiwgbmFtZV0pOwogICAgfSwKCiAgICAvKgogICAgICogIEdldCBhIGRpbWVuc2lvbiAoaW5jbHVkaW5nIGl0cyB1bml0cykuCiAgICAgKi8KICAgIEdldERpbWVuOiBmdW5jdGlvbiBHZXREaW1lbihuYW1lKSB7CiAgICAgIHZhciBkaW1lbjsKCiAgICAgIGlmICh0aGlzLm5leHRJc1NwYWNlKCkpIHsKICAgICAgICB0aGlzLmkrKzsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLmkpID09ICd7JykgewogICAgICAgIGRpbWVuID0gdGhpcy5HZXRBcmd1bWVudChuYW1lKTsKCiAgICAgICAgaWYgKGRpbWVuLm1hdGNoKC9eXHMqKFstK10/KFsuLF1cZCt8XGQrKFsuLF1cZCopPykpXHMqKHB0fGVtfGV4fG11fHB4fG1tfGNtfGlufHBjKVxzKiQvKSkgewogICAgICAgICAgcmV0dXJuIGRpbWVuLnJlcGxhY2UoLyAvZywgIiIpLnJlcGxhY2UoLywvLCAiLiIpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBkaW1lbiA9IHRoaXMuc3RyaW5nLnNsaWNlKHRoaXMuaSk7CiAgICAgICAgdmFyIG1hdGNoID0gZGltZW4ubWF0Y2goL15ccyooKFstK10/KFsuLF1cZCt8XGQrKFsuLF1cZCopPykpXHMqKHB0fGVtfGV4fG11fHB4fG1tfGNtfGlufHBjKSkgPy8pOwoKICAgICAgICBpZiAobWF0Y2gpIHsKICAgICAgICAgIHRoaXMuaSArPSBtYXRjaFswXS5sZW5ndGg7CiAgICAgICAgICByZXR1cm4gbWF0Y2hbMV0ucmVwbGFjZSgvIC9nLCAiIikucmVwbGFjZSgvLC8sICIuIik7CiAgICAgICAgfQogICAgICB9CgogICAgICBURVguRXJyb3IoWyJNaXNzaW5nRGltT3JVbml0cyIsICJNaXNzaW5nIGRpbWVuc2lvbiBvciBpdHMgdW5pdHMgZm9yICUxIiwgbmFtZV0pOwogICAgfSwKCiAgICAvKgogICAgICogIEdldCBldmVyeXRoaW5nIHVwIHRvIHRoZSBnaXZlbiBjb250cm9sIHNlcXVlbmNlICh0b2tlbikKICAgICAqLwogICAgR2V0VXBUbzogZnVuY3Rpb24gR2V0VXBUbyhuYW1lLCB0b2tlbikgewogICAgICB3aGlsZSAodGhpcy5uZXh0SXNTcGFjZSgpKSB7CiAgICAgICAgdGhpcy5pKys7CiAgICAgIH0KCiAgICAgIHZhciBqID0gdGhpcy5pLAogICAgICAgICAgaywKICAgICAgICAgIGMsCiAgICAgICAgICBwYXJlbnMgPSAwOwoKICAgICAgd2hpbGUgKHRoaXMuaSA8IHRoaXMuc3RyaW5nLmxlbmd0aCkgewogICAgICAgIGsgPSB0aGlzLmk7CiAgICAgICAgYyA9IHRoaXMuc3RyaW5nLmNoYXJBdCh0aGlzLmkrKyk7CgogICAgICAgIHN3aXRjaCAoYykgewogICAgICAgICAgY2FzZSAnXFwnOgogICAgICAgICAgICBjICs9IHRoaXMuR2V0Q1MoKTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAneyc6CiAgICAgICAgICAgIHBhcmVucysrOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICd9JzoKICAgICAgICAgICAgaWYgKHBhcmVucyA9PSAwKSB7CiAgICAgICAgICAgICAgVEVYLkVycm9yKFsiRXh0cmFDbG9zZUxvb2tpbmciLCAiRXh0cmEgY2xvc2UgYnJhY2Ugd2hpbGUgbG9va2luZyBmb3IgJTEiLCB0b2tlbl0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBwYXJlbnMtLTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBpZiAocGFyZW5zID09IDAgJiYgYyA9PSB0b2tlbikgewogICAgICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nLnNsaWNlKGosIGspOwogICAgICAgIH0KICAgICAgfQoKICAgICAgVEVYLkVycm9yKFsiVG9rZW5Ob3RGb3VuZEZvckNvbW1hbmQiLCAiQ291bGRuJ3QgZmluZCAlMSBmb3IgJTIiLCB0b2tlbiwgbmFtZV0pOwogICAgfSwKCiAgICAvKgogICAgICogIFBhcnNlIHZhcmlvdXMgc3Vic3RyaW5ncwogICAgICovCiAgICBQYXJzZUFyZzogZnVuY3Rpb24gUGFyc2VBcmcobmFtZSkgewogICAgICByZXR1cm4gVEVYLlBhcnNlKHRoaXMuR2V0QXJndW1lbnQobmFtZSksIHRoaXMuc3RhY2suZW52KS5tbWwoKTsKICAgIH0sCiAgICBQYXJzZVVwVG86IGZ1bmN0aW9uIFBhcnNlVXBUbyhuYW1lLCB0b2tlbikgewogICAgICByZXR1cm4gVEVYLlBhcnNlKHRoaXMuR2V0VXBUbyhuYW1lLCB0b2tlbiksIHRoaXMuc3RhY2suZW52KS5tbWwoKTsKICAgIH0sCgogICAgLyoKICAgICAqICBCcmVhayB1cCBhIHN0cmluZyBpbnRvIHRleHQgYW5kIG1hdGggYmxvY2tzCiAgICAgKi8KICAgIEludGVybmFsTWF0aDogZnVuY3Rpb24gSW50ZXJuYWxNYXRoKHRleHQsIGxldmVsKSB7CiAgICAgIHZhciBkZWYgPSB0aGlzLnN0YWNrLmVudi5mb250ID8gewogICAgICAgIG1hdGh2YXJpYW50OiB0aGlzLnN0YWNrLmVudi5mb250CiAgICAgIH0gOiB7fTsKICAgICAgdmFyIG1tbCA9IFtdLAogICAgICAgICAgaSA9IDAsCiAgICAgICAgICBrID0gMCwKICAgICAgICAgIGMsCiAgICAgICAgICBtYXRjaCA9ICcnLAogICAgICAgICAgYnJhY2VzID0gMDsKCiAgICAgIGlmICh0ZXh0Lm1hdGNoKC9cXD9bJHt9XFxdfFxcXCh8XFwoZXEpP3JlZlxzKlx7LykpIHsKICAgICAgICB3aGlsZSAoaSA8IHRleHQubGVuZ3RoKSB7CiAgICAgICAgICBjID0gdGV4dC5jaGFyQXQoaSsrKTsKCiAgICAgICAgICBpZiAoYyA9PT0gJyQnKSB7CiAgICAgICAgICAgIGlmIChtYXRjaCA9PT0gJyQnICYmIGJyYWNlcyA9PT0gMCkgewogICAgICAgICAgICAgIG1tbC5wdXNoKE1NTC5UZVhBdG9tKFRFWC5QYXJzZSh0ZXh0LnNsaWNlKGssIGkgLSAxKSwge30pLm1tbCgpKSk7CiAgICAgICAgICAgICAgbWF0Y2ggPSAnJzsKICAgICAgICAgICAgICBrID0gaTsKICAgICAgICAgICAgfSBlbHNlIGlmIChtYXRjaCA9PT0gJycpIHsKICAgICAgICAgICAgICBpZiAoayA8IGkgLSAxKSBtbWwucHVzaCh0aGlzLkludGVybmFsVGV4dCh0ZXh0LnNsaWNlKGssIGkgLSAxKSwgZGVmKSk7CiAgICAgICAgICAgICAgbWF0Y2ggPSAnJCc7CiAgICAgICAgICAgICAgayA9IGk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJ3snICYmIG1hdGNoICE9PSAnJykgewogICAgICAgICAgICBicmFjZXMrKzsKICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJ30nKSB7CiAgICAgICAgICAgIGlmIChtYXRjaCA9PT0gJ30nICYmIGJyYWNlcyA9PT0gMCkgewogICAgICAgICAgICAgIG1tbC5wdXNoKE1NTC5UZVhBdG9tKFRFWC5QYXJzZSh0ZXh0LnNsaWNlKGssIGkpLCB7fSkubW1sKCkuV2l0aChkZWYpKSk7CiAgICAgICAgICAgICAgbWF0Y2ggPSAnJzsKICAgICAgICAgICAgICBrID0gaTsKICAgICAgICAgICAgfSBlbHNlIGlmIChtYXRjaCAhPT0gJycpIHsKICAgICAgICAgICAgICBpZiAoYnJhY2VzKSBicmFjZXMtLTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnXFwnKSB7CiAgICAgICAgICAgIGlmIChtYXRjaCA9PT0gJycgJiYgdGV4dC5zdWJzdHIoaSkubWF0Y2goL14oZXEpP3JlZlxzKlx7LykpIHsKICAgICAgICAgICAgICB2YXIgbGVuID0gUmVnRXhwWyIkJiJdLmxlbmd0aDsKICAgICAgICAgICAgICBpZiAoayA8IGkgLSAxKSBtbWwucHVzaCh0aGlzLkludGVybmFsVGV4dCh0ZXh0LnNsaWNlKGssIGkgLSAxKSwgZGVmKSk7CiAgICAgICAgICAgICAgbWF0Y2ggPSAnfSc7CiAgICAgICAgICAgICAgayA9IGkgLSAxOwogICAgICAgICAgICAgIGkgKz0gbGVuOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGMgPSB0ZXh0LmNoYXJBdChpKyspOwoKICAgICAgICAgICAgICBpZiAoYyA9PT0gJygnICYmIG1hdGNoID09PSAnJykgewogICAgICAgICAgICAgICAgaWYgKGsgPCBpIC0gMikgbW1sLnB1c2godGhpcy5JbnRlcm5hbFRleHQodGV4dC5zbGljZShrLCBpIC0gMiksIGRlZikpOwogICAgICAgICAgICAgICAgbWF0Y2ggPSAnKSc7CiAgICAgICAgICAgICAgICBrID0gaTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICcpJyAmJiBtYXRjaCA9PT0gJyknICYmIGJyYWNlcyA9PT0gMCkgewogICAgICAgICAgICAgICAgbW1sLnB1c2goTU1MLlRlWEF0b20oVEVYLlBhcnNlKHRleHQuc2xpY2UoaywgaSAtIDIpLCB7fSkubW1sKCkpKTsKICAgICAgICAgICAgICAgIG1hdGNoID0gJyc7CiAgICAgICAgICAgICAgICBrID0gaTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKGMubWF0Y2goL1ske31cXF0vKSAmJiBtYXRjaCA9PT0gJycpIHsKICAgICAgICAgICAgICAgIGktLTsKICAgICAgICAgICAgICAgIHRleHQgPSB0ZXh0LnN1YnN0cigwLCBpIC0gMSkgKyB0ZXh0LnN1YnN0cihpKTsgLy8gcmVtb3ZlIFwgZnJvbSBcJCwgXHssIFx9LCBvciBcXAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKG1hdGNoICE9PSAnJykgVEVYLkVycm9yKFsiTWF0aE5vdFRlcm1pbmF0ZWQiLCAiTWF0aCBub3QgdGVybWluYXRlZCBpbiB0ZXh0IGJveCJdKTsKICAgICAgfQoKICAgICAgaWYgKGsgPCB0ZXh0Lmxlbmd0aCkgbW1sLnB1c2godGhpcy5JbnRlcm5hbFRleHQodGV4dC5zbGljZShrKSwgZGVmKSk7CgogICAgICBpZiAobGV2ZWwgIT0gbnVsbCkgewogICAgICAgIG1tbCA9IFtNTUwubXN0eWxlLmFwcGx5KE1NTCwgbW1sKS5XaXRoKHsKICAgICAgICAgIGRpc3BsYXlzdHlsZTogZmFsc2UsCiAgICAgICAgICBzY3JpcHRsZXZlbDogbGV2ZWwKICAgICAgICB9KV07CiAgICAgIH0gZWxzZSBpZiAobW1sLmxlbmd0aCA+IDEpIHsKICAgICAgICBtbWwgPSBbTU1MLm1yb3cuYXBwbHkoTU1MLCBtbWwpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1tbDsKICAgIH0sCiAgICBJbnRlcm5hbFRleHQ6IGZ1bmN0aW9uIEludGVybmFsVGV4dCh0ZXh0LCBkZWYpIHsKICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSgvXlxzKy8sIE5CU1ApLnJlcGxhY2UoL1xzKyQvLCBOQlNQKTsKICAgICAgcmV0dXJuIE1NTC5tdGV4dChNTUwuY2hhcnModGV4dCkpLldpdGgoZGVmKTsKICAgIH0sCgogICAgLyoKICAgICAqICBSZXBsYWNlIG1hY3JvIHBhcmFtdGVycyB3aXRoIHRoZWlyIHZhbHVlcwogICAgICovCiAgICBTdWJzdGl0dXRlQXJnczogZnVuY3Rpb24gU3Vic3RpdHV0ZUFyZ3MoYXJncywgc3RyaW5nKSB7CiAgICAgIHZhciB0ZXh0ID0gJyc7CiAgICAgIHZhciBuZXdzdHJpbmcgPSAnJzsKICAgICAgdmFyIGM7CiAgICAgIHZhciBpID0gMDsKCiAgICAgIHdoaWxlIChpIDwgc3RyaW5nLmxlbmd0aCkgewogICAgICAgIGMgPSBzdHJpbmcuY2hhckF0KGkrKyk7CgogICAgICAgIGlmIChjID09PSAiXFwiKSB7CiAgICAgICAgICB0ZXh0ICs9IGMgKyBzdHJpbmcuY2hhckF0KGkrKyk7CiAgICAgICAgfSBlbHNlIGlmIChjID09PSAnIycpIHsKICAgICAgICAgIGMgPSBzdHJpbmcuY2hhckF0KGkrKyk7CgogICAgICAgICAgaWYgKGMgPT09ICcjJykgewogICAgICAgICAgICB0ZXh0ICs9IGM7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIWMubWF0Y2goL1sxLTldLykgfHwgYyA+IGFyZ3MubGVuZ3RoKSB7CiAgICAgICAgICAgICAgVEVYLkVycm9yKFsiSWxsZWdhbE1hY3JvUGFyYW0iLCAiSWxsZWdhbCBtYWNybyBwYXJhbWV0ZXIgcmVmZXJlbmNlIl0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBuZXdzdHJpbmcgPSB0aGlzLkFkZEFyZ3ModGhpcy5BZGRBcmdzKG5ld3N0cmluZywgdGV4dCksIGFyZ3NbYyAtIDFdKTsKICAgICAgICAgICAgdGV4dCA9ICcnOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0ZXh0ICs9IGM7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5BZGRBcmdzKG5ld3N0cmluZywgdGV4dCk7CiAgICB9LAoKICAgIC8qCiAgICAgKiAgTWFrZSBzdXJlIHRoYXQgbWFjcm9zIGFyZSBmb2xsb3dlZCBieSBhIHNwYWNlIGlmIHRoZWlyIG5hbWVzCiAgICAgKiAgY291bGQgYWNjaWRlbnRhbGx5IGJlIGNvbnRpbnVlZCBpbnRvIHRoZSBmb2xsb3dpbmcgdGV4dC4KICAgICAqLwogICAgQWRkQXJnczogZnVuY3Rpb24gQWRkQXJncyhzMSwgczIpIHsKICAgICAgaWYgKHMyLm1hdGNoKC9eW2Etel0vaSkgJiYgczEubWF0Y2goLyhefFteXFxdKShcXFxcKSpcXFthLXpdKyQvaSkpIHsKICAgICAgICBzMSArPSAnICc7CiAgICAgIH0KCiAgICAgIGlmIChzMS5sZW5ndGggKyBzMi5sZW5ndGggPiBURVguY29uZmlnLk1BWEJVRkZFUikgewogICAgICAgIFRFWC5FcnJvcihbIk1heEJ1ZmZlclNpemUiLCAiTWF0aEpheCBpbnRlcm5hbCBidWZmZXIgc2l6ZSBleGNlZWRlZDsgaXMgdGhlcmUgYSByZWN1cnNpdmUgbWFjcm8gY2FsbD8iXSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzMSArIHMyOwogICAgfQogIH0pOwogIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovCgogIFRFWC5BdWdtZW50KHsKICAgIFN0YWNrOiBTVEFDSywKICAgIFBhcnNlOiBQQVJTRSwKICAgIERlZmluaXRpb25zOiBURVhERUYsCiAgICBTdGFydHVwOiBTVEFSVFVQLAogICAgY29uZmlnOiB7CiAgICAgIE1BWE1BQ1JPUzogMTAwMDAsCiAgICAgIC8vIG1heGltdW0gbnVtYmVyIG9mIG1hY3JvIHN1YnN0aXR1dGlvbnMgcGVyIGVxdWF0aW9uCiAgICAgIE1BWEJVRkZFUjogNSAqIDEwMjQgLy8gbWF4aW11bSBzaXplIG9mIFRlWCBzdHJpbmcgdG8gcHJvY2VzcwoKICAgIH0sCiAgICBzb3VyY2VNZW51VGl0bGU6CiAgICAvKl8oTWF0aE1lbnUpKi8KICAgIFsiVGVYQ29tbWFuZHMiLCAiVGVYIENvbW1hbmRzIl0sCiAgICBhbm5vdGF0aW9uRW5jb2Rpbmc6ICJhcHBsaWNhdGlvbi94LXRleCIsCiAgICBwcmVmaWx0ZXJIb29rczogTWF0aEpheC5DYWxsYmFjay5Ib29rcyh0cnVlKSwKICAgIC8vIGhvb2tzIHRvIHJ1biBiZWZvcmUgcHJvY2Vzc2luZyBUZVgKICAgIHBvc3RmaWx0ZXJIb29rczogTWF0aEpheC5DYWxsYmFjay5Ib29rcyh0cnVlKSwKICAgIC8vIGhvb2tzIHRvIHJ1biBhZnRlciBwcm9jZXNzaW5nIFRlWAogICAgLy8KICAgIC8vICBDaGVjayBpZiBBTVNtYXRoIGV4dGVuc2lvbiBtdXN0IGJlIGxvYWRlZCBhbmQgcHVzaAogICAgLy8gICAgaXQgb24gdGhlIGV4dGVuc2lvbnMgYXJyYXksIGlmIG5lZWRlZAogICAgLy8KICAgIENvbmZpZzogZnVuY3Rpb24gQ29uZmlnKCkgewogICAgICB0aGlzLlNVUEVSKGFyZ3VtZW50cykuQ29uZmlnLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgogICAgICBpZiAodGhpcy5jb25maWcuZXF1YXRpb25OdW1iZXJzLmF1dG9OdW1iZXIgIT09ICJub25lIikgewogICAgICAgIGlmICghdGhpcy5jb25maWcuZXh0ZW5zaW9ucykgewogICAgICAgICAgdGhpcy5jb25maWcuZXh0ZW5zaW9ucyA9IFtdOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jb25maWcuZXh0ZW5zaW9ucy5wdXNoKCJBTVNtYXRoLmpzIik7CiAgICAgIH0KICAgIH0sCiAgICAvLwogICAgLy8gIENvbnZlcnQgVGVYIHRvIEVsZW1lbnRKYXgKICAgIC8vCiAgICBUcmFuc2xhdGU6IGZ1bmN0aW9uIFRyYW5zbGF0ZShzY3JpcHQpIHsKICAgICAgdmFyIG1tbCwKICAgICAgICAgIGlzRXJyb3IgPSBmYWxzZSwKICAgICAgICAgIG1hdGggPSBNYXRoSmF4LkhUTUwuZ2V0U2NyaXB0KHNjcmlwdCk7CiAgICAgIHZhciBkaXNwbGF5ID0gc2NyaXB0LnR5cGUucmVwbGFjZSgvXG4vZywgIiAiKS5tYXRjaCgvKDt8XHN8XG4pbW9kZVxzKj1ccypkaXNwbGF5KDt8XHN8XG58JCkvKSAhPSBudWxsOwogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBtYXRoOiBtYXRoLAogICAgICAgIGRpc3BsYXk6IGRpc3BsYXksCiAgICAgICAgc2NyaXB0OiBzY3JpcHQKICAgICAgfTsKICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5wcmVmaWx0ZXJIb29rcy5FeGVjdXRlKGRhdGEpOwogICAgICBpZiAoY2FsbGJhY2spIHJldHVybiBjYWxsYmFjazsKICAgICAgbWF0aCA9IGRhdGEubWF0aDsKCiAgICAgIHRyeSB7CiAgICAgICAgbW1sID0gVEVYLlBhcnNlKG1hdGgpLm1tbCgpOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBpZiAoIWVyci50ZXhFcnJvcikgewogICAgICAgICAgdGhyb3cgZXJyOwogICAgICAgIH0KCiAgICAgICAgbW1sID0gdGhpcy5mb3JtYXRFcnJvcihlcnIsIG1hdGgsIGRpc3BsYXksIHNjcmlwdCk7CiAgICAgICAgaXNFcnJvciA9IHRydWU7CiAgICAgIH0KCiAgICAgIGlmIChtbWwuaXNhKE1NTC5tdGFibGUpICYmIG1tbC5kaXNwbGF5c3R5bGUgPT09ICJpbmhlcml0IikgbW1sLmRpc3BsYXlzdHlsZSA9IGRpc3BsYXk7IC8vIGZvciB0YWdnZWQgZXF1YXRpb25zCgogICAgICBpZiAobW1sLmluZmVycmVkKSB7CiAgICAgICAgbW1sID0gTU1MLmFwcGx5KE1hdGhKYXguRWxlbWVudEpheCwgbW1sLmRhdGEpOwogICAgICB9IGVsc2UgewogICAgICAgIG1tbCA9IE1NTChtbWwpOwogICAgICB9CgogICAgICBpZiAoZGlzcGxheSkgewogICAgICAgIG1tbC5yb290LmRpc3BsYXkgPSAiYmxvY2siOwogICAgICB9CgogICAgICBpZiAoaXNFcnJvcikgewogICAgICAgIG1tbC50ZXhFcnJvciA9IHRydWU7CiAgICAgIH0KCiAgICAgIGRhdGEubWF0aCA9IG1tbDsKICAgICAgcmV0dXJuIHRoaXMucG9zdGZpbHRlckhvb2tzLkV4ZWN1dGUoZGF0YSkgfHwgZGF0YS5tYXRoOwogICAgfSwKICAgIHByZWZpbHRlck1hdGg6IGZ1bmN0aW9uIHByZWZpbHRlck1hdGgobWF0aCwgZGlzcGxheXN0eWxlLCBzY3JpcHQpIHsKICAgICAgcmV0dXJuIG1hdGg7CiAgICB9LAogICAgcG9zdGZpbHRlck1hdGg6IGZ1bmN0aW9uIHBvc3RmaWx0ZXJNYXRoKG1hdGgsIGRpc3BsYXlzdHlsZSwgc2NyaXB0KSB7CiAgICAgIHRoaXMuY29tYmluZVJlbGF0aW9ucyhtYXRoLnJvb3QpOwogICAgICByZXR1cm4gbWF0aDsKICAgIH0sCiAgICBmb3JtYXRFcnJvcjogZnVuY3Rpb24gZm9ybWF0RXJyb3IoZXJyLCBtYXRoLCBkaXNwbGF5LCBzY3JpcHQpIHsKICAgICAgdmFyIG1lc3NhZ2UgPSBlcnIubWVzc2FnZS5yZXBsYWNlKC9cbi4qLywgIiIpOwogICAgICBIVUIuc2lnbmFsLlBvc3QoWyJUZVggSmF4IC0gcGFyc2UgZXJyb3IiLCBtZXNzYWdlLCBtYXRoLCBkaXNwbGF5LCBzY3JpcHRdKTsKICAgICAgcmV0dXJuIE1NTC5FcnJvcihtZXNzYWdlKTsKICAgIH0sCiAgICAvLwogICAgLy8gIFByb2R1Y2UgYW4gZXJyb3IgYW5kIHN0b3AgcHJvY2Vzc2luZyB0aGlzIGVxdWF0aW9uCiAgICAvLwogICAgRXJyb3I6IGZ1bmN0aW9uIChfRXJyb3IpIHsKICAgICAgZnVuY3Rpb24gRXJyb3IoX3gpIHsKICAgICAgICByZXR1cm4gX0Vycm9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIEVycm9yLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfRXJyb3IudG9TdHJpbmcoKTsKICAgICAgfTsKCiAgICAgIHJldHVybiBFcnJvcjsKICAgIH0oZnVuY3Rpb24gKG1lc3NhZ2UpIHsKICAgICAgLy8KICAgICAgLy8gIFRyYW5zbGF0ZSBtZXNzYWdlIGlmIGl0IGlzIFsiaWQiLCJtZXNzYWdlIixhcmdzXQogICAgICAvLwogICAgICBpZiAobWVzc2FnZSBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgICAgbWVzc2FnZSA9IF8uYXBwbHkoXywgbWVzc2FnZSk7CiAgICAgIH0KCiAgICAgIHRocm93IEhVQi5JbnNlcnQoRXJyb3IobWVzc2FnZSksIHsKICAgICAgICB0ZXhFcnJvcjogdHJ1ZQogICAgICB9KTsKICAgIH0pLAogICAgLy8KICAgIC8vICBBZGQgYSB1c2VyLWRlZmluZWQgbWFjcm8gdG8gdGhlIG1hY3JvIGxpc3QKICAgIC8vCiAgICBNYWNybzogZnVuY3Rpb24gTWFjcm8obmFtZSwgZGVmLCBhcmduKSB7CiAgICAgIFRFWERFRi5tYWNyb3NbbmFtZV0gPSBbJ01hY3JvJ10uY29uY2F0KFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7CiAgICAgIFRFWERFRi5tYWNyb3NbbmFtZV0uaXNVc2VyID0gdHJ1ZTsKICAgIH0sCgogICAgLyoKICAgICAqICBDcmVhdGUgYW4gbXJvdyB0aGF0IGhhcyBzdHJldGNoeSBkZWxpbWl0ZXJzIGF0IGVpdGhlciBlbmQsIGFzIG5lZWRlZAogICAgICovCiAgICBmZW5jZWQ6IGZ1bmN0aW9uIGZlbmNlZChvcGVuLCBtbWwsIGNsb3NlKSB7CiAgICAgIHZhciBtcm93ID0gTU1MLm1yb3coKS5XaXRoKHsKICAgICAgICBvcGVuOiBvcGVuLAogICAgICAgIGNsb3NlOiBjbG9zZSwKICAgICAgICB0ZXhDbGFzczogTU1MLlRFWENMQVNTLklOTkVSCiAgICAgIH0pOwogICAgICBtcm93LkFwcGVuZChNTUwubW8ob3BlbikuV2l0aCh7CiAgICAgICAgZmVuY2U6IHRydWUsCiAgICAgICAgc3RyZXRjaHk6IHRydWUsCiAgICAgICAgdGV4Q2xhc3M6IE1NTC5URVhDTEFTUy5PUEVOCiAgICAgIH0pKTsKCiAgICAgIGlmIChtbWwudHlwZSA9PT0gIm1yb3ciKSB7CiAgICAgICAgbXJvdy5BcHBlbmQuYXBwbHkobXJvdywgbW1sLmRhdGEpOwogICAgICB9IGVsc2UgewogICAgICAgIG1yb3cuQXBwZW5kKG1tbCk7CiAgICAgIH0KCiAgICAgIG1yb3cuQXBwZW5kKE1NTC5tbyhjbG9zZSkuV2l0aCh7CiAgICAgICAgZmVuY2U6IHRydWUsCiAgICAgICAgc3RyZXRjaHk6IHRydWUsCiAgICAgICAgdGV4Q2xhc3M6IE1NTC5URVhDTEFTUy5DTE9TRQogICAgICB9KSk7CiAgICAgIHJldHVybiBtcm93OwogICAgfSwKCiAgICAvKgogICAgICogIENyZWF0ZSBhbiBtcm93IHRoYXQgaGFzIFxtYXRoY2hvaWNlIHVzaW5nIFxiaWdnIGFuZCBcYmlnIGZvciB0aGUgZGVsaW1pdGVycwogICAgICovCiAgICBmaXhlZEZlbmNlOiBmdW5jdGlvbiBmaXhlZEZlbmNlKG9wZW4sIG1tbCwgY2xvc2UpIHsKICAgICAgdmFyIG1yb3cgPSBNTUwubXJvdygpLldpdGgoewogICAgICAgIG9wZW46IG9wZW4sCiAgICAgICAgY2xvc2U6IGNsb3NlLAogICAgICAgIHRleENsYXNzOiBNTUwuVEVYQ0xBU1MuT1JECiAgICAgIH0pOwoKICAgICAgaWYgKG9wZW4pIHsKICAgICAgICBtcm93LkFwcGVuZCh0aGlzLm1hdGhQYWxldHRlKG9wZW4sICJsIikpOwogICAgICB9CgogICAgICBpZiAobW1sLnR5cGUgPT09ICJtcm93IikgewogICAgICAgIG1yb3cuQXBwZW5kLmFwcGx5KG1yb3csIG1tbC5kYXRhKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtcm93LkFwcGVuZChtbWwpOwogICAgICB9CgogICAgICBpZiAoY2xvc2UpIHsKICAgICAgICBtcm93LkFwcGVuZCh0aGlzLm1hdGhQYWxldHRlKGNsb3NlLCAiciIpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1yb3c7CiAgICB9LAogICAgbWF0aFBhbGV0dGU6IGZ1bmN0aW9uIG1hdGhQYWxldHRlKGZlbmNlLCBzaWRlKSB7CiAgICAgIGlmIChmZW5jZSA9PT0gJ3snIHx8IGZlbmNlID09PSAnfScpIHsKICAgICAgICBmZW5jZSA9ICJcXCIgKyBmZW5jZTsKICAgICAgfQoKICAgICAgdmFyIEQgPSAne1xcYmlnZycgKyBzaWRlICsgJyAnICsgZmVuY2UgKyAnfScsCiAgICAgICAgICBUID0gJ3tcXGJpZycgKyBzaWRlICsgJyAnICsgZmVuY2UgKyAnfSc7CiAgICAgIHJldHVybiBURVguUGFyc2UoJ1xcbWF0aGNob2ljZScgKyBEICsgVCArIFQgKyBULCB7fSkubW1sKCk7CiAgICB9LAogICAgLy8KICAgIC8vICBDb21iaW5lIGFkamFjZW50IDxtbz4gZWxlbWVudHMgdGhhdCBhcmUgcmVsYXRpb25zCiAgICAvLyAgICAoc2luY2UgTWF0aE1MIHRyZWF0cyB0aGUgc3BhY2luZyB2ZXJ5IGRpZmZlcmVudGx5KQogICAgLy8KICAgIGNvbWJpbmVSZWxhdGlvbnM6IGZ1bmN0aW9uIGNvbWJpbmVSZWxhdGlvbnMobW1sKSB7CiAgICAgIHZhciBpLCBtLCBtMSwgbTI7CgogICAgICBmb3IgKGkgPSAwLCBtID0gbW1sLmRhdGEubGVuZ3RoOyBpIDwgbTsgaSsrKSB7CiAgICAgICAgaWYgKG1tbC5kYXRhW2ldKSB7CiAgICAgICAgICBpZiAobW1sLmlzYShNTUwubXJvdykpIHsKICAgICAgICAgICAgd2hpbGUgKGkgKyAxIDwgbSAmJiAobTEgPSBtbWwuZGF0YVtpXSkgJiYgKG0yID0gbW1sLmRhdGFbaSArIDFdKSAmJiBtMS5pc2EoTU1MLm1vKSAmJiBtMi5pc2EoTU1MLm1vKSAmJiBtMS5HZXQoInRleENsYXNzIikgPT09IE1NTC5URVhDTEFTUy5SRUwgJiYgbTIuR2V0KCJ0ZXhDbGFzcyIpID09PSBNTUwuVEVYQ0xBU1MuUkVMKSB7CiAgICAgICAgICAgICAgaWYgKG0xLnZhcmlhbnRGb3JtID09IG0yLnZhcmlhbnRGb3JtICYmIG0xLkdldCgibWF0aHZhcmlhbnQiKSA9PSBtMi5HZXQoIm1hdGh2YXJpYW50IikgJiYgbTEuc3R5bGUgPT0gbTIuc3R5bGUgJiYgbTFbImNsYXNzIl0gPT0gbTJbImNsYXNzIl0gJiYgIW0xLmlkICYmICFtMi5pZCkgewogICAgICAgICAgICAgICAgbTEuQXBwZW5kLmFwcGx5KG0xLCBtMi5kYXRhKTsKICAgICAgICAgICAgICAgIG1tbC5kYXRhLnNwbGljZShpICsgMSwgMSk7CiAgICAgICAgICAgICAgICBtLS07CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG0xLnJzcGFjZSA9IG0yLmxzcGFjZSA9ICIwcHQiOwogICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmICghbW1sLmRhdGFbaV0uaXNUb2tlbikgewogICAgICAgICAgICB0aGlzLmNvbWJpbmVSZWxhdGlvbnMobW1sLmRhdGFbaV0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0pOyAvLwogIC8vICBBZGQgdGhlIGRlZmF1bHQgZmlsdGVycwogIC8vCgogIFRFWC5wcmVmaWx0ZXJIb29rcy5BZGQoZnVuY3Rpb24gKGRhdGEpIHsKICAgIGRhdGEubWF0aCA9IFRFWC5wcmVmaWx0ZXJNYXRoKGRhdGEubWF0aCwgZGF0YS5kaXNwbGF5LCBkYXRhLnNjcmlwdCk7CiAgfSk7CiAgVEVYLnBvc3RmaWx0ZXJIb29rcy5BZGQoZnVuY3Rpb24gKGRhdGEpIHsKICAgIGRhdGEubWF0aCA9IFRFWC5wb3N0ZmlsdGVyTWF0aChkYXRhLm1hdGgsIGRhdGEuZGlzcGxheSwgZGF0YS5zY3JpcHQpOwogIH0pOwogIFRFWC5sb2FkQ29tcGxldGUoImpheC5qcyIpOwp9KShNYXRoSmF4LklucHV0SmF4LlRlWCwgTWF0aEpheC5IdWIsIE1hdGhKYXguQWpheCk7"},{"version":3,"sources":["/home/hads/Downloads/pycharm-community-2020.1/plugins/python-ce/helpers/MathJax/jax/input/TeX/jax.js"],"names":["TEX","HUB","AJAX","MML","NBSP","_","id","MathJax","Localization","apply","concat","slice","call","arguments","STACK","Object","Subclass","Init","env","inner","global","isInner","data","STACKITEM","start","Push","i","m","item","top","length","mbase","mml","Top","checkItem","Array","Pop","push","hasOwnProperty","pop","isOpen","n","Prev","noPop","toString","join","Item","type","endError","closeError","rightError","mmlData","inferred","forceRow","mrow","With","num","linebreak","Error","name","isClose","isNotStack","def","SUPER","stop","open","stopError","TeXAtom","close","prime","msup","SetData","sup","subsup","supError","subError","primes","position","variantForm","movesupsub","over","stack","mfrac","thickness","linethickness","texWithDelims","fixedFence","left","delim","fenced","right","begin","end","parse","style","mstyle","styles","move","mpadded","height","dh","depth","dd","voffset","array","arraydef","table","row","frame","hfill","isEntry","EndEntry","clearEnv","isCR","EndRow","EndTable","scriptlevel","mtable","dashed","hasFrame","rowlines","replace","menclose","notation","isFrame","columnlines","padding","requireClose","mtd","columnalign","mtr","isNumbered","unshift","mlabeledtr","checkLines","lines","split","rowspacing","rows","cell","Add","fn","isa","mspace","isEmbellished","CoreMO","Get","mo","entity","texClass","TEXCLASS","NONE","not","c","match","remap","charCodeAt","chars","String","fromCharCode","Append","mtext","width","REL","dots","ldots","tclass","BIN","cdots","TEXDEF","src","dst","nouser","isUser","STARTUP","ElementJax","Insert","letter","digit","number","special","mathchar0mi","alpha","beta","gamma","delta","epsilon","zeta","eta","theta","iota","kappa","lambda","mu","nu","xi","omicron","pi","rho","sigma","tau","upsilon","phi","chi","psi","omega","varepsilon","vartheta","varpi","varrho","varsigma","varphi","S","mathvariant","VARIANT","NORMAL","aleph","hbar","imath","jmath","ell","wp","Re","Im","partial","infty","emptyset","nabla","bot","angle","triangle","backslash","forall","exists","neg","lnot","flat","natural","sharp","clubsuit","diamondsuit","heartsuit","spadesuit","mathchar0mo","surd","coprod","OP","bigvee","bigwedge","biguplus","bigcap","bigcup","intop","movablelimits","iint","iiint","prod","sum","bigotimes","bigoplus","bigodot","oint","bigsqcup","smallint","largeop","triangleleft","triangleright","bigtriangleup","bigtriangledown","wedge","land","vee","lor","cap","cup","ddagger","dagger","sqcap","sqcup","uplus","amalg","diamond","bullet","wr","div","odot","oslash","otimes","ominus","oplus","mp","pm","circ","bigcirc","setminus","cdot","ast","times","star","propto","sqsubseteq","sqsupseteq","parallel","mid","dashv","vdash","leq","le","geq","ge","lt","gt","succ","prec","approx","succeq","preceq","supset","subset","supseteq","subseteq","ni","notin","owns","gg","ll","sim","simeq","perp","equiv","asymp","smile","frown","ne","neq","cong","doteq","bowtie","models","notChar","Leftrightarrow","Leftarrow","Rightarrow","leftrightarrow","leftarrow","gets","rightarrow","to","mapsto","leftharpoonup","leftharpoondown","rightharpoonup","rightharpoondown","nearrow","searrow","nwarrow","swarrow","rightleftharpoons","hookrightarrow","hookleftarrow","longleftarrow","Longleftarrow","longrightarrow","Longrightarrow","Longleftrightarrow","longleftrightarrow","longmapsto","vdots","ddots","dotsc","dotsb","dotsm","dotsi","dotso","ldotp","PUNCT","cdotp","colon","mathchar7","Gamma","Delta","Theta","Lambda","Xi","Pi","Sigma","Upsilon","Phi","Psi","Omega","And","delimiter","ORD","macros","displaystyle","textstyle","scriptstyle","scriptscriptstyle","rm","mit","ITALIC","oldstyle","OLDSTYLE","cal","CALIGRAPHIC","it","bf","BOLD","bbFont","DOUBLESTRUCK","scr","SCRIPT","frak","FRAKTUR","sf","SANSSERIF","tt","MONOSPACE","tiny","Tiny","scriptsize","small","normalsize","large","Large","LARGE","huge","Huge","arcsin","arccos","arctan","arg","cos","cosh","cot","coth","csc","deg","det","dim","exp","gcd","hom","inf","ker","lg","lim","liminf","limsup","ln","log","max","min","Pr","sec","sin","sinh","tan","tanh","limits","nolimits","overline","underline","overbrace","underbrace","overparen","underparen","overrightarrow","underrightarrow","overleftarrow","underleftarrow","overleftrightarrow","underleftrightarrow","overset","underset","stackrel","overwithdelims","atop","atopwithdelims","above","abovewithdelims","brace","brack","choose","frac","sqrt","root","uproot","leftroot","middle","llap","rlap","raise","lower","moveleft","moveright","LENGTH","THINMATHSPACE","MEDIUMMATHSPACE","THICKMATHSPACE","NEGATIVETHINMATHSPACE","enspace","quad","qquad","thinspace","negthinspace","hskip","hspace","kern","mskip","mkern","Rule","Space","big","Big","bigg","Bigg","bigl","OPEN","Bigl","biggl","Biggl","bigr","CLOSE","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","mathord","mathop","mathopen","mathclose","mathbin","mathrel","mathpunct","mathinner","INNER","vcenter","VCENTER","mathchoice","buildrel","hbox","text","mbox","fbox","strut","mathstrut","phantom","vphantom","hphantom","smash","acute","grave","ddot","tilde","bar","breve","check","hat","vec","dot","widetilde","widehat","matrix","pmatrix","cases","eqalign","displaylines","cr","newline","hline","hdashline","eqalignno","leqalignno","hfil","hfilll","bmod","pmod","mod","pod","iff","skew","mathcal","mathscr","mathrm","mathbf","mathbb","Bbb","mathit","mathfrak","mathsf","mathtt","textrm","textit","textbf","textsf","texttt","pmb","TeX","LaTeX","space","newcommand","renewcommand","newenvironment","renewenvironment","let","verb","boldsymbol","tag","notag","label","ref","eqref","nonumber","unicode","color","href","cssId","bbox","mmlToken","require","environment","bmatrix","Bmatrix","vmatrix","Vmatrix","equation","eqnarray","align","aligned","multline","gather","gathered","alignat","alignedat","p_height","config","Macros","MACROS","PARSE","string","macroCount","ENV","Stack","Parse","charAt","test","Variable","Number","Other","token","ControlSequence","GetCS","macro","csFindMacro","Function","csMathchar0mi","csMathchar0mo","csMathchar7","csDelimiter","csUndefined","mchar","mi","stretchy","font","fence","mn","Open","Close","Tilde","Superscript","GetNext","substr","base","isEmbellishedWrapper","subsupOK","mi2mo","munderover","msubsup","Subscript","sub","under","PRIME","SMARTQUOTE","Prime","defaults","copyAttributes","lspace","rspace","useMMLspacing","SPACE_ATTR","Comment","Hash","autoDefault","SetFont","SetStyle","texStyle","level","SetSize","size","mathsize","Color","GetArgument","old","math","ParseArg","mathcolor","Spacer","SIZE","LeftRight","GetDelimiter","Middle","NamedFn","NamedOp","form","FORM","PREFIX","Limits","op","underover","Core","Over","GetDimen","Frac","den","Sqrt","GetBrackets","msqrt","mroot","parseRoot","Root","GetUpTo","inRoot","parser","leftRoot","upRoot","MoveRoot","Accent","accent","UnderOver","noaccent","pos","o","u","Overset","mover","Underset","munder","mclass","MmlToken","attr","attrNames","prototype","isToken","MmlTokenAllow","value","MmlFilterAttribute","toLowerCase","fontfamily","fontsize","fontweight","fontstyle","background","Strut","Phantom","v","h","box","mphantom","Smash","bt","trimSpaces","Lap","RaiseLower","MoveLeftRight","nh","tmp","Hskip","w","d","parseFloat","mathbackground","MakeBig","minsize","maxsize","symmetric","BuildRel","ParseUpTo","HBox","InternalMath","FBox","Not","Dots","Require","file","Extension","extensionDir","loaded","fileURL","RestartAfter","Macro","argcount","args","optional","SubstituteArgs","AddArgs","MAXMACROS","Matrix","spacing","vspacing","numbered","columnspacing","isCases","side","Entry","braces","Cr","CrLaTeX","matchDimen","dimen2em","Em","Math","LINEBREAK","NEWLINE","emPerInch","pxPerInch","unit","abs","toFixed","HLine","HFill","BeginEnd","isEnd","cmd","envFindName","Equation","ExtensionEnv","raggedHeight","convertDelimiter","useHeight","AlignedArray","setArrayAlign","parseInt","nextIsSpace","CS","noneOK","j","parens","braceOK","dimen","k","InternalText","len","RegExp","newstring","s1","s2","MAXBUFFER","Augment","Definitions","Startup","sourceMenuTitle","annotationEncoding","prefilterHooks","Callback","Hooks","postfilterHooks","Config","equationNumbers","autoNumber","extensions","Translate","script","isError","HTML","getScript","display","callback","Execute","err","texError","formatError","prefilterMath","postfilterMath","combineRelations","message","signal","Post","argn","mathPalette","D","T","m1","m2","splice","loadComplete","InputJax","Hub","Ajax"],"mappings":"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","sourcesContent":["/* -*- Mode: Javascript; indent-tabs-mode:nil; js-indent-level: 2 -*- */\n/* vim: set ts=2 et sw=2 tw=80: */\n\n/*************************************************************\n *\n *  MathJax/jax/input/TeX/jax.js\n *  \n *  Implements the TeX InputJax that reads mathematics in\n *  TeX and LaTeX format and converts it to the MML ElementJax\n *  internal format.\n *\n *  ---------------------------------------------------------------------\n *  \n *  Copyright (c) 2009-2015 The MathJax Consortium\n * \n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n * \n *      http://www.apache.org/licenses/LICENSE-2.0\n * \n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n(function (TEX,HUB,AJAX) {\n  var MML, NBSP = \"\\u00A0\"; \n  \n  var _ = function (id) {\n    return MathJax.Localization._.apply(MathJax.Localization,\n      [[\"TeX\", id]].concat([].slice.call(arguments,1)));\n  };\n\n  var STACK = MathJax.Object.Subclass({\n    Init: function (env,inner) {\n      this.global = {isInner: inner};\n      this.data = [STACKITEM.start(this.global)];\n      if (env) {this.data[0].env = env}\n      this.env = this.data[0].env;\n    },\n    Push: function () {\n      var i, m, item, top;\n      for (i = 0, m = arguments.length; i < m; i++) {\n        item = arguments[i]; if (!item) continue;\n        if (item instanceof MML.mbase) {item = STACKITEM.mml(item)}\n        item.global = this.global;\n        top = (this.data.length ? this.Top().checkItem(item) : true);\n        if (top instanceof Array) {this.Pop(); this.Push.apply(this,top)}\n        else if (top instanceof STACKITEM) {this.Pop(); this.Push(top)}\n        else if (top) {\n          this.data.push(item);\n          if (item.env) {\n            for (var id in this.env)\n              {if (this.env.hasOwnProperty(id)) {item.env[id] = this.env[id]}}\n            this.env = item.env;\n          } else {item.env = this.env}\n        }\n      }\n    },\n    Pop: function () {\n      var item = this.data.pop(); if (!item.isOpen) {delete item.env}\n      this.env = (this.data.length ? this.Top().env : {});\n      return item;\n    },\n    Top: function (n) {\n      if (n == null) {n = 1}\n      if (this.data.length < n) {return null}\n      return this.data[this.data.length-n];\n    },\n    Prev: function (noPop) {\n      var top = this.Top();\n      if (noPop) {return top.data[top.data.length-1]}\n            else {return top.Pop()}\n    },\n    toString: function () {return \"stack[\\n  \"+this.data.join(\"\\n  \")+\"\\n]\"}\n  });\n  \n  var STACKITEM = STACK.Item = MathJax.Object.Subclass({\n    type: \"base\",\n    endError:   /*_()*/ [\"ExtraOpenMissingClose\",\"Extra open brace or missing close brace\"],\n    closeError: /*_()*/ [\"ExtraCloseMissingOpen\",\"Extra close brace or missing open brace\"],\n    rightError: /*_()*/ [\"MissingLeftExtraRight\",\"Missing \\\\left or extra \\\\right\"],\n    Init: function () {\n      if (this.isOpen) {this.env = {}}\n      this.data = [];\n      this.Push.apply(this,arguments);\n    },\n    Push: function () {this.data.push.apply(this.data,arguments)},\n    Pop: function () {return this.data.pop()},\n    mmlData: function (inferred,forceRow) {\n      if (inferred == null) {inferred = true}\n      if (this.data.length === 1 && !forceRow) {return this.data[0]}\n      return MML.mrow.apply(MML,this.data).With((inferred ? {inferred: true}: {}));\n    },\n    checkItem: function (item) {\n      if (item.type === \"over\" && this.isOpen) {item.num = this.mmlData(false); this.data = []}\n      if (item.type === \"cell\" && this.isOpen) {\n        if (item.linebreak) {return false}\n        TEX.Error([\"Misplaced\",\"Misplaced %1\",item.name]);\n      }\n      if (item.isClose && this[item.type+\"Error\"]) {TEX.Error(this[item.type+\"Error\"])}\n      if (!item.isNotStack) {return true}\n      this.Push(item.data[0]); return false;\n    },\n    With: function (def) {\n      for (var id in def) {if (def.hasOwnProperty(id)) {this[id] = def[id]}}\n      return this;\n    },\n    toString: function () {return this.type+\"[\"+this.data.join(\"; \")+\"]\"}\n  });\n\n  STACKITEM.start = STACKITEM.Subclass({\n    type: \"start\", isOpen: true,\n    Init: function (global) {\n      this.SUPER(arguments).Init.call(this);\n      this.global = global;\n    },\n    checkItem: function (item) {\n      if (item.type === \"stop\") {return STACKITEM.mml(this.mmlData())}\n      return this.SUPER(arguments).checkItem.call(this,item);\n    }\n  });\n\n  STACKITEM.stop = STACKITEM.Subclass({\n    type: \"stop\", isClose: true\n  });\n\n  STACKITEM.open = STACKITEM.Subclass({\n    type: \"open\", isOpen: true,\n    stopError: /*_()*/ [\"ExtraOpenMissingClose\",\"Extra open brace or missing close brace\"],\n    checkItem: function (item) {\n      if (item.type === \"close\") {\n        var mml = this.mmlData();\n        return STACKITEM.mml(MML.TeXAtom(mml)); // TeXAtom make it an ORD to prevent spacing (FIXME: should be another way)\n      }\n      return this.SUPER(arguments).checkItem.call(this,item);\n    }\n  });\n\n  STACKITEM.close = STACKITEM.Subclass({\n    type: \"close\", isClose: true\n  });\n\n  STACKITEM.prime = STACKITEM.Subclass({\n    type: \"prime\",\n    checkItem: function (item) {\n      if (this.data[0].type !== \"msubsup\") \n        {return [MML.msup(this.data[0],this.data[1]),item]}\n      this.data[0].SetData(this.data[0].sup,this.data[1]);\n      return [this.data[0],item];\n    }\n  });\n  \n  STACKITEM.subsup = STACKITEM.Subclass({\n    type: \"subsup\",\n    stopError: /*_()*/ [\"MissingScript\",\"Missing superscript or subscript argument\"],\n    supError:  /*_()*/ [\"MissingOpenForSup\",\"Missing open brace for superscript\"],\n    subError:  /*_()*/ [\"MissingOpenForSub\",\"Missing open brace for subscript\"],\n    checkItem: function (item) {\n      if (item.type === \"open\" || item.type === \"left\") {return true}\n      if (item.type === \"mml\") {\n        if (this.primes) {\n          if (this.position !== 2) {this.data[0].SetData(2,this.primes)}\n            else {item.data[0] = MML.mrow(this.primes.With({variantForm:true}),item.data[0])}\n        }\n        this.data[0].SetData(this.position,item.data[0]);\n        if (this.movesupsub != null) {this.data[0].movesupsub = this.movesupsub}\n        return STACKITEM.mml(this.data[0]);\n      }\n      if (this.SUPER(arguments).checkItem.call(this,item))\n        {TEX.Error(this[[\"\",\"subError\",\"supError\"][this.position]])}\n    },\n    Pop: function () {}\n  });\n\n  STACKITEM.over = STACKITEM.Subclass({\n    type: \"over\", isClose: true, name: \"\\\\over\",\n    checkItem: function (item,stack) {\n      if (item.type === \"over\")\n        {TEX.Error([\"AmbiguousUseOf\",\"Ambiguous use of %1\",item.name])}\n      if (item.isClose) {\n        var mml = MML.mfrac(this.num,this.mmlData(false));\n        if (this.thickness != null) {mml.linethickness = this.thickness}\n        if (this.open || this.close) {\n          mml.texWithDelims = true;\n          mml = TEX.fixedFence(this.open,mml,this.close);\n        }\n        return [STACKITEM.mml(mml), item];\n      }\n      return this.SUPER(arguments).checkItem.call(this,item);\n    },\n    toString: function () {return \"over[\"+this.num+\" / \"+this.data.join(\"; \")+\"]\"}\n  });\n\n  STACKITEM.left = STACKITEM.Subclass({\n    type: \"left\", isOpen: true, delim: '(',\n    stopError: /*_()*/ [\"ExtraLeftMissingRight\", \"Extra \\\\left or missing \\\\right\"],\n    checkItem: function (item) {\n      if (item.type === \"right\")\n        {return STACKITEM.mml(TEX.fenced(this.delim,this.mmlData(),item.delim))}\n      return this.SUPER(arguments).checkItem.call(this,item);\n    }\n  });\n\n  STACKITEM.right = STACKITEM.Subclass({\n    type: \"right\", isClose: true, delim: ')'\n  });\n\n  STACKITEM.begin = STACKITEM.Subclass({\n    type: \"begin\", isOpen: true,\n    checkItem: function (item) {\n      if (item.type === \"end\") {\n        if (item.name !== this.name)\n          {TEX.Error([\"EnvBadEnd\",\"\\\\begin{%1} ended with \\\\end{%2}\",this.name,item.name])}\n        if (!this.end) {return STACKITEM.mml(this.mmlData())}\n        return this.parse[this.end].call(this.parse,this,this.data);\n      }\n      if (item.type === \"stop\")\n        {TEX.Error([\"EnvMissingEnd\",\"Missing \\\\end{%1}\",this.name])}\n      return this.SUPER(arguments).checkItem.call(this,item);\n    }\n  });\n  \n  STACKITEM.end = STACKITEM.Subclass({\n    type: \"end\", isClose: true\n  });\n\n  STACKITEM.style = STACKITEM.Subclass({\n    type: \"style\",\n    checkItem: function (item) {\n      if (!item.isClose) {return this.SUPER(arguments).checkItem.call(this,item)}\n      var mml = MML.mstyle.apply(MML,this.data).With(this.styles);\n      return [STACKITEM.mml(mml),item];\n    }\n  });\n  \n  STACKITEM.position = STACKITEM.Subclass({\n    type: \"position\",\n    checkItem: function (item) {\n      if (item.isClose) {TEX.Error([\"MissingBoxFor\",\"Missing box for %1\",this.name])}\n      if (item.isNotStack) {\n        var mml = item.mmlData();\n        switch (this.move) {\n         case 'vertical':\n          mml = MML.mpadded(mml).With({height: this.dh, depth: this.dd, voffset: this.dh});\n          return [STACKITEM.mml(mml)];\n         case 'horizontal':\n          return [STACKITEM.mml(this.left),item,STACKITEM.mml(this.right)];\n        }\n      }\n      return this.SUPER(arguments).checkItem.call(this,item);\n    }\n  });\n  \n  STACKITEM.array = STACKITEM.Subclass({\n    type: \"array\", isOpen: true, arraydef: {},\n    Init: function () {\n      this.table = []; this.row = []; this.env = {}; this.frame = []; this.hfill = [];\n      this.SUPER(arguments).Init.apply(this,arguments);\n    },\n    checkItem: function (item) {\n      if (item.isClose && item.type !== \"over\") {\n        if (item.isEntry) {this.EndEntry(); this.clearEnv(); return false}\n        if (item.isCR)    {this.EndEntry(); this.EndRow(); this.clearEnv(); return false}\n        this.EndTable(); this.clearEnv();\n        var scriptlevel = this.arraydef.scriptlevel; delete this.arraydef.scriptlevel;\n        var mml = MML.mtable.apply(MML,this.table).With(this.arraydef);\n        if (this.frame.length === 4) {\n          mml.frame = (this.frame.dashed ? \"dashed\" : \"solid\");\n        } else if (this.frame.length) {\n          mml.hasFrame = true;\n          if (this.arraydef.rowlines) {this.arraydef.rowlines = this.arraydef.rowlines.replace(/none( none)+$/,\"none\")}\n          mml = MML.menclose(mml).With({notation: this.frame.join(\" \"), isFrame: true});\n          if ((this.arraydef.columnlines||\"none\") != \"none\" ||\n              (this.arraydef.rowlines||\"none\") != \"none\") {mml.padding = 0} // HTML-CSS jax implements this\n        }\n        if (scriptlevel) {mml = MML.mstyle(mml).With({scriptlevel: scriptlevel})}\n        if (this.open || this.close) {mml = TEX.fenced(this.open,mml,this.close)}\n        mml = STACKITEM.mml(mml);\n        if (this.requireClose) {\n          if (item.type === 'close') {return mml}\n          TEX.Error([\"MissingCloseBrace\",\"Missing close brace\"]);\n        }\n        return [mml,item];\n      }\n      return this.SUPER(arguments).checkItem.call(this,item);\n    },\n    EndEntry: function () {\n      var mtd = MML.mtd.apply(MML,this.data);\n      if (this.hfill.length) {\n        if (this.hfill[0] === 0) mtd.columnalign = \"right\";\n        if (this.hfill[this.hfill.length-1] === this.data.length)\n          mtd.columnalign = (mtd.columnalign ? \"center\" : \"left\");\n      }\n      this.row.push(mtd); this.data = []; this.hfill = [];\n    },\n    EndRow:   function () {\n      var mtr = MML.mtr;\n      if (this.isNumbered && this.row.length === 3) {\n        this.row.unshift(this.row.pop());  // move equation number to first position\n        mtr = MML.mlabeledtr;\n      }\n      this.table.push(mtr.apply(MML,this.row)); this.row = [];\n    },\n    EndTable: function () {\n      if (this.data.length || this.row.length) {this.EndEntry(); this.EndRow()}\n      this.checkLines();\n    },\n    checkLines: function () {\n      if (this.arraydef.rowlines) {\n        var lines = this.arraydef.rowlines.split(/ /);\n        if (lines.length === this.table.length) {\n          this.frame.push(\"bottom\"); lines.pop();\n          this.arraydef.rowlines = lines.join(' ');\n        } else if (lines.length < this.table.length-1) {\n          this.arraydef.rowlines += \" none\";\n        }\n      }\n      if (this.rowspacing) {\n        var rows = this.arraydef.rowspacing.split(/ /);\n        while (rows.length < this.table.length) {rows.push(this.rowspacing+\"em\")}\n        this.arraydef.rowspacing = rows.join(' ');\n      }\n    },\n    clearEnv: function () {\n      for (var id in this.env) {if (this.env.hasOwnProperty(id)) {delete this.env[id]}}\n    }\n  });\n  \n  STACKITEM.cell = STACKITEM.Subclass({\n    type: \"cell\", isClose: true\n  });\n\n  STACKITEM.mml = STACKITEM.Subclass({\n    type: \"mml\", isNotStack: true,\n    Add: function () {this.data.push.apply(this.data,arguments); return this}\n  });\n  \n  STACKITEM.fn = STACKITEM.Subclass({\n    type: \"fn\",\n    checkItem: function (item) {\n      if (this.data[0]) {\n        if (item.isOpen) {return true}\n        if (item.type !== \"fn\") {\n          if (item.type !== \"mml\" || !item.data[0]) {return [this.data[0],item]}\n          if (item.data[0].isa(MML.mspace)) {return [this.data[0],item]}\n          var mml = item.data[0]; if (mml.isEmbellished()) {mml = mml.CoreMO()}\n          if ([0,0,1,1,0,1,1,0,0,0][mml.Get(\"texClass\")]) {return [this.data[0],item]}\n        }\n        return [this.data[0],MML.mo(MML.entity(\"#x2061\")).With({texClass:MML.TEXCLASS.NONE}),item];\n      }\n      return this.SUPER(arguments).checkItem.apply(this,arguments);\n    }\n  });\n  \n  STACKITEM.not = STACKITEM.Subclass({\n    type: \"not\",\n    checkItem: function (item) {\n      var mml, c;\n      if (item.type === \"open\" || item.type === \"left\") {return true}\n      if (item.type === \"mml\" && item.data[0].type.match(/^(mo|mi|mtext)$/)) {\n        mml = item.data[0], c = mml.data.join(\"\");\n        if (c.length === 1 && !mml.movesupsub) {\n          c = STACKITEM.not.remap[c.charCodeAt(0)];\n          if (c) {mml.SetData(0,MML.chars(String.fromCharCode(c)))}\n            else {mml.Append(MML.chars(\"\\u0338\"))}\n          return item;\n        }\n      }\n      //  \\mathrel{\\rlap{\\notChar}}\n      mml = MML.mpadded(MML.mtext(\"\\u29F8\")).With({width:0});\n      mml = MML.TeXAtom(mml).With({texClass:MML.TEXCLASS.REL});\n      return [mml,item];\n    }\n  });\n  STACKITEM.not.remap = {\n    0x2190:0x219A, 0x2192:0x219B, 0x2194:0x21AE,\n    0x21D0:0x21CD, 0x21D2:0x21CF, 0x21D4:0x21CE,\n    0x2208:0x2209, 0x220B:0x220C, 0x2223:0x2224, 0x2225:0x2226,\n    0x223C:0x2241, 0x007E:0x2241, 0x2243:0x2244, 0x2245:0x2247,\n    0x2248:0x2249, 0x224D:0x226D, 0x003D:0x2260, 0x2261:0x2262,\n    0x003C:0x226E, 0x003E:0x226F, 0x2264:0x2270, 0x2265:0x2271,\n    0x2272:0x2274, 0x2273:0x2275, 0x2276:0x2278, 0x2277:0x2279,\n    0x227A:0x2280, 0x227B:0x2281, 0x2282:0x2284, 0x2283:0x2285,\n    0x2286:0x2288, 0x2287:0x2289, 0x22A2:0x22AC, 0x22A8:0x22AD,\n    0x22A9:0x22AE, 0x22AB:0x22AF, 0x227C:0x22E0, 0x227D:0x22E1,\n    0x2291:0x22E2, 0x2292:0x22E3, 0x22B2:0x22EA, 0x22B3:0x22EB,\n    0x22B4:0x22EC, 0x22B5:0x22ED, 0x2203:0x2204\n  };\n  \n  STACKITEM.dots = STACKITEM.Subclass({\n    type: \"dots\",\n    checkItem: function (item) {\n      if (item.type === \"open\" || item.type === \"left\") {return true}\n      var dots = this.ldots;\n      if (item.type === \"mml\" && item.data[0].isEmbellished()) {\n        var tclass = item.data[0].CoreMO().Get(\"texClass\");\n        if (tclass === MML.TEXCLASS.BIN || tclass === MML.TEXCLASS.REL) {dots = this.cdots}\n      }\n      return [dots,item];\n    }\n  });\n  \n\n  var TEXDEF = {\n    //\n    //  Add new definitions without overriding user-defined ones\n    //\n    Add: function (src,dst,nouser) {\n      if (!dst) {dst = this}\n      for (var id in src) {if (src.hasOwnProperty(id)) {\n        if (typeof src[id] === 'object' && !(src[id] instanceof Array) &&\n           (typeof dst[id] === 'object' || typeof dst[id] === 'function')) \n             {this.Add(src[id],dst[id],src[id],nouser)}\n          else if (!dst[id] || !dst[id].isUser || !nouser) {dst[id] = src[id]}\n      }}\n      return dst;\n    }\n  };\n  var STARTUP = function () {\n    MML = MathJax.ElementJax.mml;\n    HUB.Insert(TEXDEF,{\n  \n      // patterns for letters and numbers\n      letter:  /[a-z]/i,\n      digit:   /[0-9.]/,\n      number:  /^(?:[0-9]+(?:\\{,\\}[0-9]{3})*(?:\\.[0-9]*)*|\\.[0-9]+)/,\n    \n      special: {\n        '\\\\':  'ControlSequence',\n        '{':   'Open',\n        '}':   'Close',\n        '~':   'Tilde',\n        '^':   'Superscript',\n        '_':   'Subscript',\n        ' ':   'Space',\n        \"\\t\":  'Space',\n        \"\\r\":  'Space',\n        \"\\n\":  'Space',\n        \"'\":   'Prime',\n        '%':   'Comment',\n        '&':   'Entry',\n        '#':   'Hash',\n        '\\u00A0': 'Space',\n        '\\u2019': 'Prime'\n      },\n      \n      remap: {\n        '-':   '2212',\n        '*':   '2217',\n        '`':   '2018'   // map ` to back quote\n      },\n    \n      mathchar0mi: {\n\t// Lower-case greek\n\talpha:        '03B1',\n\tbeta:         '03B2',\n\tgamma:        '03B3',\n\tdelta:        '03B4',\n\tepsilon:      '03F5',\n\tzeta:         '03B6',\n\teta:          '03B7',\n\ttheta:        '03B8',\n\tiota:         '03B9',\n\tkappa:        '03BA',\n\tlambda:       '03BB',\n\tmu:           '03BC',\n\tnu:           '03BD',\n\txi:           '03BE',\n\tomicron:      '03BF', // added for completeness\n\tpi:           '03C0',\n\trho:          '03C1',\n\tsigma:        '03C3',\n\ttau:          '03C4',\n\tupsilon:      '03C5',\n\tphi:          '03D5',\n\tchi:          '03C7',\n\tpsi:          '03C8',\n\tomega:        '03C9',\n\tvarepsilon:   '03B5',\n\tvartheta:     '03D1',\n\tvarpi:        '03D6',\n\tvarrho:       '03F1',\n\tvarsigma:     '03C2',\n\tvarphi:       '03C6',\n        \n        // Ord symbols\n        S:            ['00A7',{mathvariant: MML.VARIANT.NORMAL}],\n        aleph:        ['2135',{mathvariant: MML.VARIANT.NORMAL}],\n        hbar:         ['210F',{variantForm:true}],\n        imath:        '0131',\n        jmath:        '0237',\n        ell:          '2113',\n        wp:           ['2118',{mathvariant: MML.VARIANT.NORMAL}],\n        Re:           ['211C',{mathvariant: MML.VARIANT.NORMAL}],\n        Im:           ['2111',{mathvariant: MML.VARIANT.NORMAL}],\n        partial:      ['2202',{mathvariant: MML.VARIANT.NORMAL}],\n        infty:        ['221E',{mathvariant: MML.VARIANT.NORMAL}],\n        prime:        ['2032',{mathvariant: MML.VARIANT.NORMAL, variantForm:true}],\n        emptyset:     ['2205',{mathvariant: MML.VARIANT.NORMAL}],\n        nabla:        ['2207',{mathvariant: MML.VARIANT.NORMAL}],\n        top:          ['22A4',{mathvariant: MML.VARIANT.NORMAL}],\n        bot:          ['22A5',{mathvariant: MML.VARIANT.NORMAL}],\n        angle:        ['2220',{mathvariant: MML.VARIANT.NORMAL}],\n        triangle:     ['25B3',{mathvariant: MML.VARIANT.NORMAL}],\n        backslash:    ['2216',{mathvariant: MML.VARIANT.NORMAL, variantForm:true}],\n        forall:       ['2200',{mathvariant: MML.VARIANT.NORMAL}],\n        exists:       ['2203',{mathvariant: MML.VARIANT.NORMAL}],\n        neg:          ['00AC',{mathvariant: MML.VARIANT.NORMAL}],\n        lnot:         ['00AC',{mathvariant: MML.VARIANT.NORMAL}],\n        flat:         ['266D',{mathvariant: MML.VARIANT.NORMAL}],\n        natural:      ['266E',{mathvariant: MML.VARIANT.NORMAL}],\n        sharp:        ['266F',{mathvariant: MML.VARIANT.NORMAL}],\n        clubsuit:     ['2663',{mathvariant: MML.VARIANT.NORMAL}],\n        diamondsuit:  ['2662',{mathvariant: MML.VARIANT.NORMAL}],\n        heartsuit:    ['2661',{mathvariant: MML.VARIANT.NORMAL}],\n        spadesuit:    ['2660',{mathvariant: MML.VARIANT.NORMAL}]\n      },\n        \n      mathchar0mo: {\n        surd:         '221A',\n\n        // big ops\n        coprod:       ['2210',{texClass: MML.TEXCLASS.OP, movesupsub:true}],\n        bigvee:       ['22C1',{texClass: MML.TEXCLASS.OP, movesupsub:true}],\n        bigwedge:     ['22C0',{texClass: MML.TEXCLASS.OP, movesupsub:true}],\n        biguplus:     ['2A04',{texClass: MML.TEXCLASS.OP, movesupsub:true}],\n        bigcap:       ['22C2',{texClass: MML.TEXCLASS.OP, movesupsub:true}],\n        bigcup:       ['22C3',{texClass: MML.TEXCLASS.OP, movesupsub:true}],\n        'int':        ['222B',{texClass: MML.TEXCLASS.OP}],\n        intop:        ['222B',{texClass: MML.TEXCLASS.OP, movesupsub:true, movablelimits:true}],\n        iint:         ['222C',{texClass: MML.TEXCLASS.OP}],\n        iiint:        ['222D',{texClass: MML.TEXCLASS.OP}],\n        prod:         ['220F',{texClass: MML.TEXCLASS.OP, movesupsub:true}],\n        sum:          ['2211',{texClass: MML.TEXCLASS.OP, movesupsub:true}],\n        bigotimes:    ['2A02',{texClass: MML.TEXCLASS.OP, movesupsub:true}],\n        bigoplus:     ['2A01',{texClass: MML.TEXCLASS.OP, movesupsub:true}],\n        bigodot:      ['2A00',{texClass: MML.TEXCLASS.OP, movesupsub:true}],\n        oint:         ['222E',{texClass: MML.TEXCLASS.OP}],\n        bigsqcup:     ['2A06',{texClass: MML.TEXCLASS.OP, movesupsub:true}],\n        smallint:     ['222B',{largeop:false}],\n        \n        // binary operations\n        triangleleft:      '25C3',\n        triangleright:     '25B9',\n        bigtriangleup:     '25B3',\n        bigtriangledown:   '25BD',\n        wedge:        '2227',\n        land:         '2227',\n        vee:          '2228',\n        lor:          '2228',\n        cap:          '2229',\n        cup:          '222A',\n        ddagger:      '2021',\n        dagger:       '2020',\n        sqcap:        '2293',\n        sqcup:        '2294',\n        uplus:        '228E',\n        amalg:        '2A3F',\n        diamond:      '22C4',\n        bullet:       '2219',\n        wr:           '2240',\n        div:          '00F7',\n        odot:         ['2299',{largeop: false}],\n        oslash:       ['2298',{largeop: false}],\n        otimes:       ['2297',{largeop: false}],\n        ominus:       ['2296',{largeop: false}],\n        oplus:        ['2295',{largeop: false}],\n        mp:           '2213',\n        pm:           '00B1',\n        circ:         '2218',\n        bigcirc:      '25EF',\n        setminus:     ['2216',{variantForm:true}],\n        cdot:         '22C5',\n        ast:          '2217',\n        times:        '00D7',\n        star:         '22C6',\n        \n        // Relations\n        propto:       '221D',\n        sqsubseteq:   '2291',\n        sqsupseteq:   '2292',\n        parallel:     '2225',\n        mid:          '2223',\n        dashv:        '22A3',\n        vdash:        '22A2',\n        leq:          '2264',\n        le:           '2264',\n        geq:          '2265',\n        ge:           '2265',\n        lt:           '003C',\n        gt:           '003E',\n        succ:         '227B',\n        prec:         '227A',\n        approx:       '2248',\n        succeq:       '2AB0',  // or '227C',\n        preceq:       '2AAF',  // or '227D',\n        supset:       '2283',\n        subset:       '2282',\n        supseteq:     '2287',\n        subseteq:     '2286',\n        'in':         '2208',\n        ni:           '220B',\n        notin:        '2209',\n        owns:         '220B',\n        gg:           '226B',\n        ll:           '226A',\n        sim:          '223C',\n        simeq:        '2243',\n        perp:         '22A5',\n        equiv:        '2261',\n        asymp:        '224D',\n        smile:        '2323',\n        frown:        '2322',\n        ne:           '2260',\n        neq:          '2260',\n        cong:         '2245',\n        doteq:        '2250',\n        bowtie:       '22C8',\n        models:       '22A8',\n        \n        notChar:      '29F8',\n        \n        \n        // Arrows\n        Leftrightarrow:     '21D4',\n        Leftarrow:          '21D0',\n        Rightarrow:         '21D2',\n        leftrightarrow:     '2194',\n        leftarrow:          '2190',\n        gets:               '2190',\n        rightarrow:         '2192',\n        to:                 '2192',\n        mapsto:             '21A6',\n        leftharpoonup:      '21BC',\n        leftharpoondown:    '21BD',\n        rightharpoonup:     '21C0',\n        rightharpoondown:   '21C1',\n        nearrow:            '2197',\n        searrow:            '2198',\n        nwarrow:            '2196',\n        swarrow:            '2199',\n        rightleftharpoons:  '21CC',\n        hookrightarrow:     '21AA',\n        hookleftarrow:      '21A9',\n        longleftarrow:      '27F5',\n        Longleftarrow:      '27F8',\n        longrightarrow:     '27F6',\n        Longrightarrow:     '27F9',\n        Longleftrightarrow: '27FA',\n        longleftrightarrow: '27F7',\n        longmapsto:         '27FC',\n        \n        \n        // Misc.\n        ldots:            '2026',\n        cdots:            '22EF',\n        vdots:            '22EE',\n        ddots:            '22F1',\n        dotsc:            '2026',  // dots with commas\n        dotsb:            '22EF',  // dots with binary ops and relations\n        dotsm:            '22EF',  // dots with multiplication\n        dotsi:            '22EF',  // dots with integrals\n        dotso:            '2026',  // other dots\n        \n        ldotp:            ['002E', {texClass: MML.TEXCLASS.PUNCT}],\n        cdotp:            ['22C5', {texClass: MML.TEXCLASS.PUNCT}],\n        colon:            ['003A', {texClass: MML.TEXCLASS.PUNCT}]\n      },\n      \n      mathchar7: {\n        Gamma:        '0393',\n        Delta:        '0394',\n        Theta:        '0398',\n        Lambda:       '039B',\n        Xi:           '039E',\n        Pi:           '03A0',\n        Sigma:        '03A3',\n        Upsilon:      '03A5',\n        Phi:          '03A6',\n        Psi:          '03A8',\n        Omega:        '03A9',\n        \n        '_':          '005F',\n        '#':          '0023',\n        '$':          '0024',\n        '%':          '0025',\n        '&':          '0026',\n        And:          '0026'\n      },\n      \n      delimiter: {\n        '(':                '(',\n        ')':                ')',\n        '[':                '[',\n        ']':                ']',\n        '<':                '27E8',\n        '>':                '27E9',\n        '\\\\lt':             '27E8',\n        '\\\\gt':             '27E9',\n        '/':                '/',\n        '|':                ['|',{texClass:MML.TEXCLASS.ORD}],\n        '.':                '',\n        '\\\\\\\\':             '\\\\',\n        '\\\\lmoustache':     '23B0',  // non-standard\n        '\\\\rmoustache':     '23B1',  // non-standard\n        '\\\\lgroup':         '27EE',  // non-standard\n        '\\\\rgroup':         '27EF',  // non-standard\n        '\\\\arrowvert':      '23D0',\n        '\\\\Arrowvert':      '2016',\n        '\\\\bracevert':      '23AA',  // non-standard\n        '\\\\Vert':           ['2225',{texClass:MML.TEXCLASS.ORD}],\n        '\\\\|':              ['2225',{texClass:MML.TEXCLASS.ORD}],\n        '\\\\vert':           ['|',{texClass:MML.TEXCLASS.ORD}],\n        '\\\\uparrow':        '2191',\n        '\\\\downarrow':      '2193',\n        '\\\\updownarrow':    '2195',\n        '\\\\Uparrow':        '21D1',\n        '\\\\Downarrow':      '21D3',\n        '\\\\Updownarrow':    '21D5',\n        '\\\\backslash':      '\\\\',\n        '\\\\rangle':         '27E9',\n        '\\\\langle':         '27E8',\n        '\\\\rbrace':         '}',\n        '\\\\lbrace':         '{',\n        '\\\\}':              '}',\n        '\\\\{':              '{',\n        '\\\\rceil':          '2309',\n        '\\\\lceil':          '2308',\n        '\\\\rfloor':         '230B',\n        '\\\\lfloor':         '230A',\n        '\\\\lbrack':         '[',\n        '\\\\rbrack':         ']'\n      },\n      \n      macros: {\n        displaystyle:      ['SetStyle','D',true,0],\n        textstyle:         ['SetStyle','T',false,0],\n        scriptstyle:       ['SetStyle','S',false,1],\n        scriptscriptstyle: ['SetStyle','SS',false,2],\n        \n        rm:                ['SetFont',MML.VARIANT.NORMAL],\n        mit:               ['SetFont',MML.VARIANT.ITALIC],\n        oldstyle:          ['SetFont',MML.VARIANT.OLDSTYLE],\n        cal:               ['SetFont',MML.VARIANT.CALIGRAPHIC],\n        it:                ['SetFont',\"-tex-mathit\"], // needs special handling\n        bf:                ['SetFont',MML.VARIANT.BOLD],\n        bbFont:            ['SetFont',MML.VARIANT.DOUBLESTRUCK],\n        scr:               ['SetFont',MML.VARIANT.SCRIPT],\n        frak:              ['SetFont',MML.VARIANT.FRAKTUR],\n        sf:                ['SetFont',MML.VARIANT.SANSSERIF],\n        tt:                ['SetFont',MML.VARIANT.MONOSPACE],\n\n//      font:\n        \n        tiny:              ['SetSize',0.5],\n        Tiny:              ['SetSize',0.6],  // non-standard\n        scriptsize:        ['SetSize',0.7],\n        small:             ['SetSize',0.85],\n        normalsize:        ['SetSize',1.0],\n        large:             ['SetSize',1.2],\n        Large:             ['SetSize',1.44],\n        LARGE:             ['SetSize',1.73],\n        huge:              ['SetSize',2.07],\n        Huge:              ['SetSize',2.49],\n        \n        arcsin:            ['NamedFn'],\n        arccos:            ['NamedFn'],\n        arctan:            ['NamedFn'],\n        arg:               ['NamedFn'],\n        cos:               ['NamedFn'],\n        cosh:              ['NamedFn'],\n        cot:               ['NamedFn'],\n        coth:              ['NamedFn'],\n        csc:               ['NamedFn'],\n        deg:               ['NamedFn'],\n        det:                'NamedOp',\n        dim:               ['NamedFn'],\n        exp:               ['NamedFn'],\n        gcd:                'NamedOp',\n        hom:               ['NamedFn'],\n        inf:                'NamedOp',\n        ker:               ['NamedFn'],\n        lg:                ['NamedFn'],\n        lim:                'NamedOp',\n        liminf:            ['NamedOp','lim&thinsp;inf'],\n        limsup:            ['NamedOp','lim&thinsp;sup'],\n        ln:                ['NamedFn'],\n        log:               ['NamedFn'],\n        max:                'NamedOp',\n        min:                'NamedOp',\n        Pr:                 'NamedOp',\n        sec:               ['NamedFn'],\n        sin:               ['NamedFn'],\n        sinh:              ['NamedFn'],\n        sup:                'NamedOp',\n        tan:               ['NamedFn'],\n        tanh:              ['NamedFn'],\n        \n        limits:            ['Limits',1],\n        nolimits:          ['Limits',0],\n\n        overline:            ['UnderOver','00AF',null,1],\n        underline:           ['UnderOver','005F'],\n        overbrace:           ['UnderOver','23DE',1],\n        underbrace:          ['UnderOver','23DF',1],\n        overparen:           ['UnderOver','23DC'],\n        underparen:          ['UnderOver','23DD'],\n        overrightarrow:      ['UnderOver','2192'],\n        underrightarrow:     ['UnderOver','2192'],\n        overleftarrow:       ['UnderOver','2190'],\n        underleftarrow:      ['UnderOver','2190'],\n        overleftrightarrow:  ['UnderOver','2194'],\n        underleftrightarrow: ['UnderOver','2194'],\n\n        overset:            'Overset',\n        underset:           'Underset',\n        stackrel:           ['Macro','\\\\mathrel{\\\\mathop{#2}\\\\limits^{#1}}',2],\n          \n        over:               'Over',\n        overwithdelims:     'Over',\n        atop:               'Over',\n        atopwithdelims:     'Over',\n        above:              'Over',\n        abovewithdelims:    'Over',\n        brace:             ['Over','{','}'],\n        brack:             ['Over','[',']'],\n        choose:            ['Over','(',')'],\n        \n        frac:               'Frac',\n        sqrt:               'Sqrt',\n        root:               'Root',\n        uproot:            ['MoveRoot','upRoot'],\n        leftroot:          ['MoveRoot','leftRoot'],\n        \n        left:               'LeftRight',\n        right:              'LeftRight',\n        middle:             'Middle',\n\n        llap:               'Lap',\n        rlap:               'Lap',\n        raise:              'RaiseLower',\n        lower:              'RaiseLower',\n        moveleft:           'MoveLeftRight',\n        moveright:          'MoveLeftRight',\n\n        ',':               ['Spacer',MML.LENGTH.THINMATHSPACE],\n        ':':               ['Spacer',MML.LENGTH.MEDIUMMATHSPACE],  // for LaTeX\n        '>':               ['Spacer',MML.LENGTH.MEDIUMMATHSPACE],\n        ';':               ['Spacer',MML.LENGTH.THICKMATHSPACE],\n        '!':               ['Spacer',MML.LENGTH.NEGATIVETHINMATHSPACE],\n        enspace:           ['Spacer',\".5em\"],\n        quad:              ['Spacer',\"1em\"],\n        qquad:             ['Spacer',\"2em\"],\n        thinspace:         ['Spacer',MML.LENGTH.THINMATHSPACE],\n        negthinspace:      ['Spacer',MML.LENGTH.NEGATIVETHINMATHSPACE],\n    \n        hskip:              'Hskip',\n        hspace:             'Hskip',\n        kern:               'Hskip',\n        mskip:              'Hskip',\n        mspace:             'Hskip',\n        mkern:              'Hskip',\n        Rule:              ['Rule'],\n        Space:             ['Rule','blank'],\n    \n        big:               ['MakeBig',MML.TEXCLASS.ORD,0.85],\n        Big:               ['MakeBig',MML.TEXCLASS.ORD,1.15],\n        bigg:              ['MakeBig',MML.TEXCLASS.ORD,1.45],\n        Bigg:              ['MakeBig',MML.TEXCLASS.ORD,1.75],\n        bigl:              ['MakeBig',MML.TEXCLASS.OPEN,0.85],\n        Bigl:              ['MakeBig',MML.TEXCLASS.OPEN,1.15],\n        biggl:             ['MakeBig',MML.TEXCLASS.OPEN,1.45],\n        Biggl:             ['MakeBig',MML.TEXCLASS.OPEN,1.75],\n        bigr:              ['MakeBig',MML.TEXCLASS.CLOSE,0.85],\n        Bigr:              ['MakeBig',MML.TEXCLASS.CLOSE,1.15],\n        biggr:             ['MakeBig',MML.TEXCLASS.CLOSE,1.45],\n        Biggr:             ['MakeBig',MML.TEXCLASS.CLOSE,1.75],\n        bigm:              ['MakeBig',MML.TEXCLASS.REL,0.85],\n        Bigm:              ['MakeBig',MML.TEXCLASS.REL,1.15],\n        biggm:             ['MakeBig',MML.TEXCLASS.REL,1.45],\n        Biggm:             ['MakeBig',MML.TEXCLASS.REL,1.75],\n\n        mathord:           ['TeXAtom',MML.TEXCLASS.ORD],\n        mathop:            ['TeXAtom',MML.TEXCLASS.OP],\n        mathopen:          ['TeXAtom',MML.TEXCLASS.OPEN],\n        mathclose:         ['TeXAtom',MML.TEXCLASS.CLOSE],\n        mathbin:           ['TeXAtom',MML.TEXCLASS.BIN],\n        mathrel:           ['TeXAtom',MML.TEXCLASS.REL],\n        mathpunct:         ['TeXAtom',MML.TEXCLASS.PUNCT],\n        mathinner:         ['TeXAtom',MML.TEXCLASS.INNER],\n\n        vcenter:           ['TeXAtom',MML.TEXCLASS.VCENTER],\n\n        mathchoice:        ['Extension','mathchoice'],\n        buildrel:           'BuildRel',\n    \n        hbox:               ['HBox',0],\n        text:               'HBox',\n        mbox:               ['HBox',0],\n        fbox:               'FBox',\n\n        strut:              'Strut',\n        mathstrut:         ['Macro','\\\\vphantom{(}'],\n        phantom:            'Phantom',\n        vphantom:          ['Phantom',1,0],\n        hphantom:          ['Phantom',0,1],\n        smash:              'Smash',\n    \n        acute:             ['Accent', \"00B4\"],  // or 0301 or 02CA\n        grave:             ['Accent', \"0060\"],  // or 0300 or 02CB\n        ddot:              ['Accent', \"00A8\"],  // or 0308\n        tilde:             ['Accent', \"007E\"],  // or 0303 or 02DC\n        bar:               ['Accent', \"00AF\"],  // or 0304 or 02C9\n        breve:             ['Accent', \"02D8\"],  // or 0306\n        check:             ['Accent', \"02C7\"],  // or 030C\n        hat:               ['Accent', \"005E\"],  // or 0302 or 02C6\n        vec:               ['Accent', \"2192\"],  // or 20D7\n        dot:               ['Accent', \"02D9\"],  // or 0307\n        widetilde:         ['Accent', \"007E\",1], // or 0303 or 02DC\n        widehat:           ['Accent', \"005E\",1], // or 0302 or 02C6\n\n        matrix:             'Matrix',\n        array:              'Matrix',\n        pmatrix:           ['Matrix','(',')'],\n        cases:             ['Matrix','{','',\"left left\",null,\".1em\",null,true],\n        eqalign:           ['Matrix',null,null,\"right left\",MML.LENGTH.THICKMATHSPACE,\".5em\",'D'],\n        displaylines:      ['Matrix',null,null,\"center\",null,\".5em\",'D'],\n        cr:                 'Cr',\n        '\\\\':               'CrLaTeX',\n        newline:            'Cr',\n        hline:             ['HLine','solid'],\n        hdashline:         ['HLine','dashed'],\n//      noalign:            'HandleNoAlign',\n        eqalignno:         ['Matrix',null,null,\"right left\",MML.LENGTH.THICKMATHSPACE,\".5em\",'D',null,\"right\"],\n        leqalignno:        ['Matrix',null,null,\"right left\",MML.LENGTH.THICKMATHSPACE,\".5em\",'D',null,\"left\"],\n        hfill:              'HFill',\n        hfil:               'HFill',   // \\hfil treated as \\hfill for now\n        hfilll:             'HFill',   // \\hfilll treated as \\hfill for now\n\n        //  TeX substitution macros\n        bmod:              ['Macro','\\\\mmlToken{mo}[lspace=\"thickmathspace\" rspace=\"thickmathspace\"]{mod}'],\n        pmod:              ['Macro','\\\\pod{\\\\mmlToken{mi}{mod}\\\\kern 6mu #1}',1],\n        mod:               ['Macro','\\\\mathchoice{\\\\kern18mu}{\\\\kern12mu}{\\\\kern12mu}{\\\\kern12mu}\\\\mmlToken{mi}{mod}\\\\,\\\\,#1',1],\n        pod:               ['Macro','\\\\mathchoice{\\\\kern18mu}{\\\\kern8mu}{\\\\kern8mu}{\\\\kern8mu}(#1)',1],\n        iff:               ['Macro','\\\\;\\\\Longleftrightarrow\\\\;'],\n        skew:              ['Macro','{{#2{#3\\\\mkern#1mu}\\\\mkern-#1mu}{}}',3],\n        mathcal:           ['Macro','{\\\\cal #1}',1],\n        mathscr:           ['Macro','{\\\\scr #1}',1],\n        mathrm:            ['Macro','{\\\\rm #1}',1],\n        mathbf:            ['Macro','{\\\\bf #1}',1],\n        mathbb:            ['Macro','{\\\\bbFont #1}',1],\n        Bbb:               ['Macro','{\\\\bbFont #1}',1],\n        mathit:            ['Macro','{\\\\it #1}',1],\n        mathfrak:          ['Macro','{\\\\frak #1}',1],\n        mathsf:            ['Macro','{\\\\sf #1}',1],\n        mathtt:            ['Macro','{\\\\tt #1}',1],\n        textrm:            ['Macro','\\\\mathord{\\\\rm\\\\text{#1}}',1],\n        textit:            ['Macro','\\\\mathord{\\\\it\\\\text{#1}}',1],\n        textbf:            ['Macro','\\\\mathord{\\\\bf\\\\text{#1}}',1],\n        textsf:            ['Macro','\\\\mathord{\\\\sf\\\\text{#1}}',1],\n        texttt:            ['Macro','\\\\mathord{\\\\tt\\\\text{#1}}',1],\n        pmb:               ['Macro','\\\\rlap{#1}\\\\kern1px{#1}',1],\n        TeX:               ['Macro','T\\\\kern-.14em\\\\lower.5ex{E}\\\\kern-.115em X'],\n        LaTeX:             ['Macro','L\\\\kern-.325em\\\\raise.21em{\\\\scriptstyle{A}}\\\\kern-.17em\\\\TeX'],\n        ' ':               ['Macro','\\\\text{ }'],\n\n        //  Specially handled\n        not:                'Not',\n        dots:               'Dots',\n        space:              'Tilde',\n        '\\u00A0':           'Tilde',\n        \n\n        //  LaTeX\n        begin:              'BeginEnd',\n        end:                'BeginEnd',\n\n        newcommand:        ['Extension','newcommand'],\n        renewcommand:      ['Extension','newcommand'],\n        newenvironment:    ['Extension','newcommand'],\n        renewenvironment:  ['Extension','newcommand'],\n        def:               ['Extension','newcommand'],\n        let:               ['Extension','newcommand'],\n        \n        verb:              ['Extension','verb'],\n        \n        boldsymbol:        ['Extension','boldsymbol'],\n        \n        tag:               ['Extension','AMSmath'],\n        notag:             ['Extension','AMSmath'],\n        label:             ['Extension','AMSmath'],\n        ref:               ['Extension','AMSmath'],\n        eqref:             ['Extension','AMSmath'],\n        nonumber:          ['Macro','\\\\notag'],\n\n        //  Extensions to TeX\n        unicode:           ['Extension','unicode'],\n        color:              'Color',\n        \n        href:              ['Extension','HTML'],\n        'class':           ['Extension','HTML'],\n        style:             ['Extension','HTML'],\n        cssId:             ['Extension','HTML'],\n        bbox:              ['Extension','bbox'],\n    \n        mmlToken:           'MmlToken',\n\n        require:            'Require'\n\n      },\n      \n      environment: {\n        array:        ['AlignedArray'],\n        matrix:       ['Array',null,null,null,'c'],\n        pmatrix:      ['Array',null,'(',')','c'],\n        bmatrix:      ['Array',null,'[',']','c'],\n        Bmatrix:      ['Array',null,'\\\\{','\\\\}','c'],\n        vmatrix:      ['Array',null,'\\\\vert','\\\\vert','c'],\n        Vmatrix:      ['Array',null,'\\\\Vert','\\\\Vert','c'],\n        cases:        ['Array',null,'\\\\{','.','ll',null,\".2em\",'T'],\n\n        equation:     [null,'Equation'],\n        'equation*':  [null,'Equation'],\n\n        eqnarray:     ['ExtensionEnv',null,'AMSmath'],\n        'eqnarray*':  ['ExtensionEnv',null,'AMSmath'],\n\n        align:        ['ExtensionEnv',null,'AMSmath'],\n        'align*':     ['ExtensionEnv',null,'AMSmath'],\n        aligned:      ['ExtensionEnv',null,'AMSmath'],\n        multline:     ['ExtensionEnv',null,'AMSmath'],\n        'multline*':  ['ExtensionEnv',null,'AMSmath'],\n        split:        ['ExtensionEnv',null,'AMSmath'],\n        gather:       ['ExtensionEnv',null,'AMSmath'],\n        'gather*':    ['ExtensionEnv',null,'AMSmath'],\n        gathered:     ['ExtensionEnv',null,'AMSmath'],\n        alignat:      ['ExtensionEnv',null,'AMSmath'],\n        'alignat*':   ['ExtensionEnv',null,'AMSmath'],\n        alignedat:    ['ExtensionEnv',null,'AMSmath']\n      },\n      \n      p_height: 1.2 / .85   // cmex10 height plus depth over .85\n\n    });\n    \n    //\n    //  Add macros defined in the configuration\n    //\n    if (this.config.Macros) {\n      var MACROS = this.config.Macros;\n      for (var id in MACROS) {if (MACROS.hasOwnProperty(id)) {\n        if (typeof(MACROS[id]) === \"string\") {TEXDEF.macros[id] = ['Macro',MACROS[id]]}\n        else {TEXDEF.macros[id] = [\"Macro\"].concat(MACROS[id])}\n        TEXDEF.macros[id].isUser = true;\n      }}\n    }\n  };\n  \n  /************************************************************************/\n  /*\n   *   The TeX Parser\n   */\n\n  var PARSE = MathJax.Object.Subclass({\n    Init: function (string,env) {\n      this.string = string; this.i = 0; this.macroCount = 0;\n      var ENV; if (env) {ENV = {}; for (var id in env) {if (env.hasOwnProperty(id)) {ENV[id] = env[id]}}}\n      this.stack = TEX.Stack(ENV,!!env);\n      this.Parse(); this.Push(STACKITEM.stop());\n    },\n    Parse: function () {\n      var c, n;\n      while (this.i < this.string.length) {\n        c = this.string.charAt(this.i++); n = c.charCodeAt(0);\n        if (n >= 0xD800 && n < 0xDC00) {c += this.string.charAt(this.i++)}\n        if (TEXDEF.special[c]) {this[TEXDEF.special[c]](c)}\n        else if (TEXDEF.letter.test(c)) {this.Variable(c)}\n        else if (TEXDEF.digit.test(c)) {this.Number(c)}\n        else {this.Other(c)}\n      }\n    },\n    Push: function () {this.stack.Push.apply(this.stack,arguments)},\n    mml: function () {\n      if (this.stack.Top().type !== \"mml\") {return null}\n      return this.stack.Top().data[0];\n    },\n    mmlToken: function (token) {return token}, // used by boldsymbol extension\n\n    /************************************************************************/\n    /*\n     *   Handle various token classes\n     */\n\n    /*\n     *  Lookup a control-sequence and process it\n     */\n    ControlSequence: function (c) {\n      var name = this.GetCS(), macro = this.csFindMacro(name);\n      if (macro) {\n        if (!(macro instanceof Array)) {macro = [macro]}\n        var fn = macro[0]; if (!(fn instanceof Function)) {fn = this[fn]}\n        fn.apply(this,[c+name].concat(macro.slice(1)));\n      } else if (TEXDEF.mathchar0mi[name])            {this.csMathchar0mi(name,TEXDEF.mathchar0mi[name])}\n        else if (TEXDEF.mathchar0mo[name])            {this.csMathchar0mo(name,TEXDEF.mathchar0mo[name])}\n        else if (TEXDEF.mathchar7[name])              {this.csMathchar7(name,TEXDEF.mathchar7[name])}\n        else if (TEXDEF.delimiter[\"\\\\\"+name] != null) {this.csDelimiter(name,TEXDEF.delimiter[\"\\\\\"+name])}\n        else                                          {this.csUndefined(c+name)}\n    },\n    //\n    //  Look up a macro in the macros list\n    //  (overridden in begingroup extension)\n    //\n    csFindMacro: function (name) {return TEXDEF.macros[name]},\n    //\n    //  Handle normal mathchar (as an mi)\n    //\n    csMathchar0mi: function (name,mchar) {\n      var def = {mathvariant: MML.VARIANT.ITALIC};\n      if (mchar instanceof Array) {def = mchar[1]; mchar = mchar[0]}\n      this.Push(this.mmlToken(MML.mi(MML.entity(\"#x\"+mchar)).With(def)));\n    },\n    //\n    //  Handle normal mathchar (as an mo)\n    //\n    csMathchar0mo: function (name,mchar) {\n      var def = {stretchy: false};\n      if (mchar instanceof Array) {def = mchar[1]; def.stretchy = false; mchar = mchar[0]}\n      this.Push(this.mmlToken(MML.mo(MML.entity(\"#x\"+mchar)).With(def)));\n    },\n    //\n    //  Handle mathchar in current family\n    //\n    csMathchar7: function (name,mchar) {\n      var def = {mathvariant: MML.VARIANT.NORMAL};\n      if (mchar instanceof Array) {def = mchar[1]; mchar = mchar[0]}\n      if (this.stack.env.font) {def.mathvariant = this.stack.env.font}\n      this.Push(this.mmlToken(MML.mi(MML.entity(\"#x\"+mchar)).With(def)));\n    },\n    //\n    //  Handle delimiter\n    //\n    csDelimiter: function (name,delim) {\n      var def = {};\n      if (delim instanceof Array) {def = delim[1]; delim = delim[0]}\n      if (delim.length === 4) {delim = MML.entity('#x'+delim)} else {delim = MML.chars(delim)}\n      this.Push(this.mmlToken(MML.mo(delim).With({fence: false, stretchy: false}).With(def)));\n    },\n    //\n    //  Handle undefined control sequence\n    //  (overridden in noUndefined extension)\n    //\n    csUndefined: function (name) {\n      TEX.Error([\"UndefinedControlSequence\",\"Undefined control sequence %1\",name]);\n    },\n\n    /*\n     *  Handle a variable (a single letter)\n     */\n    Variable: function (c) {\n      var def = {}; if (this.stack.env.font) {def.mathvariant = this.stack.env.font}\n      this.Push(this.mmlToken(MML.mi(MML.chars(c)).With(def)));\n    },\n\n    /*\n     *  Determine the extent of a number (pattern may need work)\n     */\n    Number: function (c) {\n      var mml, n = this.string.slice(this.i-1).match(TEXDEF.number);\n      if (n) {mml = MML.mn(n[0].replace(/[{}]/g,\"\")); this.i += n[0].length - 1}\n        else {mml = MML.mo(MML.chars(c))}\n      if (this.stack.env.font) {mml.mathvariant = this.stack.env.font}\n      this.Push(this.mmlToken(mml));\n    },\n    \n    /*\n     *  Handle { and }\n     */\n    Open: function (c) {this.Push(STACKITEM.open())},\n    Close: function (c) {this.Push(STACKITEM.close())},\n    \n    /*\n     *  Handle tilde and spaces\n     */\n    Tilde: function (c) {this.Push(MML.mtext(MML.chars(NBSP)))},\n    Space: function (c) {},\n    \n    /*\n     *  Handle ^, _, and '\n     */\n    Superscript: function (c) {\n      if (this.GetNext().match(/\\d/)) // don't treat numbers as a unit\n        {this.string = this.string.substr(0,this.i+1)+\" \"+this.string.substr(this.i+1)}\n      var primes, base, top = this.stack.Top();\n      if (top.type === \"prime\") {base = top.data[0]; primes = top.data[1]; this.stack.Pop()}\n        else {base = this.stack.Prev(); if (!base) {base = MML.mi(\"\")}}\n      if (base.isEmbellishedWrapper) {base = base.data[0].data[0]}\n      var movesupsub = base.movesupsub, position = base.sup;\n      if ((base.type === \"msubsup\" && base.data[base.sup]) ||\n          (base.type === \"munderover\" && base.data[base.over] && !base.subsupOK))\n           {TEX.Error([\"DoubleExponent\",\"Double exponent: use braces to clarify\"])}\n      if (base.type !== \"msubsup\") {\n        if (movesupsub) {\n          if (base.type !== \"munderover\" || base.data[base.over]) {\n            if (base.movablelimits && base.isa(MML.mi)) {base = this.mi2mo(base)}\n            base = MML.munderover(base,null,null).With({movesupsub:true})\n          }\n          position = base.over;\n        } else {\n          base = MML.msubsup(base,null,null);\n          position = base.sup;\n        }\n      }\n      this.Push(STACKITEM.subsup(base).With({\n        position: position, primes: primes, movesupsub: movesupsub\n      }));\n    },\n    Subscript: function (c) {\n      if (this.GetNext().match(/\\d/)) // don't treat numbers as a unit\n        {this.string = this.string.substr(0,this.i+1)+\" \"+this.string.substr(this.i+1)}\n      var primes, base, top = this.stack.Top();\n      if (top.type === \"prime\") {base = top.data[0]; primes = top.data[1]; this.stack.Pop()}\n        else {base = this.stack.Prev(); if (!base) {base = MML.mi(\"\")}}\n      if (base.isEmbellishedWrapper) {base = base.data[0].data[0]}\n      var movesupsub = base.movesupsub, position = base.sub;\n      if ((base.type === \"msubsup\" && base.data[base.sub]) ||\n          (base.type === \"munderover\" && base.data[base.under] && !base.subsupOK))\n           {TEX.Error([\"DoubleSubscripts\",\"Double subscripts: use braces to clarify\"])}\n      if (base.type !== \"msubsup\") {\n        if (movesupsub) {\n          if (base.type !== \"munderover\" || base.data[base.under]) {\n            if (base.movablelimits && base.isa(MML.mi)) {base = this.mi2mo(base)}\n            base = MML.munderover(base,null,null).With({movesupsub:true})\n          }\n          position = base.under;\n        } else {\n          base = MML.msubsup(base,null,null);\n          position = base.sub;\n        }\n      }\n      this.Push(STACKITEM.subsup(base).With({\n        position: position, primes: primes, movesupsub: movesupsub\n      }));\n    },\n    PRIME: \"\\u2032\", SMARTQUOTE: \"\\u2019\",\n    Prime: function (c) {\n      var base = this.stack.Prev(); if (!base) {base = MML.mi()}\n      if (base.type === \"msubsup\" && base.data[base.sup]) {\n        TEX.Error([\"DoubleExponentPrime\",\n                   \"Prime causes double exponent: use braces to clarify\"]);\n      }\n      var sup = \"\"; this.i--;\n      do {sup += this.PRIME; this.i++, c = this.GetNext()}\n        while (c === \"'\" || c === this.SMARTQUOTE);\n      sup = [\"\",\"\\u2032\",\"\\u2033\",\"\\u2034\",\"\\u2057\"][sup.length] || sup;\n      this.Push(STACKITEM.prime(base,this.mmlToken(MML.mo(sup))));\n    },\n    mi2mo: function (mi) {\n      var mo = MML.mo();  mo.Append.apply(mo,mi.data); var id;\n      for (id in mo.defaults)\n        {if (mo.defaults.hasOwnProperty(id) && mi[id] != null) {mo[id] = mi[id]}}\n      for (id in MML.copyAttributes)\n        {if (MML.copyAttributes.hasOwnProperty(id) && mi[id] != null) {mo[id] = mi[id]}}\n      mo.lspace = mo.rspace = \"0\";  // prevent mo from having space in NativeMML\n      mo.useMMLspacing &= ~(mo.SPACE_ATTR.lspace | mo.SPACE_ATTR.rspace);  // don't count these explicit settings\n      return mo;\n    },\n    \n    /*\n     *  Handle comments\n     */\n    Comment: function (c) {\n      while (this.i < this.string.length && this.string.charAt(this.i) != \"\\n\") {this.i++}\n    },\n    \n    /*\n     *  Handle hash marks outside of definitions\n     */\n    Hash: function (c) {\n      TEX.Error([\"CantUseHash1\",\n                 \"You can't use 'macro parameter character #' in math mode\"]);\n    },\n    \n    /*\n     *  Handle other characters (as <mo> elements)\n     */\n    Other: function (c) {\n      var def, mo;\n      if (this.stack.env.font) {def = {mathvariant: this.stack.env.font}}\n      if (TEXDEF.remap[c]) {\n        c = TEXDEF.remap[c];\n        if (c instanceof Array) {def = c[1]; c = c[0]}\n        mo = MML.mo(MML.entity('#x'+c)).With(def);\n      } else {\n        mo = MML.mo(c).With(def);\n      }\n      if (mo.autoDefault(\"stretchy\",true)) {mo.stretchy = false}\n      if (mo.autoDefault(\"texClass\",true) == \"\") {mo = MML.TeXAtom(mo)}\n      this.Push(this.mmlToken(mo));\n    },\n    \n    /************************************************************************/\n    /*\n     *   Macros\n     */\n    \n    SetFont: function (name,font) {this.stack.env.font = font},\n    SetStyle: function (name,texStyle,style,level) {\n      this.stack.env.style = texStyle; this.stack.env.level = level;\n      this.Push(STACKITEM.style().With({styles: {displaystyle: style, scriptlevel: level}}));\n    },\n    SetSize: function (name,size) {\n      this.stack.env.size = size;\n      this.Push(STACKITEM.style().With({styles: {mathsize: size+\"em\"}})); // convert to absolute?\n    },\n\n    Color: function (name) {\n      var color = this.GetArgument(name);\n      var old = this.stack.env.color; this.stack.env.color = color;\n      var math = this.ParseArg(name);\n      if (old) {this.stack.env.color} else {delete this.stack.env.color}\n      this.Push(MML.mstyle(math).With({mathcolor: color}));\n    },\n    \n    Spacer: function (name,space) {\n      this.Push(MML.mspace().With({width: space, mathsize: MML.SIZE.NORMAL, scriptlevel:0}));\n    },\n    \n    LeftRight: function (name) {\n      this.Push(STACKITEM[name.substr(1)]().With({delim: this.GetDelimiter(name)}));\n    },\n    \n    Middle: function (name) {\n      var delim = this.GetDelimiter(name);\n      if (this.stack.Top().type !== \"left\")\n        {TEX.Error([\"MisplacedMiddle\",\"%1 must be within \\\\left and \\\\right\",name])}\n      this.Push(MML.mo(delim).With({stretchy:true}));\n    },\n    \n    NamedFn: function (name,id) {\n      if (!id) {id = name.substr(1)};\n      var mml = MML.mi(id).With({texClass: MML.TEXCLASS.OP});\n      this.Push(STACKITEM.fn(this.mmlToken(mml)));\n    },\n    NamedOp: function (name,id) {\n      if (!id) {id = name.substr(1)};\n      id = id.replace(/&thinsp;/,\"\\u2006\");\n      var mml = MML.mo(id).With({\n        movablelimits: true,\n        movesupsub: true,\n        form: MML.FORM.PREFIX,\n        texClass: MML.TEXCLASS.OP\n      });\n      mml.useMMLspacing &= ~mml.SPACE_ATTR.form;  // don't count this explicit form setting\n      this.Push(this.mmlToken(mml));\n    },\n    Limits: function (name,limits) {\n      var op = this.stack.Prev(\"nopop\");\n      if (!op || (op.Get(\"texClass\") !== MML.TEXCLASS.OP && op.movesupsub == null))\n        {TEX.Error([\"MisplacedLimits\",\"%1 is allowed only on operators\",name])}\n      var top = this.stack.Top();\n      if (op.type === \"munderover\" && !limits) {\n        op = top.data[top.data.length-1] = MML.msubsup.apply(MML.subsup,op.data);\n      } else if (op.type === \"msubsup\" && limits) {\n        op = top.data[top.data.length-1] = MML.munderover.apply(MML.underover,op.data);\n      }\n      op.movesupsub = (limits ? true : false);\n      op.Core().movablelimits = false;\n      if (op.movablelimits) op.movablelimits = false;\n    },\n    \n    Over: function (name,open,close) {\n      var mml = STACKITEM.over().With({name: name});\n      if (open || close) {\n        mml.open = open; mml.close = close;\n      } else if (name.match(/withdelims$/)) {\n        mml.open  = this.GetDelimiter(name);\n        mml.close = this.GetDelimiter(name);\n      }\n      if (name.match(/^\\\\above/)) {mml.thickness = this.GetDimen(name)}\n      else if (name.match(/^\\\\atop/) || open || close) {mml.thickness = 0}\n      this.Push(mml);\n    },\n\n    Frac: function (name) {\n      var num = this.ParseArg(name);\n      var den = this.ParseArg(name);\n      this.Push(MML.mfrac(num,den));\n    },\n\n    Sqrt: function (name) {\n      var n = this.GetBrackets(name), arg = this.GetArgument(name);\n      if (arg === \"\\\\frac\") {arg += \"{\"+this.GetArgument(arg)+\"}{\"+this.GetArgument(arg)+\"}\"}\n      var mml = TEX.Parse(arg,this.stack.env).mml();\n      if (!n) {mml = MML.msqrt.apply(MML,mml.array())}\n         else {mml = MML.mroot(mml,this.parseRoot(n))}\n      this.Push(mml);\n    },\n    Root: function (name) {\n      var n = this.GetUpTo(name,\"\\\\of\");\n      var arg = this.ParseArg(name);\n      this.Push(MML.mroot(arg,this.parseRoot(n)));\n    },\n    parseRoot: function (n) {\n      var env = this.stack.env, inRoot = env.inRoot; env.inRoot = true;\n      var parser = TEX.Parse(n,env); n = parser.mml(); var global = parser.stack.global;\n      if (global.leftRoot || global.upRoot) {\n        n = MML.mpadded(n);\n        if (global.leftRoot) {n.width = global.leftRoot}\n        if (global.upRoot) {n.voffset = global.upRoot; n.height = global.upRoot}\n      }\n      env.inRoot = inRoot;\n      return n;\n    },\n    MoveRoot: function (name,id) {\n      if (!this.stack.env.inRoot)\n        {TEX.Error([\"MisplacedMoveRoot\",\"%1 can appear only within a root\",name])}\n      if (this.stack.global[id])\n        {TEX.Error([\"MultipleMoveRoot\",\"Multiple use of %1\",name])}\n      var n = this.GetArgument(name);\n      if (!n.match(/-?[0-9]+/))\n        {TEX.Error([\"IntegerArg\",\"The argument to %1 must be an integer\",name])}\n      n = (n/15)+\"em\";\n      if (n.substr(0,1) !== \"-\") {n = \"+\"+n}\n      this.stack.global[id] = n;\n    },\n    \n    Accent: function (name,accent,stretchy) {\n      var c = this.ParseArg(name);\n      var def = {accent: true}; if (this.stack.env.font) {def.mathvariant = this.stack.env.font}\n      var mml = this.mmlToken(MML.mo(MML.entity(\"#x\"+accent)).With(def));\n      mml.stretchy = (stretchy ? true : false);\n      this.Push(MML.TeXAtom(MML.munderover(c,null,mml).With({accent: true})));\n    },\n    \n    UnderOver: function (name,c,stack,noaccent) {\n      var pos = {o: \"over\", u: \"under\"}[name.charAt(1)];\n      var base = this.ParseArg(name);\n      if (base.Get(\"movablelimits\")) {base.movablelimits = false}\n      if (base.isa(MML.munderover) && base.isEmbellished()) {\n        base.Core().With({lspace:0,rspace:0}); // get spacing right for NativeMML\n        base = MML.mrow(MML.mo().With({rspace:0}),base);  // add an empty <mi> so it's not embellished any more\n      }\n      var mml = MML.munderover(base,null,null);\n      mml.SetData(\n        mml[pos], \n        this.mmlToken(MML.mo(MML.entity(\"#x\"+c)).With({stretchy:true, accent:!noaccent}))\n      );\n      if (stack) {mml = MML.TeXAtom(mml).With({texClass:MML.TEXCLASS.OP, movesupsub:true})}\n      this.Push(mml.With({subsupOK:true}));\n    },\n    \n    Overset: function (name) {\n      var top = this.ParseArg(name), base = this.ParseArg(name);\n      if (base.movablelimits) base.movablelimits = false;\n      this.Push(MML.mover(base,top));\n    },\n    Underset: function (name) {\n      var bot = this.ParseArg(name), base = this.ParseArg(name);\n      if (base.movablelimits) base.movablelimits = false;\n      this.Push(MML.munder(base,bot));\n    },\n    \n    TeXAtom: function (name,mclass) {\n      var def = {texClass: mclass}, mml;\n      if (mclass == MML.TEXCLASS.OP) {\n        def.movesupsub = def.movablelimits = true;\n        var arg = this.GetArgument(name);\n        var match = arg.match(/^\\s*\\\\rm\\s+([a-zA-Z0-9 ]+)$/);\n        if (match) {\n          def.mathvariant = MML.VARIANT.NORMAL;\n          mml = STACKITEM.fn(this.mmlToken(MML.mi(match[1]).With(def)));\n        } else {\n          mml = STACKITEM.fn(MML.TeXAtom(TEX.Parse(arg,this.stack.env).mml()).With(def));\n        }\n      } else {mml = MML.TeXAtom(this.ParseArg(name)).With(def)}\n      this.Push(mml);\n    },\n    \n    MmlToken: function (name) {\n      var type = this.GetArgument(name),\n          attr = this.GetBrackets(name,\"\").replace(/^\\s+/,\"\"),\n          data = this.GetArgument(name),\n          def = {attrNames:[]}, match;\n      if (!MML[type] || !MML[type].prototype.isToken)\n        {TEX.Error([\"NotMathMLToken\",\"%1 is not a token element\",type])}\n      while (attr !== \"\") {\n        match = attr.match(/^([a-z]+)\\s*=\\s*('[^']*'|\"[^\"]*\"|[^ ,]*)\\s*,?\\s*/i);\n        if (!match)\n          {TEX.Error([\"InvalidMathMLAttr\",\"Invalid MathML attribute: %1\",attr])}\n        if (MML[type].prototype.defaults[match[1]] == null && !this.MmlTokenAllow[match[1]]) {\n          TEX.Error([\"UnknownAttrForElement\",\n                     \"%1 is not a recognized attribute for %2\",\n                     match[1],type]);\n        }\n        var value = this.MmlFilterAttribute(match[1],match[2].replace(/^(['\"])(.*)\\1$/,\"$2\"));\n        if (value) {\n          if (value.toLowerCase() === \"true\") {value = true}\n            else if (value.toLowerCase() === \"false\") {value = false}\n          def[match[1]] = value;\n          def.attrNames.push(match[1]);\n        }\n        attr = attr.substr(match[0].length);\n      }\n      this.Push(this.mmlToken(MML[type](data).With(def)));\n    },\n    MmlFilterAttribute: function (name,value) {return value},\n    MmlTokenAllow: {\n      fontfamily:1, fontsize:1, fontweight:1, fontstyle:1,\n      color:1, background:1,\n      id:1, \"class\":1, href:1, style:1\n    },\n    \n    Strut: function (name) {\n      this.Push(MML.mpadded(MML.mrow()).With({height: \"8.6pt\", depth: \"3pt\", width: 0}));\n    },\n    \n    Phantom: function (name,v,h) {\n      var box = MML.mphantom(this.ParseArg(name));\n      if (v || h) {\n        box = MML.mpadded(box);\n        if (h) {box.height = box.depth = 0}\n        if (v) {box.width = 0}\n      }\n      this.Push(MML.TeXAtom(box));\n    },\n    \n    Smash: function (name) {\n      var bt = this.trimSpaces(this.GetBrackets(name,\"\"));\n      var smash = MML.mpadded(this.ParseArg(name));\n      switch (bt) {\n        case \"b\": smash.depth = 0; break;\n        case \"t\": smash.height = 0; break;\n        default: smash.height = smash.depth = 0;\n      }\n      this.Push(MML.TeXAtom(smash));\n    },\n    \n    Lap: function (name) {\n      var mml = MML.mpadded(this.ParseArg(name)).With({width: 0});\n      if (name === \"\\\\llap\") {mml.lspace = \"-1width\"}\n      this.Push(MML.TeXAtom(mml));\n    },\n    \n    RaiseLower: function (name) {\n      var h = this.GetDimen(name);\n      var item = STACKITEM.position().With({name: name, move: 'vertical'});\n      if (h.charAt(0) === '-') {h = h.slice(1); name = {raise: \"\\\\lower\", lower: \"\\\\raise\"}[name.substr(1)]}\n      if (name === \"\\\\lower\") {item.dh = '-'+h; item.dd = '+'+h} else {item.dh = '+'+h; item.dd = '-'+h}\n      this.Push(item);\n    },\n    \n    MoveLeftRight: function (name) {\n      var h = this.GetDimen(name);\n      var nh = (h.charAt(0) === '-' ? h.slice(1) : '-'+h);\n      if (name === \"\\\\moveleft\") {var tmp = h; h = nh; nh = tmp}\n      this.Push(STACKITEM.position().With({\n        name: name, move: 'horizontal',\n        left:  MML.mspace().With({width: h, mathsize: MML.SIZE.NORMAL}),\n        right: MML.mspace().With({width: nh, mathsize: MML.SIZE.NORMAL})\n      }));\n    },\n    \n    Hskip: function (name) {\n      this.Push(MML.mspace().With({width: this.GetDimen(name), mathsize: MML.SIZE.NORMAL}));\n    },\n    \n    Rule: function (name,style) {\n      var w = this.GetDimen(name),\n          h = this.GetDimen(name),\n          d = this.GetDimen(name);\n      var mml, def = {width:w, height:h, depth:d};\n      if (style !== 'blank') {\n        if (parseFloat(w) && parseFloat(h)+parseFloat(d))\n          {def.mathbackground = (this.stack.env.color || \"black\")}\n        mml = MML.mpadded(MML.mrow()).With(def);\n      } else {\n        mml = MML.mspace().With(def);\n      }\n      this.Push(mml);\n    },\n    \n    MakeBig: function (name,mclass,size) {\n      size *= TEXDEF.p_height;\n      size = String(size).replace(/(\\.\\d\\d\\d).+/,'$1')+\"em\";\n      var delim = this.GetDelimiter(name,true);\n      this.Push(MML.TeXAtom(MML.mo(delim).With({\n        minsize: size, maxsize: size,\n        fence: true, stretchy: true, symmetric: true\n      })).With({texClass: mclass}));\n    },\n    \n    BuildRel: function (name) {\n      var top = this.ParseUpTo(name,\"\\\\over\");\n      var bot = this.ParseArg(name);\n      this.Push(MML.TeXAtom(MML.munderover(bot,null,top)).With({texClass: MML.TEXCLASS.REL}));\n    },\n    \n    HBox: function (name,style) {\n      this.Push.apply(this,this.InternalMath(this.GetArgument(name),style));\n    },\n    \n    FBox: function (name) {\n      this.Push(MML.menclose.apply(MML,this.InternalMath(this.GetArgument(name))).With({notation:\"box\"}));\n    },\n    \n    Not: function (name) {\n      this.Push(STACKITEM.not());\n    },\n    \n    Dots: function (name) {\n      this.Push(STACKITEM.dots().With({\n        ldots: this.mmlToken(MML.mo(MML.entity(\"#x2026\")).With({stretchy:false})),\n        cdots: this.mmlToken(MML.mo(MML.entity(\"#x22EF\")).With({stretchy:false}))\n      }));\n    },\n    \n    Require: function (name) {\n      var file = this.GetArgument(name)\n        .replace(/.*\\//,\"\")            // remove any leading path\n        .replace(/[^a-z0-9_.-]/ig,\"\"); // remove illegal characters\n      this.Extension(null,file);\n    },\n    \n    Extension: function (name,file,array) {\n      if (name && !typeof(name) === \"string\") {name = name.name}\n      file = TEX.extensionDir+\"/\"+file;\n      if (!file.match(/\\.js$/)) {file += \".js\"}\n      if (!AJAX.loaded[AJAX.fileURL(file)]) {\n        if (name != null) {delete TEXDEF[array || 'macros'][name.replace(/^\\\\/,\"\")]}\n        HUB.RestartAfter(AJAX.Require(file));\n      }\n    },\n    \n    Macro: function (name,macro,argcount,def) {\n      if (argcount) {\n        var args = [];\n        if (def != null) {\n          var optional = this.GetBrackets(name);\n          args.push(optional == null ? def : optional);\n        }\n        for (var i = args.length; i < argcount; i++) {args.push(this.GetArgument(name))}\n        macro = this.SubstituteArgs(args,macro);\n      }\n      this.string = this.AddArgs(macro,this.string.slice(this.i));\n      this.i = 0;\n      if (++this.macroCount > TEX.config.MAXMACROS) {\n        TEX.Error([\"MaxMacroSub1\",\n                   \"MathJax maximum macro substitution count exceeded; \" +\n                   \"is there a recursive macro call?\"]);\n      }\n    },\n    \n    Matrix: function (name,open,close,align,spacing,vspacing,style,cases,numbered) {\n      var c = this.GetNext();\n      if (c === \"\")\n        {TEX.Error([\"MissingArgFor\",\"Missing argument for %1\",name])}\n      if (c === \"{\") {this.i++} else {this.string = c+\"}\"+this.string.slice(this.i+1); this.i = 0}\n      var array = STACKITEM.array().With({\n        requireClose: true,\n        arraydef: {\n          rowspacing: (vspacing||\"4pt\"),\n          columnspacing: (spacing||\"1em\")\n        }\n      });\n      if (cases)         {array.isCases = true}\n      if (numbered)      {array.isNumbered = true; array.arraydef.side = numbered}\n      if (open || close) {array.open = open; array.close = close}\n      if (style === \"D\") {array.arraydef.displaystyle = true}\n      if (align != null) {array.arraydef.columnalign = align}\n      this.Push(array);\n    },\n    \n    Entry: function (name) {\n      this.Push(STACKITEM.cell().With({isEntry: true, name: name}));\n      if (this.stack.Top().isCases) {\n        var string = this.string;\n        var braces = 0, i = this.i, m = string.length;\n        while (i < m) {\n          var c = string.charAt(i);\n          if (c === \"{\") {braces++; i++}\n          else if (c === \"}\") {if (braces === 0) {m = 0} else {braces--; i++}}\n          else if (c === \"&\" && braces === 0) {\n            TEX.Error([\"ExtraAlignTab\",\"Extra alignment tab in \\\\cases text\"]);\n          } else if (c === \"\\\\\") {\n            if (string.substr(i).match(/^((\\\\cr)[^a-zA-Z]|\\\\\\\\)/)) {m = 0} else {i += 2}\n          } else {i++}\n        }\n        var text = string.substr(this.i,i-this.i);\n        if (!text.match(/^\\s*\\\\text[^a-zA-Z]/)) {\n          this.Push.apply(this,this.InternalMath(text,0));\n          this.i = i;\n        }\n      }\n    },\n    \n    Cr: function (name) {\n      this.Push(STACKITEM.cell().With({isCR: true, name: name}));\n    },\n    \n    CrLaTeX: function (name) {\n      var n;\n      if (this.string.charAt(this.i) === \"[\") {\n        n = this.GetBrackets(name,\"\").replace(/ /g,\"\").replace(/,/,\".\");\n        if (n && !this.matchDimen(n)) {\n          TEX.Error([\"BracketMustBeDimension\",\n                     \"Bracket argument to %1 must be a dimension\",name]);\n        }\n      }\n      this.Push(STACKITEM.cell().With({isCR: true, name: name, linebreak: true}));\n      var top = this.stack.Top();\n      if (top.isa(STACKITEM.array)) {\n        if (n && top.arraydef.rowspacing) {\n          var rows = top.arraydef.rowspacing.split(/ /);\n          if (!top.rowspacing) {top.rowspacing = this.dimen2em(rows[0])}\n          while (rows.length < top.table.length) {rows.push(this.Em(top.rowspacing))}\n          rows[top.table.length-1] = this.Em(Math.max(0,top.rowspacing+this.dimen2em(n)));\n          top.arraydef.rowspacing = rows.join(' ');\n        }\n      } else {\n        if (n) {this.Push(MML.mspace().With({depth:n}))}\n        this.Push(MML.mspace().With({linebreak:MML.LINEBREAK.NEWLINE}));\n      }\n    },\n    emPerInch: 7.2,\n    pxPerInch: 72,\n    matchDimen: function (dim) {\n      return dim.match(/^(-?(?:\\.\\d+|\\d+(?:\\.\\d*)?))(px|pt|em|ex|mu|pc|in|mm|cm)$/);\n    },\n    dimen2em: function (dim) {\n      var match = this.matchDimen(dim);\n      var m = parseFloat(match[1]||\"1\"), unit = match[2];\n      if (unit === \"em\") {return m}\n      if (unit === \"ex\") {return m * .43}\n      if (unit === \"pt\") {return m / 10}                    // 10 pt to an em\n      if (unit === \"pc\") {return m * 1.2}                   // 12 pt to a pc\n      if (unit === \"px\") {return m * this.emPerInch / this.pxPerInch}\n      if (unit === \"in\") {return m * this.emPerInch}\n      if (unit === \"cm\") {return m * this.emPerInch / 2.54} // 2.54 cm to an inch\n      if (unit === \"mm\") {return m * this.emPerInch / 25.4} // 10 mm to a cm\n      if (unit === \"mu\") {return m / 18}\n      return 0;\n    },\n    Em: function (m) {\n      if (Math.abs(m) < .0006) {return \"0em\"}\n      return m.toFixed(3).replace(/\\.?0+$/,\"\") + \"em\";\n    },\n    \n    HLine: function (name,style) {\n      if (style == null) {style = \"solid\"}\n      var top = this.stack.Top();\n      if (!top.isa(STACKITEM.array) || top.data.length)\n        {TEX.Error([\"Misplaced\",\"Misplaced %1\",name])}\n      if (top.table.length == 0) {\n        top.frame.push(\"top\");\n      } else {\n        var lines = (top.arraydef.rowlines ? top.arraydef.rowlines.split(/ /) : []);\n        while (lines.length < top.table.length) {lines.push(\"none\")}\n        lines[top.table.length-1] = style;\n        top.arraydef.rowlines = lines.join(' ');\n      }\n    },\n    \n    HFill: function (name) {\n      var top = this.stack.Top();\n      if (top.isa(STACKITEM.array)) top.hfill.push(top.data.length);\n        else TEX.Error([\"UnsupportedHFill\",\"Unsupported use of %1\",name]);\n    },\n    \n\n    \n   /************************************************************************/\n   /*\n    *   LaTeX environments\n    */\n\n    BeginEnd: function (name) {\n      var env = this.GetArgument(name), isEnd = false;\n      if (env.match(/^\\\\end\\\\/)) {isEnd = true; env = env.substr(5)} // special \\end{} for \\newenvironment environments\n      if (env.match(/\\\\/i)) {TEX.Error([\"InvalidEnv\",\"Invalid environment name '%1'\",env])}\n      var cmd = this.envFindName(env);\n      if (!cmd) {TEX.Error([\"UnknownEnv\",\"Unknown environment '%1'\",env])}\n      if (!(cmd instanceof Array)) {cmd = [cmd]}\n      var end = (cmd[1] instanceof Array ? cmd[1][0] : cmd[1]);\n      var mml = STACKITEM.begin().With({name: env, end: end, parse:this});\n      if (name === \"\\\\end\") {\n        if (!isEnd && cmd[1] instanceof Array && this[cmd[1][1]]) {\n          mml = this[cmd[1][1]].apply(this,[mml].concat(cmd.slice(2)));\n        } else {\n          mml = STACKITEM.end().With({name: env});\n        }\n      } else {\n        if (++this.macroCount > TEX.config.MAXMACROS) {\n          TEX.Error([\"MaxMacroSub2\",\n                     \"MathJax maximum substitution count exceeded; \" +\n                     \"is there a recursive latex environment?\"]);\n        }\n        if (cmd[0] && this[cmd[0]]) {mml = this[cmd[0]].apply(this,[mml].concat(cmd.slice(2)))}\n      }\n      this.Push(mml);\n    },\n    envFindName: function (name) {return TEXDEF.environment[name]},\n    \n    Equation: function (begin,row) {return row},\n    \n    ExtensionEnv: function (begin,file) {this.Extension(begin.name,file,\"environment\")},\n    \n    Array: function (begin,open,close,align,spacing,vspacing,style,raggedHeight) {\n      if (!align) {align = this.GetArgument(\"\\\\begin{\"+begin.name+\"}\")}\n      var lines = (\"c\"+align).replace(/[^clr|:]/g,'').replace(/[^|:]([|:])+/g,'$1');\n      align = align.replace(/[^clr]/g,'').split('').join(' ');\n      align = align.replace(/l/g,'left').replace(/r/g,'right').replace(/c/g,'center');\n      var array = STACKITEM.array().With({\n        arraydef: {\n          columnalign: align,\n          columnspacing: (spacing||\"1em\"),\n          rowspacing: (vspacing||\"4pt\")\n        }\n      });\n      if (lines.match(/[|:]/)) {\n        if (lines.charAt(0).match(/[|:]/)) {array.frame.push(\"left\"); array.frame.dashed = lines.charAt(0) === \":\"}\n        if (lines.charAt(lines.length-1).match(/[|:]/)) {array.frame.push(\"right\")}\n        lines = lines.substr(1,lines.length-2);\n        array.arraydef.columnlines =\n          lines.split('').join(' ').replace(/[^|: ]/g,'none').replace(/\\|/g,'solid').replace(/:/g,'dashed');\n      }\n      if (open)  {array.open  = this.convertDelimiter(open)}\n      if (close) {array.close = this.convertDelimiter(close)}\n      if (style === \"D\") {array.arraydef.displaystyle = true}\n         else if (style) {array.arraydef.displaystyle = false}\n      if (style === \"S\") {array.arraydef.scriptlevel = 1} // FIXME: should use mstyle?\n      if (raggedHeight)  {array.arraydef.useHeight = false}\n      this.Push(begin);\n      return array;\n    },\n    \n    AlignedArray: function (begin) {\n      var align = this.GetBrackets(\"\\\\begin{\"+begin.name+\"}\");\n      return this.setArrayAlign(this.Array.apply(this,arguments),align);\n    },\n    setArrayAlign: function (array,align) {\n      align = this.trimSpaces(align||\"\");\n      if (align === \"t\") {array.arraydef.align = \"baseline 1\"}\n      else if (align === \"b\") {array.arraydef.align = \"baseline -1\"}\n      else if (align === \"c\") {array.arraydef.align = \"center\"}\n      else if (align) {array.arraydef.align = align} // FIXME: should be an error?\n      return array;\n    },\n    \n    /************************************************************************/\n    /*\n     *   String handling routines\n     */\n\n    /*\n     *  Convert delimiter to character\n     */\n    convertDelimiter: function (c) {\n      if (c) {c = TEXDEF.delimiter[c]}\n      if (c == null) {return null}\n      if (c instanceof Array) {c = c[0]}\n      if (c.length === 4) {c = String.fromCharCode(parseInt(c,16))}\n      return c;\n    },\n\n    /*\n     *  Trim spaces from a string\n     */\n    trimSpaces: function (text) {\n      if (typeof(text) != 'string') {return text}\n      return text.replace(/^\\s+|\\s+$/g,'');\n    },\n\n    /*\n     *   Check if the next character is a space\n     */\n    nextIsSpace: function () {\n      return this.string.charAt(this.i).match(/\\s/);\n    },\n    \n    /*\n     *  Get the next non-space character\n     */\n    GetNext: function () {\n      while (this.nextIsSpace()) {this.i++}\n      return this.string.charAt(this.i);\n    },\n  \n    /*\n     *  Get and return a control-sequence name\n     */\n    GetCS: function () {\n      var CS = this.string.slice(this.i).match(/^([a-z]+|.) ?/i);\n      if (CS) {this.i += CS[1].length; return CS[1]} else {this.i++; return \" \"}\n    },\n\n    /*\n     *  Get and return a TeX argument (either a single character or control sequence,\n     *  or the contents of the next set of braces).\n     */\n    GetArgument: function (name,noneOK) {\n      switch (this.GetNext()) {\n       case \"\":\n        if (!noneOK) {TEX.Error([\"MissingArgFor\",\"Missing argument for %1\",name])}\n        return null;\n       case '}':\n        if (!noneOK) {\n          TEX.Error([\"ExtraCloseMissingOpen\",\n                     \"Extra close brace or missing open brace\"]);\n        }\n        return null;\n       case '\\\\':\n        this.i++; return \"\\\\\"+this.GetCS();\n       case '{':\n        var j = ++this.i, parens = 1;\n        while (this.i < this.string.length) {\n          switch (this.string.charAt(this.i++)) {\n           case '\\\\':  this.i++; break;\n           case '{':   parens++; break;\n           case '}':\n            if (--parens == 0) {return this.string.slice(j,this.i-1)}\n            break;\n          }\n        }\n        TEX.Error([\"MissingCloseBrace\",\"Missing close brace\"]);\n        break;\n      }        \n      return this.string.charAt(this.i++);\n    },\n    \n    /*\n     *  Get an optional LaTeX argument in brackets\n     */\n    GetBrackets: function (name,def) {\n      if (this.GetNext() != '[') {return def};\n      var j = ++this.i, parens = 0;\n      while (this.i < this.string.length) {\n        switch (this.string.charAt(this.i++)) {\n         case '{':   parens++; break;\n         case '\\\\':  this.i++; break;\n         case '}':\n          if (parens-- <= 0) {\n            TEX.Error([\"ExtraCloseLooking\",\n                       \"Extra close brace while looking for %1\",\"']'\"]);\n          }\n          break;   \n         case ']':\n          if (parens == 0) {return this.string.slice(j,this.i-1)}\n          break;\n        }\n      }\n      TEX.Error([\"MissingCloseBracket\",\n                 \"Couldn't find closing ']' for argument to %1\",name]);\n    },\n  \n    /*\n     *  Get the name of a delimiter (check it in the delimiter list).\n     */\n    GetDelimiter: function (name,braceOK) {\n      while (this.nextIsSpace()) {this.i++}\n      var c = this.string.charAt(this.i); this.i++;\n      if (this.i <= this.string.length) {\n        if (c == \"\\\\\") {c += this.GetCS(name)}\n        else if (c === \"{\" && braceOK) {this.i--; c = this.GetArgument(name)}\n        if (TEXDEF.delimiter[c] != null) {return this.convertDelimiter(c)}\n      }\n      TEX.Error([\"MissingOrUnrecognizedDelim\",\n                 \"Missing or unrecognized delimiter for %1\",name]);\n    },\n\n    /*\n     *  Get a dimension (including its units).\n     */\n    GetDimen: function (name) {\n      var dimen;\n      if (this.nextIsSpace()) {this.i++}\n      if (this.string.charAt(this.i) == '{') {\n        dimen = this.GetArgument(name);\n        if (dimen.match(/^\\s*([-+]?([.,]\\d+|\\d+([.,]\\d*)?))\\s*(pt|em|ex|mu|px|mm|cm|in|pc)\\s*$/))\n          {return dimen.replace(/ /g,\"\").replace(/,/,\".\")}\n      } else {\n        dimen = this.string.slice(this.i);\n        var match = dimen.match(/^\\s*(([-+]?([.,]\\d+|\\d+([.,]\\d*)?))\\s*(pt|em|ex|mu|px|mm|cm|in|pc)) ?/);\n        if (match) {\n          this.i += match[0].length;\n          return match[1].replace(/ /g,\"\").replace(/,/,\".\");\n        }\n      }\n      TEX.Error([\"MissingDimOrUnits\",\n                 \"Missing dimension or its units for %1\",name]);\n    },\n    \n    /*\n     *  Get everything up to the given control sequence (token)\n     */\n    GetUpTo: function (name,token) {\n      while (this.nextIsSpace()) {this.i++}\n      var j = this.i, k, c, parens = 0;\n      while (this.i < this.string.length) {\n        k = this.i; c = this.string.charAt(this.i++);\n        switch (c) {\n         case '\\\\':  c += this.GetCS(); break;\n         case '{':   parens++; break;\n         case '}':\n          if (parens == 0) {\n            TEX.Error([\"ExtraCloseLooking\",\n                       \"Extra close brace while looking for %1\",token])\n          }\n          parens--;\n          break;\n        }\n        if (parens == 0 && c == token) {return this.string.slice(j,k)}\n      }\n      TEX.Error([\"TokenNotFoundForCommand\",\n                 \"Couldn't find %1 for %2\",token,name]);\n    },\n\n    /*\n     *  Parse various substrings\n     */\n    ParseArg: function (name) {return TEX.Parse(this.GetArgument(name),this.stack.env).mml()},\n    ParseUpTo: function (name,token) {return TEX.Parse(this.GetUpTo(name,token),this.stack.env).mml()},\n    \n    /*\n     *  Break up a string into text and math blocks\n     */\n    InternalMath: function (text,level) {\n      var def = (this.stack.env.font ? {mathvariant: this.stack.env.font} : {});\n      var mml = [], i = 0, k = 0, c, match = '', braces = 0;\n      if (text.match(/\\\\?[${}\\\\]|\\\\\\(|\\\\(eq)?ref\\s*\\{/)) {\n        while (i < text.length) {\n          c = text.charAt(i++);\n          if (c === '$') {\n            if (match === '$' && braces === 0) {\n              mml.push(MML.TeXAtom(TEX.Parse(text.slice(k,i-1),{}).mml()));\n              match = ''; k = i;\n            } else if (match === '') {\n              if (k < i-1) mml.push(this.InternalText(text.slice(k,i-1),def));\n              match = '$'; k = i;\n            }\n          } else if (c === '{' && match !== '') {\n            braces++;\n          } else if (c === '}') {\n            if (match === '}' && braces === 0) {\n              mml.push(MML.TeXAtom(TEX.Parse(text.slice(k,i),{}).mml().With(def)));\n              match = ''; k = i;\n            } else if (match !== '') {\n              if (braces) braces--;\n            }\n          } else if (c === '\\\\') {\n            if (match === '' && text.substr(i).match(/^(eq)?ref\\s*\\{/)) {\n              var len = RegExp[\"$&\"].length;\n              if (k < i-1) mml.push(this.InternalText(text.slice(k,i-1),def));\n              match = '}'; k = i-1; i += len;\n            } else {\n              c = text.charAt(i++);\n              if (c === '(' && match === '') {\n                if (k < i-2) mml.push(this.InternalText(text.slice(k,i-2),def));\n                match = ')'; k = i;\n              } else if (c === ')' && match === ')' && braces === 0) {\n                mml.push(MML.TeXAtom(TEX.Parse(text.slice(k,i-2),{}).mml()));\n                match = ''; k = i;\n              } else if (c.match(/[${}\\\\]/) && match === '')  {\n                i--; text = text.substr(0,i-1) + text.substr(i); // remove \\ from \\$, \\{, \\}, or \\\\\n              }\n            }\n          }\n        }\n        if (match !== '') TEX.Error([\"MathNotTerminated\",\"Math not terminated in text box\"]);\n      }\n      if (k < text.length) mml.push(this.InternalText(text.slice(k),def));\n      if (level != null) {\n        mml = [MML.mstyle.apply(MML,mml).With({displaystyle:false,scriptlevel:level})];\n      } else if (mml.length > 1) {\n        mml = [MML.mrow.apply(MML,mml)];\n      }\n      return mml;\n    },\n    InternalText: function (text,def) {\n      text = text.replace(/^\\s+/,NBSP).replace(/\\s+$/,NBSP);\n      return MML.mtext(MML.chars(text)).With(def);\n    },\n\n    /*\n     *  Replace macro paramters with their values\n     */\n    SubstituteArgs: function (args,string) {\n      var text = ''; var newstring = ''; var c; var i = 0;\n      while (i < string.length) {\n        c = string.charAt(i++);\n        if (c === \"\\\\\") {text += c + string.charAt(i++)}\n        else if (c === '#') {\n          c = string.charAt(i++);\n          if (c === '#') {text += c} else {\n            if (!c.match(/[1-9]/) || c > args.length) {\n              TEX.Error([\"IllegalMacroParam\",\n                         \"Illegal macro parameter reference\"]);\n            }\n            newstring = this.AddArgs(this.AddArgs(newstring,text),args[c-1]);\n            text = '';\n          }\n        } else {text += c}\n      }\n      return this.AddArgs(newstring,text);\n    },\n    \n    /*\n     *  Make sure that macros are followed by a space if their names\n     *  could accidentally be continued into the following text.\n     */\n    AddArgs: function (s1,s2) {\n      if (s2.match(/^[a-z]/i) && s1.match(/(^|[^\\\\])(\\\\\\\\)*\\\\[a-z]+$/i)) {s1 += ' '}\n      if (s1.length + s2.length > TEX.config.MAXBUFFER) {\n        TEX.Error([\"MaxBufferSize\",\n                   \"MathJax internal buffer size exceeded; is there a recursive macro call?\"]);\n      }\n      return s1+s2;\n    }\n    \n  });\n  \n  /************************************************************************/\n\n  TEX.Augment({\n    Stack: STACK, Parse: PARSE, Definitions: TEXDEF, Startup: STARTUP,\n    \n    config: {\n      MAXMACROS: 10000,    // maximum number of macro substitutions per equation\n      MAXBUFFER: 5*1024    // maximum size of TeX string to process\n    },\n    \n    sourceMenuTitle: /*_(MathMenu)*/ [\"TeXCommands\",\"TeX Commands\"],\n    annotationEncoding: \"application/x-tex\",\n\n    prefilterHooks: MathJax.Callback.Hooks(true),    // hooks to run before processing TeX\n    postfilterHooks: MathJax.Callback.Hooks(true),   // hooks to run after processing TeX\n    \n    //\n    //  Check if AMSmath extension must be loaded and push\n    //    it on the extensions array, if needed\n    //\n    Config: function () {\n      this.SUPER(arguments).Config.apply(this,arguments);\n      if (this.config.equationNumbers.autoNumber !== \"none\") {\n        if (!this.config.extensions) {this.config.extensions = []}\n        this.config.extensions.push(\"AMSmath.js\");\n      }\n    },\n\n    //\n    //  Convert TeX to ElementJax\n    //\n    Translate: function (script) {\n      var mml, isError = false, math = MathJax.HTML.getScript(script);\n      var display = (script.type.replace(/\\n/g,\" \").match(/(;|\\s|\\n)mode\\s*=\\s*display(;|\\s|\\n|$)/) != null);\n      var data = {math:math, display:display, script:script};\n      var callback = this.prefilterHooks.Execute(data); if (callback) return callback;\n      math = data.math;\n      try {\n        mml = TEX.Parse(math).mml();\n      } catch(err) {\n        if (!err.texError) {throw err}\n        mml = this.formatError(err,math,display,script);\n        isError = true;\n      }\n      if (mml.isa(MML.mtable) && mml.displaystyle === \"inherit\") mml.displaystyle = display; // for tagged equations\n      if (mml.inferred) {mml = MML.apply(MathJax.ElementJax,mml.data)} else {mml = MML(mml)}\n      if (display) {mml.root.display = \"block\"}\n      if (isError) {mml.texError = true}\n      data.math = mml; \n      return this.postfilterHooks.Execute(data) || data.math;\n    },\n    prefilterMath: function (math,displaystyle,script) {\n      return math;\n    },\n    postfilterMath: function (math,displaystyle,script) {\n      this.combineRelations(math.root);\n      return math;\n    },\n    formatError: function (err,math,display,script) {\n      var message = err.message.replace(/\\n.*/,\"\");\n      HUB.signal.Post([\"TeX Jax - parse error\",message,math,display,script]);\n      return MML.Error(message);\n    },\n\n    //\n    //  Produce an error and stop processing this equation\n    //\n    Error: function (message) {\n      //\n      //  Translate message if it is [\"id\",\"message\",args]\n      //\n      if (message instanceof Array) {message = _.apply(_,message)}\n      throw HUB.Insert(Error(message),{texError: true});\n    },\n    \n    //\n    //  Add a user-defined macro to the macro list\n    //\n    Macro: function (name,def,argn) {\n      TEXDEF.macros[name] = ['Macro'].concat([].slice.call(arguments,1));\n      TEXDEF.macros[name].isUser = true;\n    },\n    \n    /*\n     *  Create an mrow that has stretchy delimiters at either end, as needed\n     */\n    fenced: function (open,mml,close) {\n      var mrow = MML.mrow().With({open:open, close:close, texClass:MML.TEXCLASS.INNER});\n      mrow.Append(MML.mo(open).With({fence:true, stretchy:true, texClass:MML.TEXCLASS.OPEN}));\n      if (mml.type === \"mrow\") {mrow.Append.apply(mrow,mml.data)} else {mrow.Append(mml)}\n      mrow.Append(MML.mo(close).With({fence:true, stretchy:true, texClass:MML.TEXCLASS.CLOSE}));\n      return mrow;\n    },\n    /*\n     *  Create an mrow that has \\mathchoice using \\bigg and \\big for the delimiters\n     */\n    fixedFence: function (open,mml,close) {\n      var mrow = MML.mrow().With({open:open, close:close, texClass:MML.TEXCLASS.ORD});\n      if (open) {mrow.Append(this.mathPalette(open,\"l\"))}\n      if (mml.type === \"mrow\") {mrow.Append.apply(mrow,mml.data)} else {mrow.Append(mml)}\n      if (close) {mrow.Append(this.mathPalette(close,\"r\"))}\n      return mrow;\n    },\n    mathPalette: function (fence,side) {\n      if (fence === '{' || fence === '}') {fence = \"\\\\\"+fence}\n      var D = '{\\\\bigg'+side+' '+fence+'}', T = '{\\\\big'+side+' '+fence+'}';\n      return TEX.Parse('\\\\mathchoice'+D+T+T+T,{}).mml();\n    },\n    \n    //\n    //  Combine adjacent <mo> elements that are relations\n    //    (since MathML treats the spacing very differently)\n    //\n    combineRelations: function (mml) {\n      var i, m, m1, m2;\n      for (i = 0, m = mml.data.length; i < m; i++) {\n        if (mml.data[i]) {\n          if (mml.isa(MML.mrow)) {\n            while (i+1 < m && (m1 = mml.data[i]) && (m2 = mml.data[i+1]) &&\n                   m1.isa(MML.mo) && m2.isa(MML.mo) &&\n                   m1.Get(\"texClass\") === MML.TEXCLASS.REL &&\n                   m2.Get(\"texClass\") === MML.TEXCLASS.REL) {\n              if (m1.variantForm == m2.variantForm &&\n                  m1.Get(\"mathvariant\") == m2.Get(\"mathvariant\") && m1.style == m2.style &&\n                  m1[\"class\"] == m2[\"class\"] && !m1.id && !m2.id) {\n                m1.Append.apply(m1,m2.data);\n                mml.data.splice(i+1,1); m--;\n              } else {\n                m1.rspace = m2.lspace = \"0pt\"; i++;\n              }\n            }\n          }\n          if (!mml.data[i].isToken) {this.combineRelations(mml.data[i])}\n        }\n      }\n    }\n  });\n\n  //\n  //  Add the default filters\n  //\n  TEX.prefilterHooks.Add(function (data) {\n    data.math = TEX.prefilterMath(data.math,data.display,data.script);\n  });\n  TEX.postfilterHooks.Add(function (data) {\n    data.math = TEX.postfilterMath(data.math,data.display,data.script);\n  });\n\n  TEX.loadComplete(\"jax.js\");\n  \n})(MathJax.InputJax.TeX,MathJax.Hub,MathJax.Ajax);\n"]}]}