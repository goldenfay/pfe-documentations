{"remainingRequest":"/home/hads/Documents/CoreUI-Vue/node_modules/babel-loader/lib/index.js!/home/hads/Downloads/pycharm-community-2020.1/plugins/python-ce/helpers/MathJax/jax/output/PreviewHTML/jax.js","dependencies":[{"path":"/home/hads/Downloads/pycharm-community-2020.1/plugins/python-ce/helpers/MathJax/jax/output/PreviewHTML/jax.js","mtime":1586259854000},{"path":"/home/hads/Documents/CoreUI-Vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hads/Documents/CoreUI-Vue/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyogLSotIE1vZGU6IEphdmFzY3JpcHQ7IGluZGVudC10YWJzLW1vZGU6bmlsOyBqcy1pbmRlbnQtbGV2ZWw6IDIgLSotICovCgovKiB2aW06IHNldCB0cz0yIGV0IHN3PTIgdHc9ODA6ICovCgovKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogKgogKiAgTWF0aEpheC9qYXgvb3V0cHV0L1ByZXZpZXdIVE1ML2pheC5qcwogKgogKiAgSW1wbGVtZW50cyB0aGUgUHJldmlld0hUTUwgT3V0cHV0SmF4IHRoYXQgZGlzcGxheXMgbWF0aGVtYXRpY3MKICogIHVzaW5nIEhUTUwgdG8gcG9zaXRpb24gdGhlIGNoYXJhY3RlcnMgZnJvbSBtYXRoIGZvbnRzCiAqICBpbiB0aGVpciBwcm9wZXIgbG9jYXRpb25zLgogKiAgCiAqICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICogIAogKiAgQ29weXJpZ2h0IChjKSAyMDEzLTIwMTUgVGhlIE1hdGhKYXggQ29uc29ydGl1bQogKiAKICogIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwogKiAgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogKiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiAqIAogKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogKiAKICogIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICogIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAqICBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICogIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICogIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogKi8KKGZ1bmN0aW9uIChBSkFYLCBIVUIsIEhUTUwsIFBIVE1MKSB7CiAgdmFyIE1NTDsKICB2YXIgRVZFTlQsIFRPVUNILCBIT1ZFUjsgLy8gZmlsbGVkIGluIGxhdGVyCgogIHZhciBGT05UUyA9ICInVGltZXMgTmV3IFJvbWFuJyxUaW1lcyxTVElYR2VuZXJhbCxzZXJpZiI7CiAgdmFyIFNUWUxFUyA9IHsKICAgICIuTUpYcC1zY3JpcHQiOiB7CiAgICAgICJmb250LXNpemUiOiAiLjhlbSIKICAgIH0sCiAgICAiLk1KWHAtcmlnaHQiOiB7CiAgICAgICItd2Via2l0LXRyYW5zZm9ybS1vcmlnaW4iOiAicmlnaHQiLAogICAgICAiLW1vei10cmFuc2Zvcm0tb3JpZ2luIjogInJpZ2h0IiwKICAgICAgIi1tcy10cmFuc2Zvcm0tb3JpZ2luIjogInJpZ2h0IiwKICAgICAgIi1vLXRyYW5zZm9ybS1vcmlnaW4iOiAicmlnaHQiLAogICAgICAidHJhbnNmb3JtLW9yaWdpbiI6ICJyaWdodCIKICAgIH0sCiAgICAiLk1KWHAtYm9sZCI6IHsKICAgICAgImZvbnQtd2VpZ2h0IjogImJvbGQiCiAgICB9LAogICAgIi5NSlhwLWl0YWxpYyI6IHsKICAgICAgImZvbnQtc3R5bGUiOiAiaXRhbGljIgogICAgfSwKICAgICIuTUpYcC1zY3IiOiB7CiAgICAgICJmb250LWZhbWlseSI6ICJNYXRoSmF4X1NjcmlwdCwiICsgRk9OVFMKICAgIH0sCiAgICAiLk1KWHAtZnJhayI6IHsKICAgICAgImZvbnQtZmFtaWx5IjogIk1hdGhKYXhfRnJha3R1ciwiICsgRk9OVFMKICAgIH0sCiAgICAiLk1KWHAtc2YiOiB7CiAgICAgICJmb250LWZhbWlseSI6ICJNYXRoSmF4X1NhbnNTZXJpZiwiICsgRk9OVFMKICAgIH0sCiAgICAiLk1KWHAtY2FsIjogewogICAgICAiZm9udC1mYW1pbHkiOiAiTWF0aEpheF9DYWxpZ3JhcGhpYywiICsgRk9OVFMKICAgIH0sCiAgICAiLk1KWHAtbW9ubyI6IHsKICAgICAgImZvbnQtZmFtaWx5IjogIk1hdGhKYXhfVHlwZXdyaXRlciwiICsgRk9OVFMKICAgIH0sCiAgICAiLk1KWHAtbGFyZ2VvcCI6IHsKICAgICAgImZvbnQtc2l6ZSI6ICIxNTAlIgogICAgfSwKICAgICIuTUpYcC1sYXJnZW9wLk1KWHAtaW50IjogewogICAgICAidmVydGljYWwtYWxpZ24iOiAiLS4yZW0iCiAgICB9LAogICAgIi5NSlhwLW1hdGgiOiB7CiAgICAgICJkaXNwbGF5IjogImlubGluZS1ibG9jayIsCiAgICAgICJsaW5lLWhlaWdodCI6ICIxLjIiLAogICAgICAidGV4dC1pbmRlbnQiOiAiMCIsCiAgICAgICJmb250LWZhbWlseSI6IEZPTlRTLAogICAgICAid2hpdGUtc3BhY2UiOiAibm93cmFwIiwKICAgICAgImJvcmRlci1jb2xsYXBzZSI6ICJjb2xsYXBzZSIKICAgIH0sCiAgICAiLk1KWHAtZGlzcGxheSI6IHsKICAgICAgImRpc3BsYXkiOiAiYmxvY2siLAogICAgICAidGV4dC1hbGlnbiI6ICJjZW50ZXIiLAogICAgICAibWFyZ2luIjogIjFlbSAwIgogICAgfSwKICAgICIuTUpYcC1tYXRoIHNwYW4iOiB7CiAgICAgICJkaXNwbGF5IjogImlubGluZS1ibG9jayIKICAgIH0sCiAgICAiLk1KWHAtYm94IjogewogICAgICAiZGlzcGxheSI6ICJibG9jayFpbXBvcnRhbnQiLAogICAgICAidGV4dC1hbGlnbiI6ICJjZW50ZXIiCiAgICB9LAogICAgIi5NSlhwLWJveDphZnRlciI6IHsKICAgICAgImNvbnRlbnQiOiAnIiAiJwogICAgfSwKICAgIC8vIG5lZWRlZCBmb3Igd2hlbiB0aGVyZSBpcyBubyBET0NUWVBFCiAgICAiLk1KWHAtcnVsZSI6IHsKICAgICAgImRpc3BsYXkiOiAiYmxvY2shaW1wb3J0YW50IiwKICAgICAgIm1hcmdpbi10b3AiOiAiLjFlbSIKICAgIH0sCiAgICAiLk1KWHAtY2hhciI6IHsKICAgICAgImRpc3BsYXkiOiAiYmxvY2shaW1wb3J0YW50IgogICAgfSwKICAgICIuTUpYcC1tbyI6IHsKICAgICAgIm1hcmdpbiI6ICIwIC4xNWVtIgogICAgfSwKICAgICIuTUpYcC1tZnJhYyI6IHsKICAgICAgIm1hcmdpbiI6ICIwIC4xMjVlbSIsCiAgICAgICJ2ZXJ0aWNhbC1hbGlnbiI6ICIuMjVlbSIKICAgIH0sCiAgICAiLk1KWHAtZGVub20iOiB7CiAgICAgICJkaXNwbGF5IjogImlubGluZS10YWJsZSFpbXBvcnRhbnQiLAogICAgICAid2lkdGgiOiAiMTAwJSIKICAgIH0sCiAgICAiLk1KWHAtZGVub20gPiAqIjogewogICAgICAiZGlzcGxheSI6ICJ0YWJsZS1yb3chaW1wb3J0YW50IgogICAgfSwKICAgICIuTUpYcC1zdXJkIjogewogICAgICAidmVydGljYWwtYWxpZ24iOiAidG9wIgogICAgfSwKICAgICIuTUpYcC1zdXJkID4gKiI6IHsKICAgICAgImRpc3BsYXkiOiAiYmxvY2shaW1wb3J0YW50IgogICAgfSwKICAgICIuTUpYcC1zY3JpcHQtYm94ID4gKiAiOiB7CiAgICAgICJkaXNwbGF5IjogInRhYmxlIWltcG9ydGFudCIsCiAgICAgICJoZWlnaHQiOiAiNTAlIgogICAgfSwKICAgICIuTUpYcC1zY3JpcHQtYm94ID4gKiA+ICoiOiB7CiAgICAgICJkaXNwbGF5IjogInRhYmxlLWNlbGwhaW1wb3J0YW50IiwKICAgICAgInZlcnRpY2FsLWFsaWduIjogInRvcCIKICAgIH0sCiAgICAiLk1KWHAtc2NyaXB0LWJveCA+ICo6bGFzdC1jaGlsZCA+ICoiOiB7CiAgICAgICJ2ZXJ0aWNhbC1hbGlnbiI6ICJib3R0b20iCiAgICB9LAogICAgIi5NSlhwLXNjcmlwdC1ib3ggPiAqID4gKiA+ICoiOiB7CiAgICAgICJkaXNwbGF5IjogImJsb2NrIWltcG9ydGFudCIKICAgIH0sCiAgICAiLk1KWHAtbXBoYW50b20iOiB7CiAgICAgICJ2aXNpYmlsaXR5IjogImhpZGRlbiIKICAgIH0sCiAgICAiLk1KWHAtbXVuZGVyb3ZlciI6IHsKICAgICAgImRpc3BsYXkiOiAiaW5saW5lLXRhYmxlIWltcG9ydGFudCIKICAgIH0sCiAgICAiLk1KWHAtb3ZlciI6IHsKICAgICAgImRpc3BsYXkiOiAiaW5saW5lLWJsb2NrIWltcG9ydGFudCIsCiAgICAgICJ0ZXh0LWFsaWduIjogImNlbnRlciIKICAgIH0sCiAgICAiLk1KWHAtb3ZlciA+ICoiOiB7CiAgICAgICJkaXNwbGF5IjogImJsb2NrIWltcG9ydGFudCIKICAgIH0sCiAgICAiLk1KWHAtbXVuZGVyb3ZlciA+ICoiOiB7CiAgICAgICJkaXNwbGF5IjogInRhYmxlLXJvdyFpbXBvcnRhbnQiCiAgICB9LAogICAgIi5NSlhwLW10YWJsZSI6IHsKICAgICAgInZlcnRpY2FsLWFsaWduIjogIi4yNWVtIiwKICAgICAgIm1hcmdpbiI6ICIwIC4xMjVlbSIKICAgIH0sCiAgICAiLk1KWHAtbXRhYmxlID4gKiI6IHsKICAgICAgImRpc3BsYXkiOiAiaW5saW5lLXRhYmxlIWltcG9ydGFudCIsCiAgICAgICJ2ZXJ0aWNhbC1hbGlnbiI6ICJtaWRkbGUiCiAgICB9LAogICAgIi5NSlhwLW10ciI6IHsKICAgICAgImRpc3BsYXkiOiAidGFibGUtcm93IWltcG9ydGFudCIKICAgIH0sCiAgICAiLk1KWHAtbXRkIjogewogICAgICAiZGlzcGxheSI6ICJ0YWJsZS1jZWxsIWltcG9ydGFudCIsCiAgICAgICJ0ZXh0LWFsaWduIjogImNlbnRlciIsCiAgICAgICJwYWRkaW5nIjogIi41ZW0gMCAwIC41ZW0iCiAgICB9LAogICAgIi5NSlhwLW10ciA+IC5NSlhwLW10ZDpmaXJzdC1jaGlsZCI6IHsKICAgICAgInBhZGRpbmctbGVmdCI6IDAKICAgIH0sCiAgICAiLk1KWHAtbXRyOmZpcnN0LWNoaWxkID4gLk1KWHAtbXRkIjogewogICAgICAicGFkZGluZy10b3AiOiAwCiAgICB9LAogICAgIi5NSlhwLW1sYWJlbGVkdHIiOiB7CiAgICAgICJkaXNwbGF5IjogInRhYmxlLXJvdyFpbXBvcnRhbnQiCiAgICB9LAogICAgIi5NSlhwLW1sYWJlbGVkdHIgPiAuTUpYcC1tdGQ6Zmlyc3QtY2hpbGQiOiB7CiAgICAgICJwYWRkaW5nLWxlZnQiOiAwCiAgICB9LAogICAgIi5NSlhwLW1sYWJlbGVkdHI6Zmlyc3QtY2hpbGQgPiAuTUpYcC1tdGQiOiB7CiAgICAgICJwYWRkaW5nLXRvcCI6IDAKICAgIH0sCiAgICAiLk1KWHAtbWVycm9yIjogewogICAgICAiYmFja2dyb3VuZC1jb2xvciI6ICIjRkZGRjg4IiwKICAgICAgY29sb3I6ICIjQ0MwMDAwIiwKICAgICAgYm9yZGVyOiAiMXB4IHNvbGlkICNDQzAwMDAiLAogICAgICBwYWRkaW5nOiAiMXB4IDNweCIsCiAgICAgICJmb250LXN0eWxlIjogIm5vcm1hbCIsCiAgICAgICJmb250LXNpemUiOiAiOTAlIgogICAgfQogIH07CgogIChmdW5jdGlvbiAoKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHsKICAgICAgdmFyIHNjYWxlID0gInNjYWxlWCguIiArIGkgKyAiKSI7CiAgICAgIFNUWUxFU1siLk1KWHAtc2NhbGUiICsgaV0gPSB7CiAgICAgICAgIi13ZWJraXQtdHJhbnNmb3JtIjogc2NhbGUsCiAgICAgICAgIi1tb3otdHJhbnNmb3JtIjogc2NhbGUsCiAgICAgICAgIi1tcy10cmFuc2Zvcm0iOiBzY2FsZSwKICAgICAgICAiLW8tdHJhbnNmb3JtIjogc2NhbGUsCiAgICAgICAgInRyYW5zZm9ybSI6IHNjYWxlCiAgICAgIH07CiAgICB9CiAgfSkoKTsKCiAgdmFyIEJJR0RJTUVOID0gMTAwMDAwMDsKICB2YXIgViA9ICJWIiwKICAgICAgSCA9ICJIIjsKICBQSFRNTC5BdWdtZW50KHsKICAgIHNldHRpbmdzOiBIVUIuY29uZmlnLm1lbnVTZXR0aW5ncywKICAgIGNvbmZpZzogewogICAgICBzdHlsZXM6IFNUWUxFUwogICAgfSwKICAgIGhpZGVQcm9jZXNzZWRNYXRoOiBmYWxzZSwKICAgIC8vIHVzZSBkaXNwbGF5Om5vbmUgdW50aWwgYWxsIG1hdGggaXMgcHJvY2Vzc2VkCiAgICBtYXhTdHJldGNoeVBhcnRzOiAxMDAwLAogICAgLy8gbGltaXQgdGhlIG51bWJlciBvZiBwYXJ0cyBhbGxvd2VkIGZvcgogICAgLy8gc3RyZXRjaHkgb3BlcmF0b3JzLiBTZWUgaXNzdWUgMzY2LgogICAgQ29uZmlnOiBmdW5jdGlvbiBDb25maWcoKSB7CiAgICAgIGlmICghdGhpcy5yZXF1aXJlKSB7CiAgICAgICAgdGhpcy5yZXF1aXJlID0gW107CiAgICAgIH0KCiAgICAgIHRoaXMuU1VQRVIoYXJndW1lbnRzKS5Db25maWcuY2FsbCh0aGlzKTsKICAgICAgdmFyIHNldHRpbmdzID0gdGhpcy5zZXR0aW5nczsKCiAgICAgIGlmIChzZXR0aW5ncy5zY2FsZSkgewogICAgICAgIHRoaXMuY29uZmlnLnNjYWxlID0gc2V0dGluZ3Muc2NhbGU7CiAgICAgIH0KCiAgICAgIHRoaXMucmVxdWlyZS5wdXNoKE1hdGhKYXguT3V0cHV0SmF4LmV4dGVuc2lvbkRpciArICIvTWF0aEV2ZW50cy5qcyIpOwogICAgfSwKICAgIFN0YXJ0dXA6IGZ1bmN0aW9uIFN0YXJ0dXAoKSB7CiAgICAgIC8vCiAgICAgIC8vICBTZXQgdXAgZXZlbnQgaGFuZGxpbmcKICAgICAgLy8KICAgICAgRVZFTlQgPSBNYXRoSmF4LkV4dGVuc2lvbi5NYXRoRXZlbnRzLkV2ZW50OwogICAgICBUT1VDSCA9IE1hdGhKYXguRXh0ZW5zaW9uLk1hdGhFdmVudHMuVG91Y2g7CiAgICAgIEhPVkVSID0gTWF0aEpheC5FeHRlbnNpb24uTWF0aEV2ZW50cy5Ib3ZlcjsKICAgICAgdGhpcy5Db250ZXh0TWVudSA9IEVWRU5ULkNvbnRleHRNZW51OwogICAgICB0aGlzLk1vdXNlZG93biA9IEVWRU5ULkFsdENvbnRleHRNZW51OwogICAgICB0aGlzLk1vdXNlb3ZlciA9IEhPVkVSLk1vdXNlb3ZlcjsKICAgICAgdGhpcy5Nb3VzZW91dCA9IEhPVkVSLk1vdXNlb3V0OwogICAgICB0aGlzLk1vdXNlbW92ZSA9IEhPVkVSLk1vdXNlbW92ZTsgLy8KICAgICAgLy8gIERldGVybWluZSBwaXhlbHMgcGVyIGluY2gKICAgICAgLy8KCiAgICAgIHZhciBkaXYgPSBIVE1MLmFkZEVsZW1lbnQoZG9jdW1lbnQuYm9keSwgImRpdiIsIHsKICAgICAgICBzdHlsZTogewogICAgICAgICAgd2lkdGg6ICI1aW4iCiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5weFBlckluY2ggPSBkaXYub2Zmc2V0V2lkdGggLyA1OwogICAgICBkaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkaXYpOyAvLwogICAgICAvLyAgU2V0IHVwIHN0eWxlcyBhbmQgcHJlbG9hZCB3ZWIgZm9udHMKICAgICAgLy8KCiAgICAgIHJldHVybiBBSkFYLlN0eWxlcyh0aGlzLmNvbmZpZy5zdHlsZXMsIFsiSW5pdGlhbGl6ZVBIVE1MIiwgdGhpc10pOwogICAgfSwKICAgIEluaXRpYWxpemVQSFRNTDogZnVuY3Rpb24gSW5pdGlhbGl6ZVBIVE1MKCkge30sCiAgICBwcmVUcmFuc2xhdGU6IGZ1bmN0aW9uIHByZVRyYW5zbGF0ZShzdGF0ZSkgewogICAgICB2YXIgc2NyaXB0cyA9IHN0YXRlLmpheFt0aGlzLmlkXSwKICAgICAgICAgIGksCiAgICAgICAgICBtID0gc2NyaXB0cy5sZW5ndGgsCiAgICAgICAgICBzY3JpcHQsCiAgICAgICAgICBwcmV2LAogICAgICAgICAgc3BhbiwKICAgICAgICAgIGRpdiwKICAgICAgICAgIGpheDsgLy8KICAgICAgLy8gIExvb3AgdGhyb3VnaCB0aGUgc2NyaXB0cwogICAgICAvLwoKICAgICAgZm9yIChpID0gMDsgaSA8IG07IGkrKykgewogICAgICAgIHNjcmlwdCA9IHNjcmlwdHNbaV07CiAgICAgICAgaWYgKCFzY3JpcHQucGFyZW50Tm9kZSkgY29udGludWU7IC8vCiAgICAgICAgLy8gIFJlbW92ZSBhbnkgZXhpc3Rpbmcgb3V0cHV0CiAgICAgICAgLy8KCiAgICAgICAgcHJldiA9IHNjcmlwdC5wcmV2aW91c1NpYmxpbmc7CgogICAgICAgIGlmIChwcmV2ICYmIFN0cmluZyhwcmV2LmNsYXNzTmFtZSkubWF0Y2goL15NYXRoSmF4X1BIVE1MKF9EaXNwbGF5KT8oIE1hdGhKYXhfUHJvY2Vzc2luZyk/JC8pKSB7CiAgICAgICAgICBwcmV2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocHJldik7CiAgICAgICAgfSAvLwogICAgICAgIC8vICBBZGQgdGhlIHNwYW4sIGFuZCBhIGRpdiBpZiBpbiBkaXNwbGF5IG1vZGUsCiAgICAgICAgLy8gIHRoZW4gc2V0IHRoZSByb2xlIGFuZCBtYXJrIGl0IGFzIGJlaW5nIHByb2Nlc3NlZAogICAgICAgIC8vCgoKICAgICAgICBqYXggPSBzY3JpcHQuTWF0aEpheC5lbGVtZW50SmF4OwogICAgICAgIGlmICghamF4KSBjb250aW51ZTsKICAgICAgICBqYXguUEhUTUwgPSB7CiAgICAgICAgICBkaXNwbGF5OiBqYXgucm9vdC5HZXQoImRpc3BsYXkiKSA9PT0gImJsb2NrIgogICAgICAgIH07CiAgICAgICAgc3BhbiA9IGRpdiA9IEhUTUwuRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogIk1hdGhKYXhfUEhUTUwiLAogICAgICAgICAgaWQ6IGpheC5pbnB1dElEICsgIi1GcmFtZSIsCiAgICAgICAgICBpc01hdGhKYXg6IHRydWUsCiAgICAgICAgICBqYXhJRDogdGhpcy5pZCwKICAgICAgICAgIG9uY29udGV4dG1lbnU6IEVWRU5ULk1lbnUsCiAgICAgICAgICBvbm1vdXNlZG93bjogRVZFTlQuTW91c2Vkb3duLAogICAgICAgICAgb25tb3VzZW92ZXI6IEVWRU5ULk1vdXNlb3ZlciwKICAgICAgICAgIG9ubW91c2VvdXQ6IEVWRU5ULk1vdXNlb3V0LAogICAgICAgICAgb25tb3VzZW1vdmU6IEVWRU5ULk1vdXNlbW92ZSwKICAgICAgICAgIG9uY2xpY2s6IEVWRU5ULkNsaWNrLAogICAgICAgICAgb25kYmxjbGljazogRVZFTlQuRGJsQ2xpY2ssCiAgICAgICAgICAvLyBBZGRlZCBmb3Iga2V5Ym9hcmQgYWNjZXNzaWJsZSBtZW51LgogICAgICAgICAgb25rZXlkb3duOiBFVkVOVC5LZXlkb3duLAogICAgICAgICAgdGFiSW5kZXg6IEhVQi5nZXRUYWJPcmRlcihqYXgpCiAgICAgICAgfSk7CgogICAgICAgIGlmIChIVUIuQnJvd3Nlci5ub0NvbnRleHRNZW51KSB7CiAgICAgICAgICBzcGFuLm9udG91Y2hzdGFydCA9IFRPVUNILnN0YXJ0OwogICAgICAgICAgc3Bhbi5vbnRvdWNoZW5kID0gVE9VQ0guZW5kOwogICAgICAgIH0KCiAgICAgICAgaWYgKGpheC5QSFRNTC5kaXNwbGF5KSB7CiAgICAgICAgICBkaXYgPSBIVE1MLkVsZW1lbnQoImRpdiIsIHsKICAgICAgICAgICAgY2xhc3NOYW1lOiAiTWF0aEpheF9QSFRNTF9EaXNwbGF5IgogICAgICAgICAgfSk7CiAgICAgICAgICBkaXYuYXBwZW5kQ2hpbGQoc3Bhbik7CiAgICAgICAgfSAvLwoKCiAgICAgICAgZGl2LmNsYXNzTmFtZSArPSAiIE1hdGhKYXhfUHJvY2Vzc2luZyI7CiAgICAgICAgc2NyaXB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGRpdiwgc2NyaXB0KTsKICAgICAgfQogICAgfSwKICAgIFRyYW5zbGF0ZTogZnVuY3Rpb24gVHJhbnNsYXRlKHNjcmlwdCwgc3RhdGUpIHsKICAgICAgaWYgKCFzY3JpcHQucGFyZW50Tm9kZSkgcmV0dXJuOyAvLwogICAgICAvLyAgR2V0IHRoZSBkYXRhIGFib3V0IHRoZSBtYXRoCiAgICAgIC8vCgogICAgICB2YXIgamF4ID0gc2NyaXB0Lk1hdGhKYXguZWxlbWVudEpheCwKICAgICAgICAgIG1hdGggPSBqYXgucm9vdCwKICAgICAgICAgIHNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChqYXguaW5wdXRJRCArICItRnJhbWUiKSwKICAgICAgICAgIGRpdiA9IGpheC5QSFRNTC5kaXNwbGF5ID8gc3Bhbi5wYXJlbnROb2RlIDogc3BhbjsgLy8KICAgICAgLy8gIFR5cGVzZXQgdGhlIG1hdGgKICAgICAgLy8KCiAgICAgIHRoaXMuaW5pdFBIVE1MKG1hdGgsIHNwYW4pOyAvLyAgICAgIG1hdGguc2V0VGVYY2xhc3MoKTsKCiAgICAgIHRyeSB7CiAgICAgICAgbWF0aC50b1ByZXZpZXdIVE1MKHNwYW4pOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBpZiAoZXJyLnJlc3RhcnQpIHsKICAgICAgICAgIHdoaWxlIChzcGFuLmZpcnN0Q2hpbGQpIHsKICAgICAgICAgICAgc3Bhbi5yZW1vdmVDaGlsZChzcGFuLmZpcnN0Q2hpbGQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdGhyb3cgZXJyOwogICAgICB9IC8vCiAgICAgIC8vICBQdXQgaXQgaW4gcGxhY2UsIGFuZCByZW1vdmUgdGhlIHByb2Nlc3NpbmcgbWFya2VyCiAgICAgIC8vCgoKICAgICAgZGl2LmNsYXNzTmFtZSA9IGRpdi5jbGFzc05hbWUuc3BsaXQoLyAvKVswXTsgLy8KICAgICAgLy8gIENoZWNrIGlmIHdlIGFyZSBoaWRpbmcgdGhlIG1hdGggdW50aWwgbW9yZSBpcyBwcm9jZXNzZWQKICAgICAgLy8KCiAgICAgIGlmICh0aGlzLmhpZGVQcm9jZXNzZWRNYXRoKSB7CiAgICAgICAgLy8KICAgICAgICAvLyAgSGlkZSB0aGUgbWF0aCBhbmQgZG9uJ3QgbGV0IGl0cyBwcmV2aWV3IGJlIHJlbW92ZWQKICAgICAgICAvLwogICAgICAgIGRpdi5jbGFzc05hbWUgKz0gIiBNYXRoSmF4X1Byb2Nlc3NlZCI7CgogICAgICAgIGlmIChzY3JpcHQuTWF0aEpheC5wcmV2aWV3KSB7CiAgICAgICAgICBqYXguUEhUTUwucHJldmlldyA9IHNjcmlwdC5NYXRoSmF4LnByZXZpZXc7CiAgICAgICAgICBkZWxldGUgc2NyaXB0Lk1hdGhKYXgucHJldmlldzsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBwb3N0VHJhbnNsYXRlOiBmdW5jdGlvbiBwb3N0VHJhbnNsYXRlKHN0YXRlKSB7CiAgICAgIHZhciBzY3JpcHRzID0gc3RhdGUuamF4W3RoaXMuaWRdOwogICAgICBpZiAoIXRoaXMuaGlkZVByb2Nlc3NlZE1hdGgpIHJldHVybjsKCiAgICAgIGZvciAodmFyIGkgPSAwLCBtID0gc2NyaXB0cy5sZW5ndGg7IGkgPCBtOyBpKyspIHsKICAgICAgICB2YXIgc2NyaXB0ID0gc2NyaXB0c1tpXTsKCiAgICAgICAgaWYgKHNjcmlwdCAmJiBzY3JpcHQuTWF0aEpheC5lbGVtZW50SmF4KSB7CiAgICAgICAgICAvLwogICAgICAgICAgLy8gIFJlbW92ZSB0aGUgcHJvY2Vzc2VkIG1hcmtlcgogICAgICAgICAgLy8KICAgICAgICAgIHNjcmlwdC5wcmV2aW91c1NpYmxpbmcuY2xhc3NOYW1lID0gc2NyaXB0LnByZXZpb3VzU2libGluZy5jbGFzc05hbWUuc3BsaXQoLyAvKVswXTsKICAgICAgICAgIHZhciBkYXRhID0gc2NyaXB0Lk1hdGhKYXguZWxlbWVudEpheC5QSFRNTDsgLy8KICAgICAgICAgIC8vICBSZW1vdmUgdGhlIHByZXZpZXcsIGlmIGFueQogICAgICAgICAgLy8KCiAgICAgICAgICBpZiAoZGF0YS5wcmV2aWV3KSB7CiAgICAgICAgICAgIGRhdGEucHJldmlldy5pbm5lckhUTUwgPSAiIjsKICAgICAgICAgICAgc2NyaXB0Lk1hdGhKYXgucHJldmlldyA9IGRhdGEucHJldmlldzsKICAgICAgICAgICAgZGVsZXRlIGRhdGEucHJldmlldzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBnZXRKYXhGcm9tTWF0aDogZnVuY3Rpb24gZ2V0SmF4RnJvbU1hdGgobWF0aCkgewogICAgICBpZiAobWF0aC5wYXJlbnROb2RlLmNsYXNzTmFtZSA9PT0gIk1hdGhKYXhfUEhUTUxfRGlzcGxheSIpIHsKICAgICAgICBtYXRoID0gbWF0aC5wYXJlbnROb2RlOwogICAgICB9CgogICAgICBkbyB7CiAgICAgICAgbWF0aCA9IG1hdGgubmV4dFNpYmxpbmc7CiAgICAgIH0gd2hpbGUgKG1hdGggJiYgbWF0aC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAic2NyaXB0Iik7CgogICAgICByZXR1cm4gSFVCLmdldEpheEZvcihtYXRoKTsKICAgIH0sCiAgICBnZXRIb3ZlclNwYW46IGZ1bmN0aW9uIGdldEhvdmVyU3BhbihqYXgsIG1hdGgpIHsKICAgICAgcmV0dXJuIGpheC5yb290LlBIVE1Mc3BhbkVsZW1lbnQoKTsKICAgIH0sCiAgICBnZXRIb3ZlckJCb3g6IGZ1bmN0aW9uIGdldEhvdmVyQkJveChqYXgsIHNwYW4sIG1hdGgpIHsKICAgICAgdmFyIGJib3ggPSBqYXgucm9vdC5QSFRNTCwKICAgICAgICAgIGVtID0gamF4LlBIVE1MLm91dGVyRW07CiAgICAgIHZhciBCQk9YID0gewogICAgICAgIHc6IGJib3gudyAqIGVtLAogICAgICAgIGg6IGJib3guaCAqIGVtLAogICAgICAgIGQ6IGJib3guZCAqIGVtCiAgICAgIH07CgogICAgICBpZiAoYmJveC53aWR0aCkgewogICAgICAgIEJCT1gud2lkdGggPSBiYm94LndpZHRoOwogICAgICB9CgogICAgICByZXR1cm4gQkJPWDsKICAgIH0sCiAgICBab29tOiBmdW5jdGlvbiBab29tKGpheCwgc3BhbiwgbWF0aCwgTXcsIE1oKSB7CiAgICAgIC8vCiAgICAgIC8vICBSZS1yZW5kZXIgYXQgbGFyZ2VyIHNpemUKICAgICAgLy8KICAgICAgc3Bhbi5jbGFzc05hbWUgPSAiTWF0aEpheCI7CiAgICAgIHRoaXMuaWRQb3N0Zml4ID0gIi16b29tIjsKICAgICAgamF4LnJvb3QudG9QSFRNTChzcGFuLCBzcGFuKTsKICAgICAgdGhpcy5pZFBvc3RmaXggPSAiIjsgLy8KICAgICAgLy8gIEdldCBoZWlnaHQgYW5kIHdpZHRoIG9mIHpvb21lZCBtYXRoIGFuZCBvcmlnaW5hbCBtYXRoCiAgICAgIC8vCgogICAgICBzcGFuLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKCiAgICAgIGlmICghd2lkdGgpIHsKICAgICAgICBtYXRoLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjsKICAgICAgfQoKICAgICAgdmFyIHpXID0gc3Bhbi5vZmZzZXRXaWR0aCwKICAgICAgICAgIHpIID0gc3Bhbi5vZmZzZXRIZWlnaHQsCiAgICAgICAgICBtSCA9IG1hdGgub2Zmc2V0SGVpZ2h0LAogICAgICAgICAgbVcgPSBtYXRoLm9mZnNldFdpZHRoOwoKICAgICAgaWYgKG1XID09PSAwKSB7CiAgICAgICAgbVcgPSBtYXRoLnBhcmVudE5vZGUub2Zmc2V0V2lkdGg7CiAgICAgIH0KCiAgICAgIDsgLy8gSUU3IGdldHMgbVcgPT0gMD8KCiAgICAgIHNwYW4uc3R5bGUucG9zaXRpb24gPSBtYXRoLnN0eWxlLnBvc2l0aW9uID0gIiI7IC8vCgogICAgICByZXR1cm4gewogICAgICAgIFk6IC1FVkVOVC5nZXRCQm94KHNwYW4pLmgsCiAgICAgICAgbVc6IG1XLAogICAgICAgIG1IOiBtSCwKICAgICAgICB6VzogelcsCiAgICAgICAgekg6IHpICiAgICAgIH07CiAgICB9LAogICAgaW5pdFBIVE1MOiBmdW5jdGlvbiBpbml0UEhUTUwobWF0aCwgc3Bhbikge30sCiAgICBSZW1vdmU6IGZ1bmN0aW9uIFJlbW92ZShqYXgpIHsKICAgICAgdmFyIHNwYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChqYXguaW5wdXRJRCArICItRnJhbWUiKTsKCiAgICAgIGlmIChzcGFuKSB7CiAgICAgICAgaWYgKGpheC5QSFRNTC5kaXNwbGF5KSB7CiAgICAgICAgICBzcGFuID0gc3Bhbi5wYXJlbnROb2RlOwogICAgICAgIH0KCiAgICAgICAgc3Bhbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNwYW4pOwogICAgICB9CgogICAgICBkZWxldGUgamF4LlBIVE1MOwogICAgfSwKICAgIElEOiAwLAogICAgaWRQb3N0Zml4OiAiIiwKICAgIEdldElEOiBmdW5jdGlvbiBHZXRJRCgpIHsKICAgICAgdGhpcy5JRCsrOwogICAgICByZXR1cm4gdGhpcy5JRDsKICAgIH0sCiAgICBWQVJJQU5UOiB7CiAgICAgICJib2xkIjogIk1KWHAtYm9sZCIsCiAgICAgICJpdGFsaWMiOiAiTUpYcC1pdGFsaWMiLAogICAgICAiYm9sZC1pdGFsaWMiOiAiTUpYcC1ib2xkIE1KWHAtaXRhbGljIiwKICAgICAgInNjcmlwdCI6ICJNSlhwLXNjciIsCiAgICAgICJib2xkLXNjcmlwdCI6ICJNSlhwLXNjciBNSlhwLWJvbGQiLAogICAgICAiZnJha3R1ciI6ICJNSlhwLWZyYWsiLAogICAgICAiYm9sZC1mcmFrdHVyIjogIk1KWHAtZnJhayBNSlhwLWJvbGQiLAogICAgICAibW9ub3NwYWNlIjogIk1KWHAtbW9ubyIsCiAgICAgICJzYW5zLXNlcmlmIjogIk1KWHAtc2YiLAogICAgICAiLXRleC1jYWxpZ3JhcGhpYyI6ICJNSlhwLWNhbCIKICAgIH0sCiAgICBNQVRIU1BBQ0U6IHsKICAgICAgdmVyeXZlcnl0aGlubWF0aHNwYWNlOiAxIC8gMTgsCiAgICAgIHZlcnl0aGlubWF0aHNwYWNlOiAyIC8gMTgsCiAgICAgIHRoaW5tYXRoc3BhY2U6IDMgLyAxOCwKICAgICAgbWVkaXVtbWF0aHNwYWNlOiA0IC8gMTgsCiAgICAgIHRoaWNrbWF0aHNwYWNlOiA1IC8gMTgsCiAgICAgIHZlcnl0aGlja21hdGhzcGFjZTogNiAvIDE4LAogICAgICB2ZXJ5dmVyeXRoaWNrbWF0aHNwYWNlOiA3IC8gMTgsCiAgICAgIG5lZ2F0aXZldmVyeXZlcnl0aGlubWF0aHNwYWNlOiAtMSAvIDE4LAogICAgICBuZWdhdGl2ZXZlcnl0aGlubWF0aHNwYWNlOiAtMiAvIDE4LAogICAgICBuZWdhdGl2ZXRoaW5tYXRoc3BhY2U6IC0zIC8gMTgsCiAgICAgIG5lZ2F0aXZlbWVkaXVtbWF0aHNwYWNlOiAtNCAvIDE4LAogICAgICBuZWdhdGl2ZXRoaWNrbWF0aHNwYWNlOiAtNSAvIDE4LAogICAgICBuZWdhdGl2ZXZlcnl0aGlja21hdGhzcGFjZTogLTYgLyAxOCwKICAgICAgbmVnYXRpdmV2ZXJ5dmVyeXRoaWNrbWF0aHNwYWNlOiAtNyAvIDE4LAogICAgICB0aGluOiAuMDgsCiAgICAgIG1lZGl1bTogLjEsCiAgICAgIHRoaWNrOiAuMTUsCiAgICAgIGluZmluaXR5OiBCSUdESU1FTgogICAgfSwKICAgIFRlWDogewogICAgICB4X2hlaWdodDogLjQzMDU1NAogICAgfSwKICAgIHB4UGVySW5jaDogNzIsCiAgICBlbTogMTYsCiAgICAvLyAjIyMgRklYTUU6ICBhZGQgbW9yZSBoZXJlCiAgICBERUxJTUlURVJTOiB7CiAgICAgICIoIjogewogICAgICAgIGRpcjogVgogICAgICB9LAogICAgICAieyI6IHsKICAgICAgICBkaXI6IFYsCiAgICAgICAgdzogLjU4CiAgICAgIH0sCiAgICAgICJbIjogewogICAgICAgIGRpcjogVgogICAgICB9LAogICAgICAifCI6IHsKICAgICAgICBkaXI6IFYsCiAgICAgICAgdzogLjI3NQogICAgICB9LAogICAgICAiKSI6IHsKICAgICAgICBkaXI6IFYKICAgICAgfSwKICAgICAgIn0iOiB7CiAgICAgICAgZGlyOiBWLAogICAgICAgIHc6IC41OAogICAgICB9LAogICAgICAiXSI6IHsKICAgICAgICBkaXI6IFYKICAgICAgfSwKICAgICAgIi8iOiB7CiAgICAgICAgZGlyOiBWCiAgICAgIH0sCiAgICAgICJcXCI6IHsKICAgICAgICBkaXI6IFYKICAgICAgfSwKICAgICAgIlx1MjIyMyI6IHsKICAgICAgICBkaXI6IFYsCiAgICAgICAgdzogLjI3NQogICAgICB9LAogICAgICAiXHUyMjI1IjogewogICAgICAgIGRpcjogViwKICAgICAgICB3OiAuNTUKICAgICAgfSwKICAgICAgIlx1MjMwQSI6IHsKICAgICAgICBkaXI6IFYsCiAgICAgICAgdzogLjUKICAgICAgfSwKICAgICAgIlx1MjMwQiI6IHsKICAgICAgICBkaXI6IFYsCiAgICAgICAgdzogLjUKICAgICAgfSwKICAgICAgIlx1MjMwOCI6IHsKICAgICAgICBkaXI6IFYsCiAgICAgICAgdzogLjUKICAgICAgfSwKICAgICAgIlx1MjMwOSI6IHsKICAgICAgICBkaXI6IFYsCiAgICAgICAgdzogLjUKICAgICAgfSwKICAgICAgIlx1MjdFOCI6IHsKICAgICAgICBkaXI6IFYsCiAgICAgICAgdzogLjUKICAgICAgfSwKICAgICAgIlx1MjdFOSI6IHsKICAgICAgICBkaXI6IFYsCiAgICAgICAgdzogLjUKICAgICAgfSwKICAgICAgIlx1MjE5MSI6IHsKICAgICAgICBkaXI6IFYsCiAgICAgICAgdzogLjY1CiAgICAgIH0sCiAgICAgICJcdTIxOTMiOiB7CiAgICAgICAgZGlyOiBWLAogICAgICAgIHc6IC42NQogICAgICB9LAogICAgICAiXHUyMUQxIjogewogICAgICAgIGRpcjogViwKICAgICAgICB3OiAuNzUKICAgICAgfSwKICAgICAgIlx1MjFEMyI6IHsKICAgICAgICBkaXI6IFYsCiAgICAgICAgdzogLjc1CiAgICAgIH0sCiAgICAgICJcdTIxOTUiOiB7CiAgICAgICAgZGlyOiBWLAogICAgICAgIHc6IC42NQogICAgICB9LAogICAgICAiXHUyMUQ1IjogewogICAgICAgIGRpcjogViwKICAgICAgICB3OiAuNzUKICAgICAgfSwKICAgICAgIlx1MjdFRSI6IHsKICAgICAgICBkaXI6IFYsCiAgICAgICAgdzogLjI3NQogICAgICB9LAogICAgICAiXHUyN0VGIjogewogICAgICAgIGRpcjogViwKICAgICAgICB3OiAuMjc1CiAgICAgIH0sCiAgICAgICJcdTIzQjAiOiB7CiAgICAgICAgZGlyOiBWLAogICAgICAgIHc6IC42CiAgICAgIH0sCiAgICAgICJcdTIzQjEiOiB7CiAgICAgICAgZGlyOiBWLAogICAgICAgIHc6IC42CiAgICAgIH0KICAgIH0sCiAgICBSRU1BUEFDQ0VOVDogewogICAgICAiXHUyMEQ3IjogIlx1MjE5MiIsCiAgICAgIC8vIHZlY3RvciBhcnJvdwogICAgICAiJyI6ICJcdTAyQ0IiLAogICAgICAiYCI6ICJcdTAyQ0EiLAogICAgICAiLiI6ICJcdTAyRDkiLAogICAgICAiXiI6ICJcdTAyQzYiLAogICAgICAiLSI6ICJcdTAyQzkiLAogICAgICAifiI6ICJcdTAyREMiLAogICAgICAiXHhBRiI6ICJcdTAyQzkiLAogICAgICAvLyBtYWNyb24KICAgICAgIlx4QjAiOiAiXHUwMkRBIiwKICAgICAgLy8gZGVncmVlIHNpZ24KICAgICAgIlx4QjQiOiAiXHUwMkNBIiwKICAgICAgLy8gYWN1dGUgYWNjZW50CiAgICAgICJcdTAzMDAiOiAiXHUwMkNCIiwKICAgICAgLy8gY29tYmluaW5nIGdyYXZlCiAgICAgICJcdTAzMDEiOiAiXHUwMkNBIiwKICAgICAgLy8gY29tYmluaW5nIGFjdXRlCiAgICAgICJcdTAzMDIiOiAiXHUwMkM2IiwKICAgICAgLy8gY29tYmluaW5nIGNpcmN1bWZsZXgKICAgICAgIlx1MDMwMyI6ICJcdTAyREMiLAogICAgICAvLyBjb21iaW5pZyB0aWxkZQogICAgICAiXHUwMzA0IjogIlx1MDJDOSIsCiAgICAgIC8vIGNvbWJpbmluZyBtYWNyb24KICAgICAgIlx1MDMwNSI6ICJcdTAyQzkiLAogICAgICAvLyBjb21iaW5pbmcgb3ZlcmxpbmUKICAgICAgIlx1MDMwNiI6ICJcdTAyRDgiLAogICAgICAvLyBjb21iaW5pbmcgYnJldmUgCiAgICAgICJcdTAzMDciOiAiXHUwMkQ5IiwKICAgICAgLy8gY29tYmluaW5nIGRvdAogICAgICAiXHUwMzA4IjogIlx4QTgiLAogICAgICAvLyBjb21iaW5pbmcgZG91YmxlIGRvdAogICAgICAiXHUwMzBDIjogIlx1MDJDNyIgLy8gY29tYmluaW5nIGNhcm9uCgogICAgfSwKICAgIFJFTUFQQUNDRU5UVU5ERVI6IHt9LAogICAgbGVuZ3RoMmVtOiBmdW5jdGlvbiBsZW5ndGgyZW0obGVuZ3RoLCBzaXplKSB7CiAgICAgIGlmICh0eXBlb2YgbGVuZ3RoICE9PSAic3RyaW5nIikgewogICAgICAgIGxlbmd0aCA9IGxlbmd0aC50b1N0cmluZygpOwogICAgICB9CgogICAgICBpZiAobGVuZ3RoID09PSAiIikgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQoKICAgICAgaWYgKGxlbmd0aCA9PT0gTU1MLlNJWkUuTk9STUFMKSB7CiAgICAgICAgcmV0dXJuIDE7CiAgICAgIH0KCiAgICAgIGlmIChsZW5ndGggPT09IE1NTC5TSVpFLkJJRykgewogICAgICAgIHJldHVybiAyOwogICAgICB9CgogICAgICBpZiAobGVuZ3RoID09PSBNTUwuU0laRS5TTUFMTCkgewogICAgICAgIHJldHVybiAuNzE7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLk1BVEhTUEFDRVtsZW5ndGhdKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuTUFUSFNQQUNFW2xlbmd0aF07CiAgICAgIH0KCiAgICAgIHZhciBtYXRjaCA9IGxlbmd0aC5tYXRjaCgvXlxzKihbLStdPyg/OlwuXGQrfFxkKyg/OlwuXGQqKT8pKT8ocHR8ZW18ZXh8bXV8cHh8cGN8aW58bW18Y218JSk/Lyk7CiAgICAgIHZhciBtID0gcGFyc2VGbG9hdChtYXRjaFsxXSB8fCAiMSIpLAogICAgICAgICAgdW5pdCA9IG1hdGNoWzJdOwoKICAgICAgaWYgKHNpemUgPT0gbnVsbCkgewogICAgICAgIHNpemUgPSAxOwogICAgICB9CgogICAgICBpZiAodW5pdCA9PT0gImVtIikgewogICAgICAgIHJldHVybiBtOwogICAgICB9CgogICAgICBpZiAodW5pdCA9PT0gImV4IikgewogICAgICAgIHJldHVybiBtICogdGhpcy5UZVgueF9oZWlnaHQ7CiAgICAgIH0KCiAgICAgIGlmICh1bml0ID09PSAiJSIpIHsKICAgICAgICByZXR1cm4gbSAvIDEwMCAqIHNpemU7CiAgICAgIH0KCiAgICAgIGlmICh1bml0ID09PSAicHgiKSB7CiAgICAgICAgcmV0dXJuIG0gLyB0aGlzLmVtOwogICAgICB9CgogICAgICBpZiAodW5pdCA9PT0gInB0IikgewogICAgICAgIHJldHVybiBtIC8gMTA7CiAgICAgIH0gLy8gMTAgcHQgdG8gYW4gZW0KCgogICAgICBpZiAodW5pdCA9PT0gInBjIikgewogICAgICAgIHJldHVybiBtICogMS4yOwogICAgICB9IC8vIDEyIHB0IHRvIGEgcGMKCgogICAgICBpZiAodW5pdCA9PT0gImluIikgewogICAgICAgIHJldHVybiBtICogdGhpcy5weFBlckluY2ggLyB0aGlzLmVtOwogICAgICB9CgogICAgICBpZiAodW5pdCA9PT0gImNtIikgewogICAgICAgIHJldHVybiBtICogdGhpcy5weFBlckluY2ggLyB0aGlzLmVtIC8gMi41NDsKICAgICAgfSAvLyAyLjU0IGNtIHRvIGFuIGluY2gKCgogICAgICBpZiAodW5pdCA9PT0gIm1tIikgewogICAgICAgIHJldHVybiBtICogdGhpcy5weFBlckluY2ggLyB0aGlzLmVtIC8gMjUuNDsKICAgICAgfSAvLyAxMCBtbSB0byBhIGNtCgoKICAgICAgaWYgKHVuaXQgPT09ICJtdSIpIHsKICAgICAgICByZXR1cm4gbSAvIDE4OwogICAgICB9IC8vIDE4bXUgdG8gYW4gZW0gZm9yIHRoZSBzY3JpcHRsZXZlbAoKCiAgICAgIHJldHVybiBtICogc2l6ZTsgLy8gcmVsYXRpdmUgdG8gZ2l2ZW4gc2l6ZSAob3IgMWVtIGFzIGRlZmF1bHQpCiAgICB9LAogICAgRW06IGZ1bmN0aW9uIEVtKG0pIHsKICAgICAgaWYgKE1hdGguYWJzKG0pIDwgLjAwMSkgcmV0dXJuICIwZW0iOwogICAgICByZXR1cm4gbS50b0ZpeGVkKDMpLnJlcGxhY2UoL1wuPzArJC8sICIiKSArICJlbSI7CiAgICB9LAogICAgYXJyYXlFbnRyeTogZnVuY3Rpb24gYXJyYXlFbnRyeShhLCBpKSB7CiAgICAgIHJldHVybiBhW01hdGgubWF4KDAsIE1hdGgubWluKGksIGEubGVuZ3RoIC0gMSkpXTsKICAgIH0KICB9KTsKICBNYXRoSmF4Lkh1Yi5SZWdpc3Rlci5TdGFydHVwSG9vaygibW1sIEpheCBSZWFkeSIsIGZ1bmN0aW9uICgpIHsKICAgIE1NTCA9IE1hdGhKYXguRWxlbWVudEpheC5tbWw7CiAgICBNTUwubWJhc2UuQXVnbWVudCh7CiAgICAgIHRvUHJldmlld0hUTUw6IGZ1bmN0aW9uIHRvUHJldmlld0hUTUwoc3Bhbiwgb3B0aW9ucykgewogICAgICAgIHJldHVybiB0aGlzLlBIVE1MZGVmYXVsdFNwYW4oc3Bhbiwgb3B0aW9ucyk7CiAgICAgIH0sCiAgICAgIFBIVE1MZGVmYXVsdFNwYW46IGZ1bmN0aW9uIFBIVE1MZGVmYXVsdFNwYW4oc3Bhbiwgb3B0aW9ucykgewogICAgICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9OwogICAgICAgIHNwYW4gPSB0aGlzLlBIVE1MY3JlYXRlU3BhbihzcGFuKTsKICAgICAgICB0aGlzLlBIVE1MaGFuZGxlU3R5bGUoc3Bhbik7CiAgICAgICAgdGhpcy5QSFRNTGhhbmRsZUNvbG9yKHNwYW4pOwogICAgICAgIGlmICh0aGlzLmlzVG9rZW4pIHRoaXMuUEhUTUxoYW5kbGVUb2tlbihzcGFuKTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG0gPSB0aGlzLmRhdGEubGVuZ3RoOyBpIDwgbTsgaSsrKSB7CiAgICAgICAgICB0aGlzLlBIVE1MYWRkQ2hpbGQoc3BhbiwgaSwgb3B0aW9ucyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc3BhbjsKICAgICAgfSwKICAgICAgUEhUTUxhZGRDaGlsZDogZnVuY3Rpb24gUEhUTUxhZGRDaGlsZChzcGFuLCBpLCBvcHRpb25zKSB7CiAgICAgICAgdmFyIGNoaWxkID0gdGhpcy5kYXRhW2ldOwoKICAgICAgICBpZiAoY2hpbGQpIHsKICAgICAgICAgIGlmIChvcHRpb25zLmNoaWxkU3BhbnMpIHNwYW4gPSBIVE1MLmFkZEVsZW1lbnQoc3BhbiwgInNwYW4iLCB7CiAgICAgICAgICAgIGNsYXNzTmFtZTogb3B0aW9ucy5jbGFzc05hbWUKICAgICAgICAgIH0pOwogICAgICAgICAgY2hpbGQudG9QcmV2aWV3SFRNTChzcGFuKTsKCiAgICAgICAgICBpZiAoIW9wdGlvbnMubm9CQm94KSB7CiAgICAgICAgICAgIHRoaXMuUEhUTUwudyArPSBjaGlsZC5QSFRNTC53ICsgY2hpbGQuUEhUTUwubCArIGNoaWxkLlBIVE1MLnI7CiAgICAgICAgICAgIGlmIChjaGlsZC5QSFRNTC5oID4gdGhpcy5QSFRNTC5oKSB0aGlzLlBIVE1MLmggPSBjaGlsZC5QSFRNTC5oOwogICAgICAgICAgICBpZiAoY2hpbGQuUEhUTUwuZCA+IHRoaXMuUEhUTUwuZCkgdGhpcy5QSFRNTC5kID0gY2hpbGQuUEhUTUwuZDsKICAgICAgICAgICAgaWYgKGNoaWxkLlBIVE1MLnQgPiB0aGlzLlBIVE1MLnQpIHRoaXMuUEhUTUwudCA9IGNoaWxkLlBIVE1MLnQ7CiAgICAgICAgICAgIGlmIChjaGlsZC5QSFRNTC5iID4gdGhpcy5QSFRNTC5iKSB0aGlzLlBIVE1MLmIgPSBjaGlsZC5QSFRNTC5iOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5mb3JjZUNoaWxkKSB7CiAgICAgICAgICBIVE1MLmFkZEVsZW1lbnQoc3BhbiwgInNwYW4iKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIFBIVE1Mc3RyZXRjaENoaWxkOiBmdW5jdGlvbiBQSFRNTHN0cmV0Y2hDaGlsZChpLCBILCBEKSB7CiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmRhdGFbaV07CgogICAgICAgIGlmIChkYXRhICYmIGRhdGEuUEhUTUxjYW5TdHJldGNoKCJWZXJ0aWNhbCIsIEgsIEQpKSB7CiAgICAgICAgICB2YXIgYmJveCA9IHRoaXMuUEhUTUwsCiAgICAgICAgICAgICAgZGJveCA9IGRhdGEuUEhUTUwsCiAgICAgICAgICAgICAgdyA9IGRib3gudzsKICAgICAgICAgIGRhdGEuUEhUTUxzdHJldGNoVihILCBEKTsKICAgICAgICAgIGJib3gudyArPSBkYm94LncgLSB3OwogICAgICAgICAgaWYgKGRib3guaCA+IGJib3guaCkgYmJveC5oID0gZGJveC5oOwogICAgICAgICAgaWYgKGRib3guZCA+IGJib3guZCkgYmJveC5kID0gZGJveC5kOwogICAgICAgIH0KICAgICAgfSwKICAgICAgUEhUTUxjcmVhdGVTcGFuOiBmdW5jdGlvbiBQSFRNTGNyZWF0ZVNwYW4oc3BhbikgewogICAgICAgIGlmICghdGhpcy5QSFRNTCkgdGhpcy5QSFRNTCA9IHt9OwogICAgICAgIHRoaXMuUEhUTUwgPSB7CiAgICAgICAgICB3OiAwLAogICAgICAgICAgaDogMCwKICAgICAgICAgIGQ6IDAsCiAgICAgICAgICBsOiAwLAogICAgICAgICAgcjogMCwKICAgICAgICAgIHQ6IDAsCiAgICAgICAgICBiOiAwCiAgICAgICAgfTsKICAgICAgICBpZiAodGhpcy5pbmZlcnJlZCkgcmV0dXJuIHNwYW47IC8vICAjIyMgRklYTUU6ICBUaGlzIGlzIGEgaGFjayB0byBoYW5kbGUgdGhlIGRpZmZlcmVudCBzcGFjaW5nIG9mIHRoZQogICAgICAgIC8vICAjIyMgaW50ZWdyYWwgc2lnbiBpbiBUaW1lcyBjb21wYXJlZCB0byBDTSBmb250cwoKICAgICAgICBpZiAodGhpcy50eXBlID09PSAibW8iICYmIHRoaXMuZGF0YS5qb2luKCIiKSA9PT0gIlx1MjIyQiIpIHsKICAgICAgICAgIFBIVE1MLmxhc3RJc0ludCA9IHRydWU7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgIT09ICJtc3BhY2UiIHx8IHRoaXMud2lkdGggIT09ICJuZWdhdGl2ZXRoaW5tYXRoc3BhY2UiKSB7CiAgICAgICAgICBQSFRNTC5sYXN0SXNJbnQgPSBmYWxzZTsKICAgICAgICB9IC8vICAjIyMKCgogICAgICAgIGlmICghdGhpcy5QSFRNTHNwYW5JRCkgewogICAgICAgICAgdGhpcy5QSFRNTHNwYW5JRCA9IFBIVE1MLkdldElEKCk7CiAgICAgICAgfQoKICAgICAgICA7CiAgICAgICAgdmFyIGlkID0gdGhpcy5pZCB8fCAiTUpYcC1TcGFuLSIgKyB0aGlzLlBIVE1Mc3BhbklEOwogICAgICAgIHJldHVybiBIVE1MLmFkZEVsZW1lbnQoc3BhbiwgInNwYW4iLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJNSlhwLSIgKyB0aGlzLnR5cGUsCiAgICAgICAgICBpZDogaWQKICAgICAgICB9KTsKICAgICAgfSwKICAgICAgUEhUTUxzcGFuRWxlbWVudDogZnVuY3Rpb24gUEhUTUxzcGFuRWxlbWVudCgpIHsKICAgICAgICBpZiAoIXRoaXMuUEhUTUxzcGFuSUQpIHsKICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuaWQgfHwgIk1KWHAtU3Bhbi0iICsgdGhpcy5QSFRNTHNwYW5JRCk7CiAgICAgIH0sCiAgICAgIFBIVE1MaGFuZGxlVG9rZW46IGZ1bmN0aW9uIFBIVE1MaGFuZGxlVG9rZW4oc3BhbikgewogICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLmdldFZhbHVlcygibWF0aHZhcmlhbnQiKTsKCiAgICAgICAgaWYgKHZhbHVlcy5tYXRodmFyaWFudCAhPT0gTU1MLlZBUklBTlQuTk9STUFMKSB7CiAgICAgICAgICBzcGFuLmNsYXNzTmFtZSArPSAiICIgKyBQSFRNTC5WQVJJQU5UW3ZhbHVlcy5tYXRodmFyaWFudF07CiAgICAgICAgfQogICAgICB9LAogICAgICBQSFRNTGhhbmRsZVN0eWxlOiBmdW5jdGlvbiBQSFRNTGhhbmRsZVN0eWxlKHNwYW4pIHsKICAgICAgICBpZiAodGhpcy5zdHlsZSkgc3Bhbi5zdHlsZS5jc3NUZXh0ID0gdGhpcy5zdHlsZTsKICAgICAgfSwKICAgICAgUEhUTUxoYW5kbGVDb2xvcjogZnVuY3Rpb24gUEhUTUxoYW5kbGVDb2xvcihzcGFuKSB7CiAgICAgICAgaWYgKHRoaXMubWF0aGNvbG9yKSB7CiAgICAgICAgICBzcGFuLnN0eWxlLmNvbG9yID0gdGhpcy5tYXRoY29sb3I7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5tYXRoYmFja2dyb3VuZCkgewogICAgICAgICAgc3Bhbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLm1hdGhiYWNrZ3JvdW5kOwogICAgICAgIH0KICAgICAgfSwKICAgICAgUEhUTUxoYW5kbGVTY3JpcHRsZXZlbDogZnVuY3Rpb24gUEhUTUxoYW5kbGVTY3JpcHRsZXZlbChzcGFuKSB7CiAgICAgICAgLy8gIyMjIEZJWE1FOiAgTmVlZCB0byBwcmV2ZW50IGdldHRpbmcgdG9vIHNtYWxsCiAgICAgICAgLy8gIyMjIGFuZCBzaG91bGQga2VlcCB0cmFjayBvZiBzY2FsaW5nIHNvIGl0IGNhbiBiZSBjb21wZW5zYXRlZCBmb3IKICAgICAgICB2YXIgbGV2ZWwgPSB0aGlzLkdldCgic2NyaXB0bGV2ZWwiKTsKICAgICAgICBpZiAobGV2ZWwpIHNwYW4uY2xhc3NOYW1lICs9ICIgTUpYcC1zY3JpcHQiOwogICAgICB9LAogICAgICBQSFRNTGhhbmRsZVRleHQ6IGZ1bmN0aW9uIFBIVE1MaGFuZGxlVGV4dChzcGFuLCB0ZXh0KSB7CiAgICAgICAgdmFyIGMsIG47CiAgICAgICAgdmFyIEggPSAwLAogICAgICAgICAgICBEID0gMCwKICAgICAgICAgICAgVyA9IDA7CgogICAgICAgIGZvciAodmFyIGkgPSAwLCBtID0gdGV4dC5sZW5ndGg7IGkgPCBtOyBpKyspIHsKICAgICAgICAgIG4gPSB0ZXh0LmNoYXJDb2RlQXQoaSk7CiAgICAgICAgICBjID0gdGV4dC5jaGFyQXQoaSk7CgogICAgICAgICAgaWYgKG4gPj0gMHhEODAwICYmIG4gPCAweERCRkYpIHsKICAgICAgICAgICAgaSsrOwogICAgICAgICAgICBuID0gKG4gLSAweEQ4MDAgPDwgMTApICsgKHRleHQuY2hhckNvZGVBdChpKSAtIDB4REMwMCkgKyAweDEwMDAwOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBoID0gLjcsCiAgICAgICAgICAgICAgZCA9IC4yMiwKICAgICAgICAgICAgICB3ID0gLjU7CgogICAgICAgICAgaWYgKG4gPCAxMjcpIHsKICAgICAgICAgICAgaWYgKGMubWF0Y2goL1tBLVphLWVoaWstb3IteHowLTldLykpIGQgPSAwOwoKICAgICAgICAgICAgaWYgKGMubWF0Y2goL1tBLUhLLVpdLykpIHsKICAgICAgICAgICAgICB3ID0gLjY3OwogICAgICAgICAgICB9IGVsc2UgaWYgKGMubWF0Y2goL1tJSl0vKSkgewogICAgICAgICAgICAgIHcgPSAuMzY7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChjLm1hdGNoKC9bYWNlZ20tc3Utel0vKSkgewogICAgICAgICAgICAgIGggPSAuNDU7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoYy5tYXRjaCgvW2lqXS8pKSB7CiAgICAgICAgICAgICAgaCA9IC43NTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGMubWF0Y2goL1tpamx0XS8pKSB3ID0gLjI4OwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChQSFRNTC5ERUxJTUlURVJTW2NdKSB7CiAgICAgICAgICAgIHcgPSBQSFRNTC5ERUxJTUlURVJTW2NdLncgfHwgLjQ7CiAgICAgICAgICB9IC8vICMjIyBGSVhNRTogIGhhbmRsZSBHcmVlawogICAgICAgICAgLy8gIyMjIENvbWJpbmluZyBkaWFjcml0aWNhbHMgKGFsbCBzZXRzKSwgc3BhY2luZyBtb2RpZmllcnMKICAgICAgICAgIC8vICMjIyBhcnJvd3MgKGFsbCBzZXRzKSwgd2lkdGhzIG9mIGJyYWNlcwoKCiAgICAgICAgICBpZiAoaCA+IEgpIEggPSBoOwogICAgICAgICAgaWYgKGQgPiBEKSBEID0gZDsKICAgICAgICAgIFcgKz0gdzsKICAgICAgICB9CgogICAgICAgIGlmICghdGhpcy5DSE1MKSB0aGlzLlBIVE1MID0ge307CiAgICAgICAgdGhpcy5QSFRNTCA9IHsKICAgICAgICAgIGg6IC45LAogICAgICAgICAgZDogLjMsCiAgICAgICAgICB3OiBXLAogICAgICAgICAgbDogMCwKICAgICAgICAgIHI6IDAsCiAgICAgICAgICB0OiBILAogICAgICAgICAgYjogRAogICAgICAgIH07CiAgICAgICAgSFRNTC5hZGRUZXh0KHNwYW4sIHRleHQpOwogICAgICB9LAogICAgICBQSFRNTGJib3hGb3I6IGZ1bmN0aW9uIFBIVE1MYmJveEZvcihuKSB7CiAgICAgICAgaWYgKHRoaXMuZGF0YVtuXSAmJiB0aGlzLmRhdGFbbl0uUEhUTUwpIHJldHVybiB0aGlzLmRhdGFbbl0uUEhUTUw7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHc6IDAsCiAgICAgICAgICBoOiAwLAogICAgICAgICAgZDogMCwKICAgICAgICAgIGw6IDAsCiAgICAgICAgICByOiAwLAogICAgICAgICAgdDogMCwKICAgICAgICAgIGI6IDAKICAgICAgICB9OwogICAgICB9LAogICAgICBQSFRNTGNhblN0cmV0Y2g6IGZ1bmN0aW9uIFBIVE1MY2FuU3RyZXRjaChkaXJlY3Rpb24sIEgsIEQpIHsKICAgICAgICBpZiAodGhpcy5pc0VtYmVsbGlzaGVkKCkpIHsKICAgICAgICAgIHZhciBjb3JlID0gdGhpcy5Db3JlKCk7CgogICAgICAgICAgaWYgKGNvcmUgJiYgY29yZSAhPT0gdGhpcykgewogICAgICAgICAgICByZXR1cm4gY29yZS5QSFRNTGNhblN0cmV0Y2goZGlyZWN0aW9uLCBILCBEKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSwKICAgICAgUEhUTUxzdHJldGNoVjogZnVuY3Rpb24gUEhUTUxzdHJldGNoVihoLCBkKSB7fSwKICAgICAgUEhUTUxzdHJldGNoSDogZnVuY3Rpb24gUEhUTUxzdHJldGNoSCh3KSB7fSwKICAgICAgQ29yZVBhcmVudDogZnVuY3Rpb24gQ29yZVBhcmVudCgpIHsKICAgICAgICB2YXIgcGFyZW50ID0gdGhpczsKCiAgICAgICAgd2hpbGUgKHBhcmVudCAmJiBwYXJlbnQuaXNFbWJlbGxpc2hlZCgpICYmIHBhcmVudC5Db3JlTU8oKSA9PT0gdGhpcyAmJiAhcGFyZW50LmlzYShNTUwubWF0aCkpIHsKICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5QYXJlbnQoKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBwYXJlbnQ7CiAgICAgIH0sCiAgICAgIENvcmVUZXh0OiBmdW5jdGlvbiBDb3JlVGV4dChwYXJlbnQpIHsKICAgICAgICBpZiAoIXBhcmVudCkgewogICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIH0KCiAgICAgICAgaWYgKHBhcmVudC5pc0VtYmVsbGlzaGVkKCkpIHsKICAgICAgICAgIHJldHVybiBwYXJlbnQuQ29yZU1PKCkuZGF0YS5qb2luKCIiKTsKICAgICAgICB9CgogICAgICAgIHdoaWxlICgocGFyZW50LmlzYShNTUwubXJvdykgfHwgcGFyZW50LmlzYShNTUwuVGVYQXRvbSkgfHwgcGFyZW50LmlzYShNTUwubXN0eWxlKSB8fCBwYXJlbnQuaXNhKE1NTC5tcGhhbnRvbSkpICYmIHBhcmVudC5kYXRhLmxlbmd0aCA9PT0gMSAmJiBwYXJlbnQuZGF0YVswXSkgewogICAgICAgICAgcGFyZW50ID0gcGFyZW50LmRhdGFbMF07CiAgICAgICAgfQoKICAgICAgICBpZiAoIXBhcmVudC5pc1Rva2VuKSB7CiAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBwYXJlbnQuZGF0YS5qb2luKCIiKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwogICAgTU1MLmNoYXJzLkF1Z21lbnQoewogICAgICB0b1ByZXZpZXdIVE1MOiBmdW5jdGlvbiB0b1ByZXZpZXdIVE1MKHNwYW4pIHsKICAgICAgICB2YXIgdGV4dCA9IHRoaXMudG9TdHJpbmcoKS5yZXBsYWNlKC9bXHUyMDYxLVx1MjA2NF0vZywgIiIpOwogICAgICAgIHRoaXMuUEhUTUxoYW5kbGVUZXh0KHNwYW4sIHRleHQpOwogICAgICB9CiAgICB9KTsKICAgIE1NTC5lbnRpdHkuQXVnbWVudCh7CiAgICAgIHRvUHJldmlld0hUTUw6IGZ1bmN0aW9uIHRvUHJldmlld0hUTUwoc3BhbikgewogICAgICAgIHZhciB0ZXh0ID0gdGhpcy50b1N0cmluZygpLnJlcGxhY2UoL1tcdTIwNjEtXHUyMDY0XS9nLCAiIik7CiAgICAgICAgdGhpcy5QSFRNTGhhbmRsZVRleHQoc3BhbiwgdGV4dCk7CiAgICAgIH0KICAgIH0pOwogICAgTU1MLm1hdGguQXVnbWVudCh7CiAgICAgIHRvUHJldmlld0hUTUw6IGZ1bmN0aW9uIHRvUHJldmlld0hUTUwoc3BhbikgewogICAgICAgIHNwYW4gPSB0aGlzLlBIVE1MZGVmYXVsdFNwYW4oc3Bhbik7CgogICAgICAgIGlmICh0aGlzLkdldCgiZGlzcGxheSIpID09PSAiYmxvY2siKSB7CiAgICAgICAgICBzcGFuLmNsYXNzTmFtZSArPSAiIE1KWHAtZGlzcGxheSI7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc3BhbjsKICAgICAgfQogICAgfSk7CiAgICBNTUwubW8uQXVnbWVudCh7CiAgICAgIHRvUHJldmlld0hUTUw6IGZ1bmN0aW9uIHRvUHJldmlld0hUTUwoc3BhbikgewogICAgICAgIHNwYW4gPSB0aGlzLlBIVE1MZGVmYXVsdFNwYW4oc3Bhbik7CiAgICAgICAgdGhpcy5QSFRNTGFkanVzdEFjY2VudChzcGFuKTsKICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy5nZXRWYWx1ZXMoImxzcGFjZSIsICJyc3BhY2UiLCAic2NyaXB0bGV2ZWwiLCAiZGlzcGxheXN0eWxlIiwgImxhcmdlb3AiKTsKCiAgICAgICAgaWYgKHZhbHVlcy5zY3JpcHRsZXZlbCA9PT0gMCkgewogICAgICAgICAgdGhpcy5QSFRNTC5sID0gUEhUTUwubGVuZ3RoMmVtKHZhbHVlcy5sc3BhY2UpOwogICAgICAgICAgdGhpcy5QSFRNTC5yID0gUEhUTUwubGVuZ3RoMmVtKHZhbHVlcy5yc3BhY2UpOwogICAgICAgICAgc3Bhbi5zdHlsZS5tYXJnaW5MZWZ0ID0gUEhUTUwuRW0odGhpcy5QSFRNTC5sKTsKICAgICAgICAgIHNwYW4uc3R5bGUubWFyZ2luUmlnaHQgPSBQSFRNTC5FbSh0aGlzLlBIVE1MLnIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLlBIVE1MLmwgPSAuMTU7CiAgICAgICAgICB0aGlzLlBIVE1MLnIgPSAuMTsKICAgICAgICB9CgogICAgICAgIGlmICh2YWx1ZXMuZGlzcGxheXN0eWxlICYmIHZhbHVlcy5sYXJnZW9wKSB7CiAgICAgICAgICB2YXIgYm94ID0gSFRNTC5FbGVtZW50KCJzcGFuIiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJNSlhwLWxhcmdlb3AiCiAgICAgICAgICB9KTsKICAgICAgICAgIGJveC5hcHBlbmRDaGlsZChzcGFuLmZpcnN0Q2hpbGQpOwogICAgICAgICAgc3Bhbi5hcHBlbmRDaGlsZChib3gpOwogICAgICAgICAgdGhpcy5QSFRNTC5oICo9IDEuMjsKICAgICAgICAgIHRoaXMuUEhUTUwuZCAqPSAxLjI7CiAgICAgICAgICBpZiAodGhpcy5kYXRhLmpvaW4oIiIpID09PSAiXHUyMjJCIikgYm94LmNsYXNzTmFtZSArPSAiIE1KWHAtaW50IjsKICAgICAgICB9IC8vICMjIyBGSVhNRTogIEhhbmRsZSBlbWJlbGxpc2hlZCBvcCBzcGFjaW5nCiAgICAgICAgLy8gIyMjIEZJWE1FOiAgUmVtYXAgbWludXMgc2lnbnMKCgogICAgICAgIHJldHVybiBzcGFuOwogICAgICB9LAogICAgICBQSFRNTGFkanVzdEFjY2VudDogZnVuY3Rpb24gUEhUTUxhZGp1c3RBY2NlbnQoc3BhbikgewogICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLkNvcmVQYXJlbnQoKTsKCiAgICAgICAgaWYgKHBhcmVudCAmJiBwYXJlbnQuaXNhKE1NTC5tdW5kZXJvdmVyKSAmJiB0aGlzLkNvcmVUZXh0KHBhcmVudC5kYXRhW3BhcmVudC5iYXNlXSkubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICB2YXIgb3ZlciA9IHBhcmVudC5kYXRhW3BhcmVudC5vdmVyXSwKICAgICAgICAgICAgICB1bmRlciA9IHBhcmVudC5kYXRhW3BhcmVudC51bmRlcl07CiAgICAgICAgICB2YXIgYyA9IHRoaXMuZGF0YS5qb2luKCIiKSwKICAgICAgICAgICAgICBDOwoKICAgICAgICAgIGlmIChvdmVyICYmIHRoaXMgPT09IG92ZXIuQ29yZU1PKCkgJiYgcGFyZW50LkdldCgiYWNjZW50IikpIHsKICAgICAgICAgICAgQyA9IFBIVE1MLlJFTUFQQUNDRU5UW2NdOwogICAgICAgICAgfSBlbHNlIGlmICh1bmRlciAmJiB0aGlzID09PSB1bmRlci5Db3JlTU8oKSAmJiBwYXJlbnQuR2V0KCJhY2NlbnR1bmRlciIpKSB7CiAgICAgICAgICAgIEMgPSBQSFRNTC5SRU1BUEFDQ0VOVFVOREVSW2NdOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChDKSBjID0gc3Bhbi5pbm5lckhUTUwgPSBDOwoKICAgICAgICAgIGlmIChjLm1hdGNoKC9bXHUwMkM2LVx1MDJEQ1x1MDBBOF0vKSkgewogICAgICAgICAgICB0aGlzLlBIVE1MLmFjYyA9IC0uNTI7CiAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICJcdTIxOTIiKSB7CiAgICAgICAgICAgIHRoaXMuUEhUTUwuYWNjID0gLS4xNTsKICAgICAgICAgICAgdGhpcy5QSFRNTC52ZWMgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgUEhUTUxjYW5TdHJldGNoOiBmdW5jdGlvbiBQSFRNTGNhblN0cmV0Y2goZGlyZWN0aW9uLCBILCBEKSB7CiAgICAgICAgaWYgKCF0aGlzLkdldCgic3RyZXRjaHkiKSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgdmFyIGMgPSB0aGlzLmRhdGEuam9pbigiIik7CgogICAgICAgIGlmIChjLmxlbmd0aCA+IDEpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGMgPSBQSFRNTC5ERUxJTUlURVJTW2NdOwogICAgICAgIHZhciBzdHJldGNoID0gYyAmJiBjLmRpciA9PT0gZGlyZWN0aW9uLnN1YnN0cigwLCAxKTsKCiAgICAgICAgaWYgKHN0cmV0Y2gpIHsKICAgICAgICAgIHN0cmV0Y2ggPSB0aGlzLlBIVE1MLmggIT09IEggfHwgdGhpcy5QSFRNTC5kICE9PSBEIHx8IHRoaXMuR2V0KCJtaW5zaXplIiwgdHJ1ZSkgfHwgdGhpcy5HZXQoIm1heHNpemUiLCB0cnVlKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzdHJldGNoOwogICAgICB9LAogICAgICBQSFRNTHN0cmV0Y2hWOiBmdW5jdGlvbiBQSFRNTHN0cmV0Y2hWKGgsIGQpIHsKICAgICAgICB2YXIgc3BhbiA9IHRoaXMuUEhUTUxzcGFuRWxlbWVudCgpLAogICAgICAgICAgICBiYm94ID0gdGhpcy5QSFRNTDsgLy9iYm94LncgPSAuNDsgLy8gIyMgYWRqdXN0IHdpZHRoCgogICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLmdldFZhbHVlcygic3ltbWV0cmljIiwgIm1heHNpemUiLCAibWluc2l6ZSIpOwoKICAgICAgICBpZiAodmFsdWVzLnN5bW1ldHJpYykgewogICAgICAgICAgSCA9IDIgKiBNYXRoLm1heChoIC0gLjI1LCBkICsgLjI1KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgSCA9IGggKyBkOwogICAgICAgIH0KCiAgICAgICAgdmFsdWVzLm1heHNpemUgPSBQSFRNTC5sZW5ndGgyZW0odmFsdWVzLm1heHNpemUsIGJib3guaCArIGJib3guZCk7CiAgICAgICAgdmFsdWVzLm1pbnNpemUgPSBQSFRNTC5sZW5ndGgyZW0odmFsdWVzLm1pbnNpemUsIGJib3guaCArIGJib3guZCk7CiAgICAgICAgSCA9IE1hdGgubWF4KHZhbHVlcy5taW5zaXplLCBNYXRoLm1pbih2YWx1ZXMubWF4c2l6ZSwgSCkpOwogICAgICAgIHZhciBzY2FsZSA9IEggLyAoYmJveC5oICsgYmJveC5kIC0gLjMpOyAvLyAjIyMgYWRqdXN0ZWQgZm9yIGV4dHJhIHRhbGwgYmJveAoKICAgICAgICB2YXIgYm94ID0gSFRNTC5FbGVtZW50KCJzcGFuIiwgewogICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgImZvbnQtc2l6ZSI6IFBIVE1MLkVtKHNjYWxlKQogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBpZiAoc2NhbGUgPiAxLjI1KSB7CiAgICAgICAgICB2YXIgc1ggPSBNYXRoLmNlaWwoMS4yNSAvIHNjYWxlICogMTApOwogICAgICAgICAgYm94LmNsYXNzTmFtZSA9ICJNSlhwLXJpZ2h0IE1KWHAtc2NhbGUiICsgc1g7CiAgICAgICAgICBib3guc3R5bGUubWFyZ2luTGVmdCA9IFBIVE1MLkVtKGJib3gudyAqIChzWCAvIDEwIC0gMSkgKyAuMDcpOwogICAgICAgICAgYmJveC53ICo9IHNjYWxlICogc1ggLyAxMDsKICAgICAgICB9CgogICAgICAgIGJveC5hcHBlbmRDaGlsZChzcGFuLmZpcnN0Q2hpbGQpOwogICAgICAgIHNwYW4uYXBwZW5kQ2hpbGQoYm94KTsKICAgICAgICBpZiAodmFsdWVzLnN5bW1ldHJpYykgc3Bhbi5zdHlsZS52ZXJ0aWNhbEFsaWduID0gUEhUTUwuRW0oLjI1ICogKDEgLSBzY2FsZSkpOwogICAgICB9CiAgICB9KTsKICAgIE1NTC5tc3BhY2UuQXVnbWVudCh7CiAgICAgIHRvUHJldmlld0hUTUw6IGZ1bmN0aW9uIHRvUHJldmlld0hUTUwoc3BhbikgewogICAgICAgIHNwYW4gPSB0aGlzLlBIVE1MZGVmYXVsdFNwYW4oc3Bhbik7CiAgICAgICAgdmFyIHZhbHVlcyA9IHRoaXMuZ2V0VmFsdWVzKCJoZWlnaHQiLCAiZGVwdGgiLCAid2lkdGgiKTsKICAgICAgICB2YXIgdyA9IFBIVE1MLmxlbmd0aDJlbSh2YWx1ZXMud2lkdGgpLAogICAgICAgICAgICBoID0gUEhUTUwubGVuZ3RoMmVtKHZhbHVlcy5oZWlnaHQpLAogICAgICAgICAgICBkID0gUEhUTUwubGVuZ3RoMmVtKHZhbHVlcy5kZXB0aCk7CiAgICAgICAgdmFyIGJib3ggPSB0aGlzLlBIVE1MOwogICAgICAgIGJib3gudyA9IHc7CiAgICAgICAgYmJveC5oID0gaDsKICAgICAgICBiYm94LmQgPSBkOwoKICAgICAgICBpZiAodyA8IDApIHsKICAgICAgICAgIC8vICAjIyMgRklYTUU6ICBsYXN0SXNJbnQgaGFjawogICAgICAgICAgaWYgKCFQSFRNTC5sYXN0SXNJbnQpIHNwYW4uc3R5bGUubWFyZ2luTGVmdCA9IFBIVE1MLkVtKHcpOwogICAgICAgICAgdyA9IDA7CiAgICAgICAgfQoKICAgICAgICBzcGFuLnN0eWxlLndpZHRoID0gUEhUTUwuRW0odyk7CiAgICAgICAgc3Bhbi5zdHlsZS5oZWlnaHQgPSBQSFRNTC5FbShoICsgZCk7CiAgICAgICAgaWYgKGQpIHNwYW4uc3R5bGUudmVydGljYWxBbGlnbiA9IFBIVE1MLkVtKC1kKTsKICAgICAgICByZXR1cm4gc3BhbjsKICAgICAgfQogICAgfSk7CiAgICBNTUwubXBhZGRlZC5BdWdtZW50KHsKICAgICAgdG9QcmV2aWV3SFRNTDogZnVuY3Rpb24gdG9QcmV2aWV3SFRNTChzcGFuKSB7CiAgICAgICAgc3BhbiA9IHRoaXMuUEhUTUxkZWZhdWx0U3BhbihzcGFuLCB7CiAgICAgICAgICBjaGlsZFNwYW5zOiB0cnVlLAogICAgICAgICAgY2xhc3NOYW1lOiAiTUpYcC1ib3giLAogICAgICAgICAgZm9yY2VDaGlsZDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIHZhciBjaGlsZCA9IHNwYW4uZmlyc3RDaGlsZDsKICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy5nZXRWYWx1ZXMoIndpZHRoIiwgImhlaWdodCIsICJkZXB0aCIsICJsc3BhY2UiLCAidm9mZnNldCIpOwogICAgICAgIHZhciBkaW1lbiA9IHRoaXMuUEhUTUxkaW1lbih2YWx1ZXMubHNwYWNlKTsKICAgICAgICB2YXIgVCA9IDAsCiAgICAgICAgICAgIEIgPSAwLAogICAgICAgICAgICBMID0gZGltZW4ubGVuLAogICAgICAgICAgICBSID0gLWRpbWVuLmxlbiwKICAgICAgICAgICAgViA9IDA7CgogICAgICAgIGlmICh2YWx1ZXMud2lkdGggIT09ICIiKSB7CiAgICAgICAgICBkaW1lbiA9IHRoaXMuUEhUTUxkaW1lbih2YWx1ZXMud2lkdGgsICJ3IiwgMCk7CgogICAgICAgICAgaWYgKGRpbWVuLnBtKSB7CiAgICAgICAgICAgIFIgKz0gZGltZW4ubGVuOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3Bhbi5zdHlsZS53aWR0aCA9IFBIVE1MLkVtKGRpbWVuLmxlbik7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAodmFsdWVzLmhlaWdodCAhPT0gIiIpIHsKICAgICAgICAgIGRpbWVuID0gdGhpcy5QSFRNTGRpbWVuKHZhbHVlcy5oZWlnaHQsICJoIiwgMCk7CiAgICAgICAgICBpZiAoIWRpbWVuLnBtKSBUICs9IC10aGlzLlBIVE1MYmJveEZvcigwKS5oOwogICAgICAgICAgVCArPSBkaW1lbi5sZW47CiAgICAgICAgfQoKICAgICAgICBpZiAodmFsdWVzLmRlcHRoICE9PSAiIikgewogICAgICAgICAgZGltZW4gPSB0aGlzLlBIVE1MZGltZW4odmFsdWVzLmRlcHRoLCAiZCIsIDApOwoKICAgICAgICAgIGlmICghZGltZW4ucG0pIHsKICAgICAgICAgICAgQiArPSAtdGhpcy5QSFRNTGJib3hGb3IoMCkuZDsKICAgICAgICAgICAgViArPSAtZGltZW4ubGVuOwogICAgICAgICAgfQoKICAgICAgICAgIEIgKz0gZGltZW4ubGVuOwogICAgICAgIH0KCiAgICAgICAgaWYgKHZhbHVlcy52b2Zmc2V0ICE9PSAiIikgewogICAgICAgICAgZGltZW4gPSB0aGlzLlBIVE1MZGltZW4odmFsdWVzLnZvZmZzZXQpOwogICAgICAgICAgVCAtPSBkaW1lbi5sZW47CiAgICAgICAgICBCICs9IGRpbWVuLmxlbjsKICAgICAgICAgIFYgKz0gZGltZW4ubGVuOwogICAgICAgIH0KCiAgICAgICAgaWYgKFQpIGNoaWxkLnN0eWxlLm1hcmdpblRvcCA9IFBIVE1MLkVtKFQpOwogICAgICAgIGlmIChCKSBjaGlsZC5zdHlsZS5tYXJnaW5Cb3R0b20gPSBQSFRNTC5FbShCKTsKICAgICAgICBpZiAoTCkgY2hpbGQuc3R5bGUubWFyZ2luTGVmdCA9IFBIVE1MLkVtKEwpOwogICAgICAgIGlmIChSKSBjaGlsZC5zdHlsZS5tYXJnaW5SaWdodCA9IFBIVE1MLkVtKFIpOwogICAgICAgIGlmIChWKSBzcGFuLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSBQSFRNTC5FbShWKTsKICAgICAgICByZXR1cm4gc3BhbjsKICAgICAgfSwKICAgICAgUEhUTUxkaW1lbjogZnVuY3Rpb24gUEhUTUxkaW1lbihsZW5ndGgsIGQsIG0pIHsKICAgICAgICBpZiAobSA9PSBudWxsKSB7CiAgICAgICAgICBtID0gLUJJR0RJTUVOOwogICAgICAgIH0KCiAgICAgICAgbGVuZ3RoID0gU3RyaW5nKGxlbmd0aCk7CiAgICAgICAgdmFyIG1hdGNoID0gbGVuZ3RoLm1hdGNoKC93aWR0aHxoZWlnaHR8ZGVwdGgvKTsKICAgICAgICB2YXIgc2l6ZSA9IG1hdGNoID8gdGhpcy5QSFRNTFttYXRjaFswXS5jaGFyQXQoMCldIDogZCA/IHRoaXMuUEhUTUxbZF0gOiAwOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBsZW46IFBIVE1MLmxlbmd0aDJlbShsZW5ndGgsIHNpemUpIHx8IDAsCiAgICAgICAgICBwbTogISFsZW5ndGgubWF0Y2goL15bLStdLykKICAgICAgICB9OwogICAgICB9CiAgICB9KTsKICAgIE1NTC5tdW5kZXJvdmVyLkF1Z21lbnQoewogICAgICB0b1ByZXZpZXdIVE1MOiBmdW5jdGlvbiB0b1ByZXZpZXdIVE1MKHNwYW4pIHsKICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy5nZXRWYWx1ZXMoImRpc3BsYXlzdHlsZSIsICJhY2NlbnQiLCAiYWNjZW50dW5kZXIiLCAiYWxpZ24iKTsKICAgICAgICB2YXIgYmFzZSA9IHRoaXMuZGF0YVt0aGlzLmJhc2VdOwoKICAgICAgICBpZiAoIXZhbHVlcy5kaXNwbGF5c3R5bGUgJiYgYmFzZSAhPSBudWxsICYmIChiYXNlLm1vdmFibGVsaW1pdHMgfHwgYmFzZS5Db3JlTU8oKS5HZXQoIm1vdmFibGVsaW1pdHMiKSkpIHsKICAgICAgICAgIHNwYW4gPSBNTUwubXN1YnN1cC5wcm90b3R5cGUudG9QcmV2aWV3SFRNTC5jYWxsKHRoaXMsIHNwYW4pOyAvLwogICAgICAgICAgLy8gIENoYW5nZSBjbGFzcyB0byBtc3Vic3VwIGZvciBDU1MgcnVsZXMuCiAgICAgICAgICAvLyAgIyMjIEZJWE1FOiBzaG91bGQgdGhpcyBiZSBoYW5kbGVkIHZpYSBhZGRpbmcgYW5vdGhlciBjbGFzcyBpbnN0ZWFkPwogICAgICAgICAgLy8KCiAgICAgICAgICBzcGFuLmNsYXNzTmFtZSA9IHNwYW4uY2xhc3NOYW1lLnJlcGxhY2UoL211bmRlcm92ZXIvLCAibXN1YnN1cCIpOwogICAgICAgICAgcmV0dXJuIHNwYW47CiAgICAgICAgfQoKICAgICAgICBzcGFuID0gdGhpcy5QSFRNTGRlZmF1bHRTcGFuKHNwYW4sIHsKICAgICAgICAgIGNoaWxkU3BhbnM6IHRydWUsCiAgICAgICAgICBjbGFzc05hbWU6ICIiLAogICAgICAgICAgbm9CQm94OiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgdmFyIG9ib3ggPSB0aGlzLlBIVE1MYmJveEZvcih0aGlzLm92ZXIpLAogICAgICAgICAgICB1Ym94ID0gdGhpcy5QSFRNTGJib3hGb3IodGhpcy51bmRlciksCiAgICAgICAgICAgIGJib3ggPSB0aGlzLlBIVE1MYmJveEZvcih0aGlzLmJhc2UpLAogICAgICAgICAgICBCQk9YID0gdGhpcy5QSFRNTCwKICAgICAgICAgICAgYWNjID0gb2JveC5hY2M7CgogICAgICAgIGlmICh0aGlzLmRhdGFbdGhpcy5vdmVyXSkgewogICAgICAgICAgc3Bhbi5sYXN0Q2hpbGQuZmlyc3RDaGlsZC5zdHlsZS5tYXJnaW5MZWZ0ID0gb2JveC5sID0gc3Bhbi5sYXN0Q2hpbGQuZmlyc3RDaGlsZC5zdHlsZS5tYXJnaW5SaWdodCA9IG9ib3guciA9IDA7CiAgICAgICAgICB2YXIgb3ZlciA9IEhUTUwuRWxlbWVudCgic3BhbiIsIHt9LCBbWyJzcGFuIiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJNSlhwLW92ZXIiCiAgICAgICAgICB9XV0pOwogICAgICAgICAgb3Zlci5maXJzdENoaWxkLmFwcGVuZENoaWxkKHNwYW4ubGFzdENoaWxkKTsKICAgICAgICAgIGlmIChzcGFuLmNoaWxkTm9kZXMubGVuZ3RoID4gKHRoaXMuZGF0YVt0aGlzLnVuZGVyXSA/IDEgOiAwKSkgb3Zlci5maXJzdENoaWxkLmFwcGVuZENoaWxkKHNwYW4uZmlyc3RDaGlsZCk7CiAgICAgICAgICB0aGlzLmRhdGFbdGhpcy5vdmVyXS5QSFRNTGhhbmRsZVNjcmlwdGxldmVsKG92ZXIuZmlyc3RDaGlsZC5maXJzdENoaWxkKTsKCiAgICAgICAgICBpZiAoYWNjICE9IG51bGwpIHsKICAgICAgICAgICAgaWYgKG9ib3gudmVjKSB7CiAgICAgICAgICAgICAgb3Zlci5maXJzdENoaWxkLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZC5zdHlsZS5mb250U2l6ZSA9ICI2MCUiOwogICAgICAgICAgICAgIG9ib3guaCAqPSAuNjsKICAgICAgICAgICAgICBvYm94LmQgKj0gLjY7CiAgICAgICAgICAgICAgb2JveC53ICo9IC42OwogICAgICAgICAgICB9CgogICAgICAgICAgICBhY2MgPSBhY2MgLSBvYm94LmQgKyAuMTsKCiAgICAgICAgICAgIGlmIChiYm94LnQgIT0gbnVsbCkgewogICAgICAgICAgICAgIGFjYyArPSBiYm94LnQgLSBiYm94Lmg7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG92ZXIuZmlyc3RDaGlsZC5maXJzdENoaWxkLnN0eWxlLm1hcmdpbkJvdHRvbSA9IFBIVE1MLkVtKGFjYyk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHNwYW4uZmlyc3RDaGlsZCkgewogICAgICAgICAgICBzcGFuLmluc2VydEJlZm9yZShvdmVyLCBzcGFuLmZpcnN0Q2hpbGQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc3Bhbi5hcHBlbmRDaGlsZChvdmVyKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmRhdGFbdGhpcy51bmRlcl0pIHsKICAgICAgICAgIHNwYW4ubGFzdENoaWxkLmZpcnN0Q2hpbGQuc3R5bGUubWFyZ2luTGVmdCA9IHVib3gubCA9IHNwYW4ubGFzdENoaWxkLmZpcnN0Q2hpbGQubWFyZ2luUmlnaHQgPSB1Ym94LnIgPSAwOwogICAgICAgICAgdGhpcy5kYXRhW3RoaXMudW5kZXJdLlBIVE1MaGFuZGxlU2NyaXB0bGV2ZWwoc3Bhbi5sYXN0Q2hpbGQpOwogICAgICAgIH0KCiAgICAgICAgQkJPWC53ID0gTWF0aC5tYXgoLjggKiBvYm94LncsIC44ICogdWJveC53LCBiYm94LncpOwogICAgICAgIEJCT1guaCA9IC44ICogKG9ib3guaCArIG9ib3guZCArIChhY2MgfHwgMCkpICsgYmJveC5oOwogICAgICAgIEJCT1guZCA9IGJib3guZCArIC44ICogKHVib3guaCArIHVib3guZCk7CiAgICAgICAgcmV0dXJuIHNwYW47CiAgICAgIH0KICAgIH0pOwogICAgTU1MLm1zdWJzdXAuQXVnbWVudCh7CiAgICAgIHRvUHJldmlld0hUTUw6IGZ1bmN0aW9uIHRvUHJldmlld0hUTUwoc3BhbikgewogICAgICAgIHNwYW4gPSB0aGlzLlBIVE1MZGVmYXVsdFNwYW4oc3BhbiwgewogICAgICAgICAgbm9CQm94OiB0cnVlCiAgICAgICAgfSk7CgogICAgICAgIGlmICghdGhpcy5kYXRhW3RoaXMuYmFzZV0pIHsKICAgICAgICAgIGlmIChzcGFuLmZpcnN0Q2hpbGQpIHsKICAgICAgICAgICAgc3Bhbi5pbnNlcnRCZWZvcmUoSFRNTC5FbGVtZW50KCJzcGFuIiksIHNwYW4uZmlyc3RDaGlsZCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzcGFuLmFwcGVuZENoaWxkKEhUTUwuRWxlbWVudCgic3BhbiIpKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciBiYXNlID0gdGhpcy5kYXRhW3RoaXMuYmFzZV0sCiAgICAgICAgICAgIHN1YiA9IHRoaXMuZGF0YVt0aGlzLnN1Yl0sCiAgICAgICAgICAgIHN1cCA9IHRoaXMuZGF0YVt0aGlzLnN1cF07CiAgICAgICAgaWYgKCFiYXNlKSBiYXNlID0gewogICAgICAgICAgYmJveDogewogICAgICAgICAgICBoOiAuOCwKICAgICAgICAgICAgZDogLjIKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHNwYW4uZmlyc3RDaGlsZC5zdHlsZS5tYXJnaW5SaWdodCA9ICIuMDVlbSI7CiAgICAgICAgdmFyIGggPSBNYXRoLm1heCguNCwgYmFzZS5QSFRNTC5oIC0gLjQpLAogICAgICAgICAgICBkID0gTWF0aC5tYXgoLjIsIGJhc2UuUEhUTUwuZCArIC4xKTsKICAgICAgICB2YXIgYmJveCA9IHRoaXMuUEhUTUw7CgogICAgICAgIGlmIChzdXAgJiYgc3ViKSB7CiAgICAgICAgICB2YXIgYm94ID0gSFRNTC5FbGVtZW50KCJzcGFuIiwgewogICAgICAgICAgICBjbGFzc05hbWU6ICJNSlhwLXNjcmlwdC1ib3giLAogICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgIGhlaWdodDogUEhUTUwuRW0oaCArIHN1cC5QSFRNTC5oICogLjggKyBkICsgc3ViLlBIVE1MLmQgKiAuOCksCiAgICAgICAgICAgICAgInZlcnRpY2FsLWFsaWduIjogUEhUTUwuRW0oLWQgLSBzdWIuUEhUTUwuZCAqIC44KQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBbWyJzcGFuIiwge30sIFtbInNwYW4iLCB7fSwgW1sic3BhbiIsIHsKICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAibWFyZ2luLWJvdHRvbSI6IFBIVE1MLkVtKC0oc3VwLlBIVE1MLmQgLSAuMDUpKQogICAgICAgICAgICB9CiAgICAgICAgICB9XV1dXV0sIFsic3BhbiIsIHt9LCBbWyJzcGFuIiwge30sIFtbInNwYW4iLCB7CiAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgIm1hcmdpbi10b3AiOiBQSFRNTC5FbSgtKHN1cC5QSFRNTC5oIC0gLjA1KSkKICAgICAgICAgICAgfQogICAgICAgICAgfV1dXV1dXSk7CiAgICAgICAgICBzdWIuUEhUTUxoYW5kbGVTY3JpcHRsZXZlbChib3guZmlyc3RDaGlsZCk7CiAgICAgICAgICBzdXAuUEhUTUxoYW5kbGVTY3JpcHRsZXZlbChib3gubGFzdENoaWxkKTsKICAgICAgICAgIGJveC5maXJzdENoaWxkLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZChzcGFuLmxhc3RDaGlsZCk7CiAgICAgICAgICBib3gubGFzdENoaWxkLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZC5hcHBlbmRDaGlsZChzcGFuLmxhc3RDaGlsZCk7CiAgICAgICAgICBzcGFuLmFwcGVuZENoaWxkKGJveCk7CiAgICAgICAgICBiYm94LmggPSBNYXRoLm1heChiYXNlLlBIVE1MLmgsIHN1cC5QSFRNTC5oICogLjggKyBoKTsKICAgICAgICAgIGJib3guZCA9IE1hdGgubWF4KGJhc2UuUEhUTUwuZCwgc3ViLlBIVE1MLmQgKiAuOCArIGQpOwogICAgICAgICAgYmJveC53ID0gYmFzZS5QSFRNTC53ICsgTWF0aC5tYXgoc3VwLlBIVE1MLncsIHN1Yi5QSFRNTC53KSArIC4wNzsKICAgICAgICB9IGVsc2UgaWYgKHN1cCkgewogICAgICAgICAgc3Bhbi5sYXN0Q2hpbGQuc3R5bGUudmVydGljYWxBbGlnbiA9IFBIVE1MLkVtKGgpOwogICAgICAgICAgc3VwLlBIVE1MaGFuZGxlU2NyaXB0bGV2ZWwoc3Bhbi5sYXN0Q2hpbGQpOwogICAgICAgICAgYmJveC5oID0gTWF0aC5tYXgoYmFzZS5QSFRNTC5oLCBzdXAuUEhUTUwuaCAqIC44ICsgaCk7CiAgICAgICAgICBiYm94LmQgPSBNYXRoLm1heChiYXNlLlBIVE1MLmQsIHN1cC5QSFRNTC5kICogLjggLSBoKTsKICAgICAgICAgIGJib3gudyA9IGJhc2UuUEhUTUwudyArIHN1cC5QSFRNTC53ICsgLjA3OwogICAgICAgIH0gZWxzZSBpZiAoc3ViKSB7CiAgICAgICAgICBzcGFuLmxhc3RDaGlsZC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gUEhUTUwuRW0oLWQpOwogICAgICAgICAgc3ViLlBIVE1MaGFuZGxlU2NyaXB0bGV2ZWwoc3Bhbi5sYXN0Q2hpbGQpOwogICAgICAgICAgYmJveC5oID0gTWF0aC5tYXgoYmFzZS5QSFRNTC5oLCBzdWIuUEhUTUwuaCAqIC44IC0gZCk7CiAgICAgICAgICBiYm94LmQgPSBNYXRoLm1heChiYXNlLlBIVE1MLmQsIHN1Yi5QSFRNTC5kICogLjggKyBkKTsKICAgICAgICAgIGJib3gudyA9IGJhc2UuUEhUTUwudyArIHN1Yi5QSFRNTC53ICsgLjA3OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHNwYW47CiAgICAgIH0KICAgIH0pOwogICAgTU1MLm1mcmFjLkF1Z21lbnQoewogICAgICB0b1ByZXZpZXdIVE1MOiBmdW5jdGlvbiB0b1ByZXZpZXdIVE1MKHNwYW4pIHsKICAgICAgICBzcGFuID0gdGhpcy5QSFRNTGRlZmF1bHRTcGFuKHNwYW4sIHsKICAgICAgICAgIGNoaWxkU3BhbnM6IHRydWUsCiAgICAgICAgICBjbGFzc05hbWU6ICJNSlhwLWJveCIsCiAgICAgICAgICBmb3JjZUNoaWxkOiB0cnVlLAogICAgICAgICAgbm9CQm94OiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgdmFyIHZhbHVlcyA9IHRoaXMuZ2V0VmFsdWVzKCJsaW5ldGhpY2tuZXNzIiwgImRpc3BsYXlzdHlsZSIpOwoKICAgICAgICBpZiAoIXZhbHVlcy5kaXNwbGF5c3R5bGUpIHsKICAgICAgICAgIGlmICh0aGlzLmRhdGFbMF0pIHRoaXMuZGF0YVswXS5QSFRNTGhhbmRsZVNjcmlwdGxldmVsKHNwYW4uZmlyc3RDaGlsZCk7CiAgICAgICAgICBpZiAodGhpcy5kYXRhWzFdKSB0aGlzLmRhdGFbMV0uUEhUTUxoYW5kbGVTY3JpcHRsZXZlbChzcGFuLmxhc3RDaGlsZCk7CiAgICAgICAgfQoKICAgICAgICB2YXIgZGVub20gPSBIVE1MLkVsZW1lbnQoInNwYW4iLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJNSlhwLWJveCIKICAgICAgICB9LCBbWyJzcGFuIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiTUpYcC1kZW5vbSIKICAgICAgICB9LCBbLy8gaW5saW5lLXRhYmxlCiAgICAgICAgWyJzcGFuIiwge30sIFtbInNwYW4iLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJNSlhwLXJ1bGUiLAogICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgaGVpZ2h0OiAiMWVtIgogICAgICAgICAgfQogICAgICAgIH1dXV0sIFsic3BhbiJdIC8vIHNwYW5zIGFyZSB0YWJsZS1yb3cKICAgICAgICBdXV0pOwogICAgICAgIGRlbm9tLmZpcnN0Q2hpbGQubGFzdENoaWxkLmFwcGVuZENoaWxkKHNwYW4ubGFzdENoaWxkKTsKICAgICAgICBzcGFuLmFwcGVuZENoaWxkKGRlbm9tKTsKICAgICAgICB2YXIgbmJveCA9IHRoaXMuUEhUTUxiYm94Rm9yKDApLAogICAgICAgICAgICBkYm94ID0gdGhpcy5QSFRNTGJib3hGb3IoMSksCiAgICAgICAgICAgIGJib3ggPSB0aGlzLlBIVE1MOwogICAgICAgIGJib3gudyA9IE1hdGgubWF4KG5ib3gudywgZGJveC53KSAqIC44OwogICAgICAgIGJib3guaCA9IG5ib3guaCArIG5ib3guZCArIC4xICsgLjI1OwogICAgICAgIGJib3guZCA9IGRib3guaCArIGRib3guZCAtIC4yNTsKICAgICAgICBiYm94LmwgPSBiYm94LnIgPSAuMTI1OwogICAgICAgIHZhbHVlcy5saW5ldGhpY2tuZXNzID0gTWF0aC5tYXgoMCwgUEhUTUwubGVuZ3RoMmVtKHZhbHVlcy5saW5ldGhpY2tuZXNzIHx8ICIwIiwgMCkpOwoKICAgICAgICBpZiAodmFsdWVzLmxpbmV0aGlja25lc3MpIHsKICAgICAgICAgIHZhciBydWxlID0gZGVub20uZmlyc3RDaGlsZC5maXJzdENoaWxkLmZpcnN0Q2hpbGQ7CiAgICAgICAgICB2YXIgdCA9IFBIVE1MLkVtKHZhbHVlcy5saW5ldGhpY2tuZXNzKTsKICAgICAgICAgIHJ1bGUuc3R5bGUuYm9yZGVyVG9wID0gIm5vbmUiOwogICAgICAgICAgcnVsZS5zdHlsZS5ib3JkZXJCb3R0b20gPSAodmFsdWVzLmxpbmV0aGlja25lc3MgPCAuMTUgPyAiMXB4IiA6IHQpICsgIiBzb2xpZCI7CiAgICAgICAgICBydWxlLnN0eWxlLm1hcmdpbiA9IHQgKyAiIDAiOwogICAgICAgICAgdCA9IHZhbHVlcy5saW5ldGhpY2tuZXNzOwogICAgICAgICAgZGVub20uc3R5bGUubWFyZ2luVG9wID0gUEhUTUwuRW0oMyAqIHQgLSAxLjIpOwogICAgICAgICAgc3Bhbi5zdHlsZS52ZXJ0aWNhbEFsaWduID0gUEhUTUwuRW0oMS41ICogdCArIC4xKTsKICAgICAgICAgIGJib3guaCArPSAxLjUgKiB0IC0gLjE7CiAgICAgICAgICBiYm94LmQgKz0gMS41ICogdDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGVub20uc3R5bGUubWFyZ2luVG9wID0gIi0uN2VtIjsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzcGFuOwogICAgICB9CiAgICB9KTsKICAgIE1NTC5tc3FydC5BdWdtZW50KHsKICAgICAgdG9QcmV2aWV3SFRNTDogZnVuY3Rpb24gdG9QcmV2aWV3SFRNTChzcGFuKSB7CiAgICAgICAgc3BhbiA9IHRoaXMuUEhUTUxkZWZhdWx0U3BhbihzcGFuLCB7CiAgICAgICAgICBjaGlsZFNwYW5zOiB0cnVlLAogICAgICAgICAgY2xhc3NOYW1lOiAiTUpYcC1ib3giLAogICAgICAgICAgZm9yY2VDaGlsZDogdHJ1ZSwKICAgICAgICAgIG5vQkJveDogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIHRoaXMuUEhUTUxsYXlvdXRSb290KHNwYW4sIHNwYW4uZmlyc3RDaGlsZCk7CiAgICAgICAgcmV0dXJuIHNwYW47CiAgICAgIH0sCiAgICAgIFBIVE1MbGF5b3V0Um9vdDogZnVuY3Rpb24gUEhUTUxsYXlvdXRSb290KHNwYW4sIGJhc2UpIHsKICAgICAgICB2YXIgYmJveCA9IHRoaXMuUEhUTUxiYm94Rm9yKDApOwogICAgICAgIHZhciBzY2FsZSA9IE1hdGguY2VpbCgoYmJveC5oICsgYmJveC5kICsgLjE0KSAqIDEwMCksCiAgICAgICAgICAgIHQgPSBQSFRNTC5FbSgxNCAvIHNjYWxlKTsKICAgICAgICB2YXIgc3VyZCA9IEhUTUwuRWxlbWVudCgic3BhbiIsIHsKICAgICAgICAgIGNsYXNzTmFtZTogIk1KWHAtc3VyZCIKICAgICAgICB9LCBbWyJzcGFuIiwgewogICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgImZvbnQtc2l6ZSI6IHNjYWxlICsgIiUiLAogICAgICAgICAgICAibWFyZ2luLXRvcCI6IHQKICAgICAgICAgIH0KICAgICAgICB9LCBbIlx1MjIxQSJdXV0pOwogICAgICAgIHZhciByb290ID0gSFRNTC5FbGVtZW50KCJzcGFuIiwgewogICAgICAgICAgY2xhc3NOYW1lOiAiTUpYcC1yb290IgogICAgICAgIH0sIFtbInNwYW4iLCB7CiAgICAgICAgICBjbGFzc05hbWU6ICJNSlhwLXJ1bGUiLAogICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgImJvcmRlci10b3AiOiAiLjA4ZW0gc29saWQiCiAgICAgICAgICB9CiAgICAgICAgfV1dKTsKICAgICAgICB2YXIgVyA9IDEuMiAvIDIuMiAqIHNjYWxlIC8gMTAwOyAvLyB3aWR0aC1vZi1zdXJkID0gKGhlaWdodC9ILXRvLVctcmF0aW8pCgogICAgICAgIGlmIChzY2FsZSA+IDE1MCkgewogICAgICAgICAgdmFyIHNYID0gTWF0aC5jZWlsKDE1MCAvIHNjYWxlICogMTApOwogICAgICAgICAgc3VyZC5maXJzdENoaWxkLmNsYXNzTmFtZSA9ICJNSlhwLXJpZ2h0IE1KWHAtc2NhbGUiICsgc1g7CiAgICAgICAgICBzdXJkLmZpcnN0Q2hpbGQuc3R5bGUubWFyZ2luTGVmdCA9IFBIVE1MLkVtKFcgKiAoc1ggLyAxMCAtIDEpIC8gc2NhbGUgKiAxMDApOwogICAgICAgICAgVyA9IFcgKiBzWCAvIDEwOwogICAgICAgICAgcm9vdC5maXJzdENoaWxkLnN0eWxlLmJvcmRlclRvcFdpZHRoID0gUEhUTUwuRW0oLjA4IC8gTWF0aC5zcXJ0KHNYIC8gMTApKTsKICAgICAgICB9CgogICAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoYmFzZSk7CiAgICAgICAgc3Bhbi5hcHBlbmRDaGlsZChzdXJkKTsKICAgICAgICBzcGFuLmFwcGVuZENoaWxkKHJvb3QpOwogICAgICAgIHRoaXMuUEhUTUwuaCA9IGJib3guaCArIC4xODsKICAgICAgICB0aGlzLlBIVE1MLmQgPSBiYm94LmQ7CiAgICAgICAgdGhpcy5QSFRNTC53ID0gYmJveC53ICsgVzsKICAgICAgICByZXR1cm4gc3BhbjsKICAgICAgfQogICAgfSk7CiAgICBNTUwubXJvb3QuQXVnbWVudCh7CiAgICAgIHRvUHJldmlld0hUTUw6IGZ1bmN0aW9uIHRvUHJldmlld0hUTUwoc3BhbikgewogICAgICAgIHNwYW4gPSB0aGlzLlBIVE1MZGVmYXVsdFNwYW4oc3BhbiwgewogICAgICAgICAgY2hpbGRTcGFuczogdHJ1ZSwKICAgICAgICAgIGNsYXNzTmFtZTogIk1KWHAtYm94IiwKICAgICAgICAgIGZvcmNlQ2hpbGQ6IHRydWUsCiAgICAgICAgICBub0JCb3g6IHRydWUKICAgICAgICB9KTsKICAgICAgICB2YXIgcmJveCA9IHRoaXMuUEhUTUxiYm94Rm9yKDEpLAogICAgICAgICAgICByb290ID0gc3Bhbi5yZW1vdmVDaGlsZChzcGFuLmxhc3RDaGlsZCk7CiAgICAgICAgdmFyIHNxcnQgPSB0aGlzLlBIVE1MbGF5b3V0Um9vdChIVE1MLkVsZW1lbnQoInNwYW4iKSwgc3Bhbi5maXJzdENoaWxkKTsKICAgICAgICByb290LmNsYXNzTmFtZSA9ICJNSlhwLXNjcmlwdCI7IC8vICMjIyBGSVhNRTogc2hvdWxkIGJlIHNjcmlwdHNjcmlwdAoKICAgICAgICB2YXIgc2NhbGUgPSBwYXJzZUludChzcXJ0LmZpcnN0Q2hpbGQuZmlyc3RDaGlsZC5zdHlsZS5mb250U2l6ZSk7CiAgICAgICAgdmFyIHYgPSAuNTUgKiAoc2NhbGUgLyAxMjApICsgcmJveC5kICogLjgsCiAgICAgICAgICAgIHIgPSAtLjYgKiAoc2NhbGUgLyAxMjApOwoKICAgICAgICBpZiAoc2NhbGUgPiAxNTApIHsKICAgICAgICAgIHIgKj0gLjk1ICogTWF0aC5jZWlsKDE1MCAvIHNjYWxlICogMTApIC8gMTA7CiAgICAgICAgfQoKICAgICAgICByb290LnN0eWxlLm1hcmdpblJpZ2h0ID0gUEhUTUwuRW0ocik7CiAgICAgICAgcm9vdC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gUEhUTUwuRW0odik7CiAgICAgICAgaWYgKC1yID4gcmJveC53ICogLjgpIHJvb3Quc3R5bGUubWFyZ2luTGVmdCA9IFBIVE1MLkVtKC1yIC0gcmJveC53ICogLjgpOyAvLyAjIyMgZGVwZW5kcyBvbiByYm94LncKCiAgICAgICAgc3Bhbi5hcHBlbmRDaGlsZChyb290KTsKICAgICAgICBzcGFuLmFwcGVuZENoaWxkKHNxcnQpOwogICAgICAgIHRoaXMuUEhUTUwudyArPSBNYXRoLm1heCgwLCByYm94LncgKiAuOCArIHIpOwogICAgICAgIHRoaXMuUEhUTUwuaCA9IE1hdGgubWF4KHRoaXMuUEhUTUwuaCwgcmJveC5oICogLjggKyB2KTsKICAgICAgICByZXR1cm4gc3BhbjsKICAgICAgfSwKICAgICAgUEhUTUxsYXlvdXRSb290OiBNTUwubXNxcnQucHJvdG90eXBlLlBIVE1MbGF5b3V0Um9vdAogICAgfSk7CiAgICBNTUwubWZlbmNlZC5BdWdtZW50KHsKICAgICAgdG9QcmV2aWV3SFRNTDogZnVuY3Rpb24gdG9QcmV2aWV3SFRNTChzcGFuKSB7CiAgICAgICAgc3BhbiA9IHRoaXMuUEhUTUxjcmVhdGVTcGFuKHNwYW4pOwogICAgICAgIHRoaXMuUEhUTUxoYW5kbGVTdHlsZShzcGFuKTsKICAgICAgICB0aGlzLlBIVE1MaGFuZGxlQ29sb3Ioc3Bhbik7IC8vCiAgICAgICAgLy8gIE1ha2Ugcm93IG9mIG9wZW4sIGRhdGEsIHNlcCwgLi4uIGRhdGEsIGNsb3NlCiAgICAgICAgLy8KCiAgICAgICAgdGhpcy5hZGRGYWtlTm9kZXMoKTsKICAgICAgICB0aGlzLlBIVE1MYWRkQ2hpbGQoc3BhbiwgIm9wZW4iLCB7fSk7CgogICAgICAgIGZvciAodmFyIGkgPSAwLCBtID0gdGhpcy5kYXRhLmxlbmd0aDsgaSA8IG07IGkrKykgewogICAgICAgICAgdGhpcy5QSFRNTGFkZENoaWxkKHNwYW4sICJzZXAiICsgaSwge30pOwogICAgICAgICAgdGhpcy5QSFRNTGFkZENoaWxkKHNwYW4sIGksIHt9KTsKICAgICAgICB9CgogICAgICAgIHRoaXMuUEhUTUxhZGRDaGlsZChzcGFuLCAiY2xvc2UiLCB7fSk7IC8vCiAgICAgICAgLy8gIENoZWNrIGZvciBzdHJlY2hpbmcgdGhlIGVsZW1lbnRzCiAgICAgICAgLy8KCiAgICAgICAgdmFyIEggPSB0aGlzLlBIVE1MLmgsCiAgICAgICAgICAgIEQgPSB0aGlzLlBIVE1MLmQ7CiAgICAgICAgdGhpcy5QSFRNTHN0cmV0Y2hDaGlsZCgib3BlbiIsIEgsIEQpOwoKICAgICAgICBmb3IgKGkgPSAwLCBtID0gdGhpcy5kYXRhLmxlbmd0aDsgaSA8IG07IGkrKykgewogICAgICAgICAgdGhpcy5QSFRNTHN0cmV0Y2hDaGlsZCgic2VwIiArIGksIEgsIEQpOwogICAgICAgICAgdGhpcy5QSFRNTHN0cmV0Y2hDaGlsZChpLCBILCBEKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuUEhUTUxzdHJldGNoQ2hpbGQoImNsb3NlIiwgSCwgRCk7CiAgICAgICAgcmV0dXJuIHNwYW47CiAgICAgIH0KICAgIH0pOwogICAgTU1MLm1yb3cuQXVnbWVudCh7CiAgICAgIHRvUHJldmlld0hUTUw6IGZ1bmN0aW9uIHRvUHJldmlld0hUTUwoc3BhbikgewogICAgICAgIHNwYW4gPSB0aGlzLlBIVE1MZGVmYXVsdFNwYW4oc3Bhbik7CiAgICAgICAgdmFyIEggPSB0aGlzLlBIVE1MLmgsCiAgICAgICAgICAgIEQgPSB0aGlzLlBIVE1MLmQ7CgogICAgICAgIGZvciAodmFyIGkgPSAwLCBtID0gdGhpcy5kYXRhLmxlbmd0aDsgaSA8IG07IGkrKykgewogICAgICAgICAgdGhpcy5QSFRNTHN0cmV0Y2hDaGlsZChpLCBILCBEKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzcGFuOwogICAgICB9CiAgICB9KTsKICAgIE1NTC5tc3R5bGUuQXVnbWVudCh7CiAgICAgIHRvUHJldmlld0hUTUw6IGZ1bmN0aW9uIHRvUHJldmlld0hUTUwoc3BhbikgewogICAgICAgIHNwYW4gPSB0aGlzLlBIVE1MZGVmYXVsdFNwYW4oc3Bhbik7CiAgICAgICAgdGhpcy5QSFRNTGhhbmRsZVNjcmlwdGxldmVsKHNwYW4pOwogICAgICAgIHJldHVybiBzcGFuOwogICAgICB9CiAgICB9KTsKICAgIE1NTC5UZVhBdG9tLkF1Z21lbnQoewogICAgICB0b1ByZXZpZXdIVE1MOiBmdW5jdGlvbiB0b1ByZXZpZXdIVE1MKHNwYW4pIHsKICAgICAgICBzcGFuID0gdGhpcy5QSFRNTGRlZmF1bHRTcGFuKHNwYW4pOyAvLyAjIyMgRklYTUU6IGhhbmRsZSBUZVggY2xhc3M/CgogICAgICAgIHNwYW4uY2xhc3NOYW1lID0gIk1KWHAtbXJvdyI7CiAgICAgICAgcmV0dXJuIHNwYW47CiAgICAgIH0KICAgIH0pOwogICAgTU1MLm10YWJsZS5BdWdtZW50KHsKICAgICAgdG9QcmV2aWV3SFRNTDogZnVuY3Rpb24gdG9QcmV2aWV3SFRNTChzcGFuKSB7CiAgICAgICAgc3BhbiA9IHRoaXMuUEhUTUxkZWZhdWx0U3BhbihzcGFuLCB7CiAgICAgICAgICBub0JCb3g6IHRydWUKICAgICAgICB9KTsKICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy5nZXRWYWx1ZXMoImNvbHVtbmFsaWduIiwgInJvd2FsaWduIiwgImNvbHVtbnNwYWNpbmciLCAicm93c3BhY2luZyIsICJjb2x1bW53aWR0aCIsICJlcXVhbGNvbHVtbnMiLCAiZXF1YWxyb3dzIiwgImNvbHVtbmxpbmVzIiwgInJvd2xpbmVzIiwgImZyYW1lIiwgImZyYW1lc3BhY2luZyIsICJhbGlnbiIsICJ3aWR0aCIpOwogICAgICAgIHZhciBTUExJVCA9IE1hdGhKYXguSHViLlNwbGl0TGlzdCwKICAgICAgICAgICAgaSwKICAgICAgICAgICAgbSwKICAgICAgICAgICAgaiwKICAgICAgICAgICAgbjsKICAgICAgICB2YXIgQ1NQQUNFID0gU1BMSVQodmFsdWVzLmNvbHVtbnNwYWNpbmcpLAogICAgICAgICAgICBSU1BBQ0UgPSBTUExJVCh2YWx1ZXMucm93c3BhY2luZyksCiAgICAgICAgICAgIENBTElHTiA9IFNQTElUKHZhbHVlcy5jb2x1bW5hbGlnbiksCiAgICAgICAgICAgIFJBTElHTiA9IFNQTElUKHZhbHVlcy5yb3dhbGlnbik7CgogICAgICAgIGZvciAoaSA9IDAsIG0gPSBDU1BBQ0UubGVuZ3RoOyBpIDwgbTsgaSsrKSB7CiAgICAgICAgICBDU1BBQ0VbaV0gPSBQSFRNTC5sZW5ndGgyZW0oQ1NQQUNFW2ldKTsKICAgICAgICB9CgogICAgICAgIGZvciAoaSA9IDAsIG0gPSBSU1BBQ0UubGVuZ3RoOyBpIDwgbTsgaSsrKSB7CiAgICAgICAgICBSU1BBQ0VbaV0gPSBQSFRNTC5sZW5ndGgyZW0oUlNQQUNFW2ldKTsKICAgICAgICB9CgogICAgICAgIHZhciB0YWJsZSA9IEhUTUwuRWxlbWVudCgic3BhbiIpOwoKICAgICAgICB3aGlsZSAoc3Bhbi5maXJzdENoaWxkKSB7CiAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChzcGFuLmZpcnN0Q2hpbGQpOwogICAgICAgIH0KCiAgICAgICAgc3Bhbi5hcHBlbmRDaGlsZCh0YWJsZSk7CiAgICAgICAgdmFyIEggPSAwLAogICAgICAgICAgICBXID0gMDsKCiAgICAgICAgZm9yIChpID0gMCwgbSA9IHRoaXMuZGF0YS5sZW5ndGg7IGkgPCBtOyBpKyspIHsKICAgICAgICAgIHZhciByb3cgPSB0aGlzLmRhdGFbaV07CgogICAgICAgICAgaWYgKHJvdykgewogICAgICAgICAgICB2YXIgcnNwYWNlID0gUEhUTUwuYXJyYXlFbnRyeShSU1BBQ0UsIGkgLSAxKSwKICAgICAgICAgICAgICAgIHJhbGlnbiA9IFBIVE1MLmFycmF5RW50cnkoUkFMSUdOLCBpKTsKICAgICAgICAgICAgdmFyIHJib3ggPSByb3cuUEhUTUwsCiAgICAgICAgICAgICAgICByc3BhbiA9IHJvdy5QSFRNTHNwYW5FbGVtZW50KCk7CiAgICAgICAgICAgIHJzcGFuLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSByYWxpZ247CiAgICAgICAgICAgIHZhciBrID0gcm93LnR5cGUgPT09ICJtbGFiZWxlZHRyIiA/IDEgOiAwOwoKICAgICAgICAgICAgZm9yIChqID0gMCwgbiA9IHJvdy5kYXRhLmxlbmd0aDsgaiA8IG4gLSBrOyBqKyspIHsKICAgICAgICAgICAgICB2YXIgY2VsbCA9IHJvdy5kYXRhW2ogKyBrXTsKCiAgICAgICAgICAgICAgaWYgKGNlbGwpIHsKICAgICAgICAgICAgICAgIHZhciBjc3BhY2UgPSBQSFRNTC5hcnJheUVudHJ5KENTUEFDRSwgaiAtIDEpLAogICAgICAgICAgICAgICAgICAgIGNhbGlnbiA9IFBIVE1MLmFycmF5RW50cnkoQ0FMSUdOLCBqKTsKICAgICAgICAgICAgICAgIHZhciBjc3BhbiA9IGNlbGwuUEhUTUxzcGFuRWxlbWVudCgpOwoKICAgICAgICAgICAgICAgIGlmIChqKSB7CiAgICAgICAgICAgICAgICAgIHJib3gudyArPSBjc3BhY2U7CiAgICAgICAgICAgICAgICAgIGNzcGFuLnN0eWxlLnBhZGRpbmdMZWZ0ID0gUEhUTUwuRW0oY3NwYWNlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoaSkgY3NwYW4uc3R5bGUucGFkZGluZ1RvcCA9IFBIVE1MLkVtKHJzcGFjZSk7CiAgICAgICAgICAgICAgICBjc3Bhbi5zdHlsZS50ZXh0QWxpZ24gPSBjYWxpZ247CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBIICs9IHJib3guaCArIHJib3guZDsKCiAgICAgICAgICAgIGlmIChpKSB7CiAgICAgICAgICAgICAgSCArPSByc3BhY2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChyYm94LncgPiBXKSBXID0gcmJveC53OwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIGJib3ggPSB0aGlzLlBIVE1MOwogICAgICAgIGJib3gudyA9IFc7CiAgICAgICAgYmJveC5oID0gSCAvIDIgKyAuMjU7CiAgICAgICAgYmJveC5kID0gSCAvIDIgLSAuMjU7CiAgICAgICAgYmJveC5sID0gYmJveC5yID0gLjEyNTsKICAgICAgICByZXR1cm4gc3BhbjsKICAgICAgfQogICAgfSk7CiAgICBNTUwubWxhYmVsZWR0ci5BdWdtZW50KHsKICAgICAgUEhUTUxkZWZhdWx0U3BhbjogZnVuY3Rpb24gUEhUTUxkZWZhdWx0U3BhbihzcGFuLCBvcHRpb25zKSB7CiAgICAgICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307CiAgICAgICAgc3BhbiA9IHRoaXMuUEhUTUxjcmVhdGVTcGFuKHNwYW4pOwogICAgICAgIHRoaXMuUEhUTUxoYW5kbGVTdHlsZShzcGFuKTsKICAgICAgICB0aGlzLlBIVE1MaGFuZGxlQ29sb3Ioc3Bhbik7CiAgICAgICAgaWYgKHRoaXMuaXNUb2tlbikgdGhpcy5QSFRNTGhhbmRsZVRva2VuKHNwYW4pOyAvLyBza2lwIGxhYmVsIGZvciBub3cKCiAgICAgICAgZm9yICh2YXIgaSA9IDEsIG0gPSB0aGlzLmRhdGEubGVuZ3RoOyBpIDwgbTsgaSsrKSB7CiAgICAgICAgICB0aGlzLlBIVE1MYWRkQ2hpbGQoc3BhbiwgaSwgb3B0aW9ucyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc3BhbjsKICAgICAgfQogICAgfSk7CiAgICBNTUwuc2VtYW50aWNzLkF1Z21lbnQoewogICAgICB0b1ByZXZpZXdIVE1MOiBmdW5jdGlvbiB0b1ByZXZpZXdIVE1MKHNwYW4pIHsKICAgICAgICBzcGFuID0gdGhpcy5QSFRNTGNyZWF0ZVNwYW4oc3Bhbik7CgogICAgICAgIGlmICh0aGlzLmRhdGFbMF0pIHsKICAgICAgICAgIHRoaXMuZGF0YVswXS50b1ByZXZpZXdIVE1MKHNwYW4pOwogICAgICAgICAgTWF0aEpheC5IdWIuSW5zZXJ0KHRoaXMuZGF0YVswXS5QSFRNTCB8fCB7fSwgdGhpcy5QSFRNTCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gc3BhbjsKICAgICAgfQogICAgfSk7CiAgICBNTUwuYW5ub3RhdGlvbi5BdWdtZW50KHsKICAgICAgdG9QcmV2aWV3SFRNTDogZnVuY3Rpb24gdG9QcmV2aWV3SFRNTChzcGFuKSB7fQogICAgfSk7CiAgICBNTUxbImFubm90YXRpb24teG1sIl0uQXVnbWVudCh7CiAgICAgIHRvUHJldmlld0hUTUw6IGZ1bmN0aW9uIHRvUHJldmlld0hUTUwoc3Bhbikge30KICAgIH0pOyAvLwogICAgLy8gIExvYWRpbmcgaXNuJ3QgY29tcGxldGUgdW50aWwgdGhlIGVsZW1lbnQgamF4IGlzIG1vZGlmaWVkLAogICAgLy8gIGJ1dCBjYW4ndCBjYWxsIGxvYWRDb21wbGV0ZSB3aXRoaW4gdGhlIGNhbGxiYWNrIGZvciAibW1sIEpheCBSZWFkeSIKICAgIC8vICAoaXQgd291bGQgY2FsbCBQcmV2aWV3SFRNTCdzIFJlcXVpcmUgcm91dGluZSwgYXNraW5nIGZvciB0aGUgbW1sIGpheCBhZ2FpbikKICAgIC8vICBzbyB3YWl0IHVudGlsIGFmdGVyIHRoZSBtbWwgamF4IGhhcyBmaW5pc2hlZCBwcm9jZXNzaW5nLgogICAgLy8gIAogICAgLy8gIFdlIGFsc28gbmVlZCB0byB3YWl0IGZvciB0aGUgb25sb2FkIGhhbmRsZXIgdG8gcnVuLCBzaW5jZSB0aGUgbG9hZENvbXBsZXRlCiAgICAvLyAgd2lsbCBjYWxsIENvbmZpZyBhbmQgU3RhcnR1cCwgd2hpY2ggbmVlZCB0byBtb2RpZnkgdGhlIGJvZHkuCiAgICAvLwoKICAgIE1hdGhKYXguSHViLlJlZ2lzdGVyLlN0YXJ0dXBIb29rKCJvbkxvYWQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIHNldFRpbWVvdXQoTWF0aEpheC5DYWxsYmFjayhbImxvYWRDb21wbGV0ZSIsIFBIVE1MLCAiamF4LmpzIl0pLCAwKTsKICAgIH0pOwogIH0pOwogIE1hdGhKYXguSHViLlJlZ2lzdGVyLlN0YXJ0dXBIb29rKCJFbmQgQ29va2llIiwgZnVuY3Rpb24gKCkgewogICAgaWYgKEhVQi5jb25maWcubWVudVNldHRpbmdzLnpvb20gIT09ICJOb25lIikgewogICAgICBBSkFYLlJlcXVpcmUoIltNYXRoSmF4XS9leHRlbnNpb25zL01hdGhab29tLmpzIik7CiAgICB9CiAgfSk7Cn0pKE1hdGhKYXguQWpheCwgTWF0aEpheC5IdWIsIE1hdGhKYXguSFRNTCwgTWF0aEpheC5PdXRwdXRKYXguUHJldmlld0hUTUwpOw=="},{"version":3,"sources":["/home/hads/Downloads/pycharm-community-2020.1/plugins/python-ce/helpers/MathJax/jax/output/PreviewHTML/jax.js"],"names":["AJAX","HUB","HTML","PHTML","MML","EVENT","TOUCH","HOVER","FONTS","STYLES","color","border","padding","i","scale","BIGDIMEN","V","H","Augment","settings","config","menuSettings","styles","hideProcessedMath","maxStretchyParts","Config","require","SUPER","arguments","call","push","MathJax","OutputJax","extensionDir","Startup","Extension","MathEvents","Event","Touch","Hover","ContextMenu","Mousedown","AltContextMenu","Mouseover","Mouseout","Mousemove","div","addElement","document","body","style","width","pxPerInch","offsetWidth","parentNode","removeChild","Styles","InitializePHTML","preTranslate","state","scripts","jax","id","m","length","script","prev","span","previousSibling","String","className","match","elementJax","display","root","Get","Element","inputID","isMathJax","jaxID","oncontextmenu","Menu","onmousedown","onmouseover","onmouseout","onmousemove","onclick","Click","ondblclick","DblClick","onkeydown","Keydown","tabIndex","getTabOrder","Browser","noContextMenu","ontouchstart","start","ontouchend","end","appendChild","insertBefore","Translate","math","getElementById","initPHTML","toPreviewHTML","err","restart","firstChild","split","preview","postTranslate","data","innerHTML","getJaxFromMath","nextSibling","nodeName","toLowerCase","getJaxFor","getHoverSpan","PHTMLspanElement","getHoverBBox","bbox","em","outerEm","BBOX","w","h","d","Zoom","Mw","Mh","idPostfix","toPHTML","position","zW","zH","offsetHeight","mH","mW","Y","getBBox","Remove","ID","GetID","VARIANT","MATHSPACE","veryverythinmathspace","verythinmathspace","thinmathspace","mediummathspace","thickmathspace","verythickmathspace","veryverythickmathspace","negativeveryverythinmathspace","negativeverythinmathspace","negativethinmathspace","negativemediummathspace","negativethickmathspace","negativeverythickmathspace","negativeveryverythickmathspace","thin","medium","thick","infinity","TeX","x_height","DELIMITERS","dir","REMAPACCENT","REMAPACCENTUNDER","length2em","size","toString","SIZE","NORMAL","BIG","SMALL","parseFloat","unit","Em","Math","abs","toFixed","replace","arrayEntry","a","max","min","Hub","Register","StartupHook","ElementJax","mml","mbase","options","PHTMLdefaultSpan","PHTMLcreateSpan","PHTMLhandleStyle","PHTMLhandleColor","isToken","PHTMLhandleToken","PHTMLaddChild","child","childSpans","noBBox","l","r","t","b","forceChild","PHTMLstretchChild","D","PHTMLcanStretch","dbox","PHTMLstretchV","inferred","type","join","lastIsInt","PHTMLspanID","values","getValues","mathvariant","cssText","mathcolor","mathbackground","backgroundColor","PHTMLhandleScriptlevel","level","PHTMLhandleText","text","c","n","W","charCodeAt","charAt","CHML","addText","PHTMLbboxFor","direction","isEmbellished","core","Core","PHTMLstretchH","CoreParent","parent","CoreMO","isa","Parent","CoreText","mrow","TeXAtom","mstyle","mphantom","chars","entity","mo","PHTMLadjustAccent","scriptlevel","lspace","rspace","marginLeft","marginRight","displaystyle","largeop","box","munderover","base","over","under","C","acc","vec","stretch","substr","symmetric","maxsize","minsize","sX","ceil","verticalAlign","mspace","height","depth","mpadded","dimen","PHTMLdimen","T","B","L","len","R","pm","voffset","marginTop","marginBottom","movablelimits","msubsup","prototype","obox","ubox","lastChild","childNodes","fontSize","sub","sup","mfrac","denom","nbox","linethickness","rule","borderTop","borderBottom","margin","msqrt","PHTMLlayoutRoot","surd","borderTopWidth","sqrt","mroot","rbox","parseInt","v","mfenced","addFakeNodes","mtable","SPLIT","SplitList","j","CSPACE","columnspacing","RSPACE","rowspacing","CALIGN","columnalign","RALIGN","rowalign","table","row","ralign","rspan","k","cell","cspace","calign","cspan","paddingLeft","paddingTop","textAlign","mlabeledtr","semantics","Insert","annotation","setTimeout","Callback","zoom","Require","Ajax","PreviewHTML"],"mappings":"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","sourcesContent":["/* -*- Mode: Javascript; indent-tabs-mode:nil; js-indent-level: 2 -*- */\n/* vim: set ts=2 et sw=2 tw=80: */\n\n/*************************************************************\n *\n *  MathJax/jax/output/PreviewHTML/jax.js\n *\n *  Implements the PreviewHTML OutputJax that displays mathematics\n *  using HTML to position the characters from math fonts\n *  in their proper locations.\n *  \n *  ---------------------------------------------------------------------\n *  \n *  Copyright (c) 2013-2015 The MathJax Consortium\n * \n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n * \n *      http://www.apache.org/licenses/LICENSE-2.0\n * \n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n\n(function (AJAX,HUB,HTML,PHTML) {\n  var MML;\n\n  var EVENT, TOUCH, HOVER; // filled in later\n\n  var FONTS = \"'Times New Roman',Times,STIXGeneral,serif\";\n  var STYLES = {\n    \".MJXp-script\": {\"font-size\":\".8em\"},\n\n    \".MJXp-right\": {\n      \"-webkit-transform-origin\":\"right\",\n      \"-moz-transform-origin\":\"right\",\n      \"-ms-transform-origin\":\"right\",\n      \"-o-transform-origin\":\"right\",\n      \"transform-origin\":\"right\"\n    },\n\n    \".MJXp-bold\": {\"font-weight\":\"bold\"},\n    \".MJXp-italic\": {\"font-style\":\"italic\"},\n    \".MJXp-scr\": {\"font-family\":\"MathJax_Script,\"+FONTS},\n    \".MJXp-frak\": {\"font-family\":\"MathJax_Fraktur,\"+FONTS},\n    \".MJXp-sf\": {\"font-family\":\"MathJax_SansSerif,\"+FONTS},\n    \".MJXp-cal\": {\"font-family\":\"MathJax_Caligraphic,\"+FONTS},\n    \".MJXp-mono\": {\"font-family\":\"MathJax_Typewriter,\"+FONTS},\n    \".MJXp-largeop\": {\"font-size\":\"150%\"},\n    \".MJXp-largeop.MJXp-int\": {\"vertical-align\":\"-.2em\"},\n\n    \".MJXp-math\": {\n      \"display\": \"inline-block\",\n      \"line-height\": \"1.2\",\n      \"text-indent\": \"0\",\n      \"font-family\": FONTS,\n      \"white-space\":\"nowrap\",\n      \"border-collapse\":\"collapse\"\n    },\n    \".MJXp-display\": {\n      \"display\": \"block\",\n      \"text-align\": \"center\",\n      \"margin\": \"1em 0\"\n    },\n    \".MJXp-math span\": {\"display\": \"inline-block\"},\n    \".MJXp-box\":  {\"display\":\"block!important\", \"text-align\": \"center\"},\n    \".MJXp-box:after\": {\"content\": '\" \"'},  // needed for when there is no DOCTYPE\n    \".MJXp-rule\": {\"display\":\"block!important\", \"margin-top\":\".1em\"},\n    \".MJXp-char\": {\"display\":\"block!important\"},\n\n    \".MJXp-mo\": {\"margin\": \"0 .15em\"},\n\n    \".MJXp-mfrac\": {\"margin\": \"0 .125em\", \"vertical-align\":\".25em\"},\n    \".MJXp-denom\": {\"display\": \"inline-table!important\", \"width\":\"100%\"},\n    \".MJXp-denom > *\": {\"display\": \"table-row!important\"},\n\n    \".MJXp-surd\": {\"vertical-align\":\"top\"},\n    \".MJXp-surd > *\": {\"display\":\"block!important\"},\n\n    \".MJXp-script-box > * \": {\"display\":\"table!important\", \"height\":\"50%\"},\n    \".MJXp-script-box > * > *\": {\"display\":\"table-cell!important\",\"vertical-align\":\"top\"},\n    \".MJXp-script-box > *:last-child > *\": {\"vertical-align\":\"bottom\"},\n    \".MJXp-script-box > * > * > *\": {\"display\":\"block!important\"},\n\n    \".MJXp-mphantom\": {\"visibility\": \"hidden\"},\n\n    \".MJXp-munderover\": {\"display\":\"inline-table!important\"},\n    \".MJXp-over\": {\"display\":\"inline-block!important\",\"text-align\":\"center\"},\n    \".MJXp-over > *\": {\"display\":\"block!important\"},\n    \".MJXp-munderover > *\": {\"display\":\"table-row!important\"},\n\n    \".MJXp-mtable\": {\"vertical-align\":\".25em\", \"margin\":\"0 .125em\"},\n    \".MJXp-mtable > *\": {\"display\":\"inline-table!important\", \"vertical-align\":\"middle\"},\n    \".MJXp-mtr\": {\"display\":\"table-row!important\"},\n    \".MJXp-mtd\": {\"display\":\"table-cell!important\",\"text-align\":\"center\",\"padding\":\".5em 0 0 .5em\"},\n    \".MJXp-mtr > .MJXp-mtd:first-child\": {\"padding-left\":0},\n    \".MJXp-mtr:first-child > .MJXp-mtd\": {\"padding-top\":0},\n    \".MJXp-mlabeledtr\": {\"display\":\"table-row!important\"},\n    \".MJXp-mlabeledtr > .MJXp-mtd:first-child\": {\"padding-left\":0},\n    \".MJXp-mlabeledtr:first-child > .MJXp-mtd\": {\"padding-top\":0},\n    \n    \".MJXp-merror\": {\n      \"background-color\": \"#FFFF88\",\n      color:   \"#CC0000\",\n      border:  \"1px solid #CC0000\",\n      padding: \"1px 3px\",\n      \"font-style\": \"normal\",\n      \"font-size\":  \"90%\"\n    }\n  };\n  \n  (function () {\n    for (var i = 0; i < 10; i++) {\n      var scale = \"scaleX(.\"+i+\")\";\n      STYLES[\".MJXp-scale\"+i] = {\n        \"-webkit-transform\":scale,\n        \"-moz-transform\":scale,\n        \"-ms-transform\":scale,\n        \"-o-transform\":scale,\n        \"transform\":scale\n      }\n    }\n  })();\n  \n  var BIGDIMEN = 1000000;\n  var V = \"V\", H = \"H\";\n\n  PHTML.Augment({\n    settings: HUB.config.menuSettings,\n    config: {styles: STYLES},\n\n    hideProcessedMath: false,           // use display:none until all math is processed\n\n    maxStretchyParts: 1000,            // limit the number of parts allowed for\n                                       // stretchy operators. See issue 366.\n\n    Config: function () {\n      if (!this.require) {this.require = []}\n      this.SUPER(arguments).Config.call(this); var settings = this.settings;\n      if (settings.scale) {this.config.scale = settings.scale}\n      this.require.push(MathJax.OutputJax.extensionDir+\"/MathEvents.js\");\n    },\n\n    Startup: function () {\n      //\n      //  Set up event handling\n      //\n      EVENT = MathJax.Extension.MathEvents.Event;\n      TOUCH = MathJax.Extension.MathEvents.Touch;\n      HOVER = MathJax.Extension.MathEvents.Hover;\n      this.ContextMenu = EVENT.ContextMenu;\n      this.Mousedown   = EVENT.AltContextMenu;\n      this.Mouseover   = HOVER.Mouseover;\n      this.Mouseout    = HOVER.Mouseout;\n      this.Mousemove   = HOVER.Mousemove;\n\n      //\n      //  Determine pixels per inch\n      //\n      var div = HTML.addElement(document.body,\"div\",{style:{width:\"5in\"}});\n      this.pxPerInch = div.offsetWidth/5; div.parentNode.removeChild(div);\n\n      //\n      //  Set up styles and preload web fonts\n      //\n      return AJAX.Styles(this.config.styles,[\"InitializePHTML\",this]);\n    },\n    InitializePHTML: function () {\n    },\n    \n    preTranslate: function (state) {\n      var scripts = state.jax[this.id], i, m = scripts.length,\n          script, prev, span, div, jax;\n      //\n      //  Loop through the scripts\n      //\n      for (i = 0; i < m; i++) {\n        script = scripts[i]; if (!script.parentNode) continue;\n        //\n        //  Remove any existing output\n        //\n        prev = script.previousSibling;\n        if (prev && String(prev.className).match(/^MathJax_PHTML(_Display)?( MathJax_Processing)?$/))\n          {prev.parentNode.removeChild(prev)}\n        //\n        //  Add the span, and a div if in display mode,\n        //  then set the role and mark it as being processed\n        //\n        jax = script.MathJax.elementJax; if (!jax) continue;\n        jax.PHTML = {display: (jax.root.Get(\"display\") === \"block\")}\n        span = div = HTML.Element(\"span\",{\n\t  className:\"MathJax_PHTML\", id:jax.inputID+\"-Frame\", isMathJax:true, jaxID:this.id,\n          oncontextmenu:EVENT.Menu, onmousedown: EVENT.Mousedown,\n          onmouseover:EVENT.Mouseover, onmouseout:EVENT.Mouseout, onmousemove:EVENT.Mousemove,\n\t  onclick:EVENT.Click, ondblclick:EVENT.DblClick,\n          // Added for keyboard accessible menu.\n          onkeydown: EVENT.Keydown, tabIndex: HUB.getTabOrder(jax)\n        });\n\tif (HUB.Browser.noContextMenu) {\n\t  span.ontouchstart = TOUCH.start;\n\t  span.ontouchend = TOUCH.end;\n\t}\n        if (jax.PHTML.display) {\n          div = HTML.Element(\"div\",{className:\"MathJax_PHTML_Display\"});\n          div.appendChild(span);\n        }\n        //\n        div.className += \" MathJax_Processing\";\n        script.parentNode.insertBefore(div,script);\n      }\n    },\n\n    Translate: function (script,state) {\n      if (!script.parentNode) return;\n\n      //\n      //  Get the data about the math\n      //\n      var jax = script.MathJax.elementJax, math = jax.root,\n          span = document.getElementById(jax.inputID+\"-Frame\"),\n          div = (jax.PHTML.display ? span.parentNode : span);\n      //\n      //  Typeset the math\n      //\n      this.initPHTML(math,span);\n//      math.setTeXclass();\n      try {math.toPreviewHTML(span)} catch (err) {\n        if (err.restart) {while (span.firstChild) {span.removeChild(span.firstChild)}}\n        throw err;\n      }\n      //\n      //  Put it in place, and remove the processing marker\n      //\n      div.className = div.className.split(/ /)[0];\n      //\n      //  Check if we are hiding the math until more is processed\n      //\n      if (this.hideProcessedMath) {\n        //\n        //  Hide the math and don't let its preview be removed\n        //\n        div.className += \" MathJax_Processed\";\n        if (script.MathJax.preview) {\n          jax.PHTML.preview = script.MathJax.preview;\n          delete script.MathJax.preview;\n        }\n      }\n    },\n\n    postTranslate: function (state) {\n      var scripts = state.jax[this.id];\n      if (!this.hideProcessedMath) return;\n      for (var i = 0, m = scripts.length; i < m; i++) {\n        var script = scripts[i];\n        if (script && script.MathJax.elementJax) {\n          //\n          //  Remove the processed marker\n          //\n          script.previousSibling.className = script.previousSibling.className.split(/ /)[0];\n          var data = script.MathJax.elementJax.PHTML;\n          //\n          //  Remove the preview, if any\n          //\n          if (data.preview) {\n            data.preview.innerHTML = \"\";\n            script.MathJax.preview = data.preview;\n            delete data.preview;\n          }\n        }\n      }\n    },\n\n    getJaxFromMath: function (math) {\n      if (math.parentNode.className === \"MathJax_PHTML_Display\") {math = math.parentNode}\n      do {math = math.nextSibling} while (math && math.nodeName.toLowerCase() !== \"script\");\n      return HUB.getJaxFor(math);\n    },\n    getHoverSpan: function (jax,math) {return jax.root.PHTMLspanElement()},\n    getHoverBBox: function (jax,span,math) {\n      var bbox = jax.root.PHTML, em = jax.PHTML.outerEm;\n      var BBOX = {w:bbox.w*em, h:bbox.h*em, d:bbox.d*em};\n      if (bbox.width) {BBOX.width = bbox.width}\n      return BBOX;\n    },\n    \n    Zoom: function (jax,span,math,Mw,Mh) {\n      //\n      //  Re-render at larger size\n      //\n      span.className = \"MathJax\";\n      this.idPostfix = \"-zoom\"; jax.root.toPHTML(span,span); this.idPostfix = \"\";\n      //\n      //  Get height and width of zoomed math and original math\n      //\n      span.style.position = \"absolute\";\n      if (!width) {math.style.position = \"absolute\"}\n      var zW = span.offsetWidth, zH = span.offsetHeight,\n          mH = math.offsetHeight, mW = math.offsetWidth;\n      if (mW === 0) {mW = math.parentNode.offsetWidth}; // IE7 gets mW == 0?\n      span.style.position = math.style.position = \"\";\n      //\n      return {Y:-EVENT.getBBox(span).h, mW:mW, mH:mH, zW:zW, zH:zH};\n    },\n\n    initPHTML: function (math,span) {},\n\n    Remove: function (jax) {\n      var span = document.getElementById(jax.inputID+\"-Frame\");\n      if (span) {\n        if (jax.PHTML.display) {span = span.parentNode}\n        span.parentNode.removeChild(span);\n      }\n      delete jax.PHTML;\n    },\n    \n    ID: 0, idPostfix: \"\",\n    GetID: function () {this.ID++; return this.ID},\n\n    VARIANT: {\n      \"bold\": \"MJXp-bold\",\n      \"italic\": \"MJXp-italic\",\n      \"bold-italic\": \"MJXp-bold MJXp-italic\",\n      \"script\": \"MJXp-scr\",\n      \"bold-script\": \"MJXp-scr MJXp-bold\",\n      \"fraktur\": \"MJXp-frak\",\n      \"bold-fraktur\": \"MJXp-frak MJXp-bold\",\n      \"monospace\": \"MJXp-mono\",\n      \"sans-serif\": \"MJXp-sf\",\n      \"-tex-caligraphic\": \"MJXp-cal\"\n    },\n    MATHSPACE: {\n      veryverythinmathspace:  1/18,\n      verythinmathspace:      2/18,\n      thinmathspace:          3/18,\n      mediummathspace:        4/18,\n      thickmathspace:         5/18,\n      verythickmathspace:     6/18,\n      veryverythickmathspace: 7/18,\n      negativeveryverythinmathspace:  -1/18,\n      negativeverythinmathspace:      -2/18,\n      negativethinmathspace:          -3/18,\n      negativemediummathspace:        -4/18,\n      negativethickmathspace:         -5/18,\n      negativeverythickmathspace:     -6/18,\n      negativeveryverythickmathspace: -7/18,\n\n      thin: .08,\n      medium: .1,\n      thick: .15,\n\n      infinity: BIGDIMEN\n    },\n    TeX: {\n      x_height:         .430554\n    },\n    pxPerInch: 72,\n    em: 16,\n\n    // ### FIXME:  add more here\n\n    DELIMITERS: {\n      \"(\": {dir:V},\n      \"{\": {dir:V, w:.58},\n      \"[\": {dir:V},\n      \"|\": {dir:V, w:.275},\n      \")\": {dir:V},\n      \"}\": {dir:V, w:.58},\n      \"]\": {dir:V},\n      \"/\": {dir:V},\n      \"\\\\\": {dir:V},\n      \"\\u2223\": {dir:V, w:.275},\n      \"\\u2225\": {dir:V, w:.55},\n      \"\\u230A\": {dir:V, w:.5},\n      \"\\u230B\": {dir:V, w:.5},\n      \"\\u2308\": {dir:V, w:.5},\n      \"\\u2309\": {dir:V, w:.5},\n      \"\\u27E8\": {dir:V, w:.5},\n      \"\\u27E9\": {dir:V, w:.5},\n      \"\\u2191\": {dir:V, w:.65},\n      \"\\u2193\": {dir:V, w:.65},\n      \"\\u21D1\": {dir:V, w:.75},\n      \"\\u21D3\": {dir:V, w:.75},\n      \"\\u2195\": {dir:V, w:.65},\n      \"\\u21D5\": {dir:V, w:.75},\n      \"\\u27EE\": {dir:V, w:.275},\n      \"\\u27EF\": {dir:V, w:.275},\n      \"\\u23B0\": {dir:V, w:.6},\n      \"\\u23B1\": {dir:V, w:.6}\n    },\n\n    REMAPACCENT: {\n      \"\\u20D7\":\"\\u2192\",  // vector arrow\n      \"'\": \"\\u02CB\",\n      \"`\": \"\\u02CA\",\n      \".\": \"\\u02D9\",\n      \"^\": \"\\u02C6\",\n      \"-\": \"\\u02C9\",\n      \"~\": \"\\u02DC\",\n      \"\\u00AF\": \"\\u02C9\",  // macron\n      \"\\u00B0\": \"\\u02DA\",  // degree sign\n      \"\\u00B4\": \"\\u02CA\",  // acute accent\n      \"\\u0300\": \"\\u02CB\",  // combining grave\n      \"\\u0301\": \"\\u02CA\",  // combining acute\n      \"\\u0302\": \"\\u02C6\",  // combining circumflex\n      \"\\u0303\": \"\\u02DC\",  // combinig tilde\n      \"\\u0304\": \"\\u02C9\",  // combining macron\n      \"\\u0305\": \"\\u02C9\",  // combining overline\n      \"\\u0306\": \"\\u02D8\",  // combining breve \n      \"\\u0307\": \"\\u02D9\",  // combining dot\n      \"\\u0308\": \"\\u00A8\",  // combining double dot\n      \"\\u030C\": \"\\u02C7\"   // combining caron\n    },\n    REMAPACCENTUNDER: {\n    },\n    \n    length2em: function (length,size) {\n      if (typeof(length) !== \"string\") {length = length.toString()}\n      if (length === \"\") {return \"\"}\n      if (length === MML.SIZE.NORMAL) {return 1}\n      if (length === MML.SIZE.BIG)    {return 2}\n      if (length === MML.SIZE.SMALL)  {return .71}\n      if (this.MATHSPACE[length])     {return this.MATHSPACE[length]}\n      var match = length.match(/^\\s*([-+]?(?:\\.\\d+|\\d+(?:\\.\\d*)?))?(pt|em|ex|mu|px|pc|in|mm|cm|%)?/);\n      var m = parseFloat(match[1]||\"1\"), unit = match[2];\n      if (size == null) {size = 1}\n      if (unit === \"em\") {return m}\n      if (unit === \"ex\") {return m * this.TeX.x_height}\n      if (unit === \"%\")  {return m / 100 * size}\n      if (unit === \"px\") {return m / this.em}\n      if (unit === \"pt\") {return m / 10}                      // 10 pt to an em\n      if (unit === \"pc\") {return m * 1.2}                     // 12 pt to a pc\n      if (unit === \"in\") {return m * this.pxPerInch / this.em}\n      if (unit === \"cm\") {return m * this.pxPerInch / this.em / 2.54}  // 2.54 cm to an inch\n      if (unit === \"mm\") {return m * this.pxPerInch / this.em / 25.4}  // 10 mm to a cm\n      if (unit === \"mu\") {return m / 18}                     // 18mu to an em for the scriptlevel\n      return m*size;  // relative to given size (or 1em as default)\n    },\n\n    Em: function (m) {\n      if (Math.abs(m) < .001) return \"0em\";\n      return (m.toFixed(3).replace(/\\.?0+$/,\"\"))+\"em\";\n    },\n\n    arrayEntry: function (a,i) {return a[Math.max(0,Math.min(i,a.length-1))]}\n\n  });\n\n  MathJax.Hub.Register.StartupHook(\"mml Jax Ready\",function () {\n    MML = MathJax.ElementJax.mml;\n\n    MML.mbase.Augment({\n      toPreviewHTML: function (span,options) {\n        return this.PHTMLdefaultSpan(span,options);\n      },\n\n      PHTMLdefaultSpan: function (span,options) {\n        if (!options) options = {};\n        span = this.PHTMLcreateSpan(span);\n        this.PHTMLhandleStyle(span);\n        this.PHTMLhandleColor(span);\n        if (this.isToken) this.PHTMLhandleToken(span);\n        for (var i = 0, m = this.data.length; i < m; i++) this.PHTMLaddChild(span,i,options);\n        return span;\n      },\n      PHTMLaddChild: function (span,i,options) {\n        var child = this.data[i];\n        if (child) {\n          if (options.childSpans)\n            span = HTML.addElement(span,\"span\",{className:options.className});\n          child.toPreviewHTML(span);\n          if (!options.noBBox) {\n            this.PHTML.w += child.PHTML.w + child.PHTML.l + child.PHTML.r;\n            if (child.PHTML.h > this.PHTML.h) this.PHTML.h = child.PHTML.h;\n            if (child.PHTML.d > this.PHTML.d) this.PHTML.d = child.PHTML.d;\n            if (child.PHTML.t > this.PHTML.t) this.PHTML.t = child.PHTML.t;\n            if (child.PHTML.b > this.PHTML.b) this.PHTML.b = child.PHTML.b;\n          }\n        } else if (options.forceChild) {HTML.addElement(span,\"span\")}\n      },\n      PHTMLstretchChild: function (i,H,D) {\n        var data = this.data[i];\n        if (data && data.PHTMLcanStretch(\"Vertical\",H,D)) {\n          var bbox = this.PHTML, dbox = data.PHTML, w = dbox.w;\n          data.PHTMLstretchV(H,D);\n          bbox.w += dbox.w - w;\n          if (dbox.h > bbox.h) bbox.h = dbox.h;\n          if (dbox.d > bbox.d) bbox.d = dbox.d;\n        }\n      },\n\n      PHTMLcreateSpan: function (span) {\n        if (!this.PHTML) this.PHTML = {};\n        this.PHTML = {w:0, h:0, d:0, l:0, r:0, t:0, b:0};\n        if (this.inferred) return span;\n        //  ### FIXME:  This is a hack to handle the different spacing of the\n        //  ### integral sign in Times compared to CM fonts\n        if (this.type === \"mo\" && this.data.join(\"\") === \"\\u222B\") {PHTML.lastIsInt = true}\n        else if (this.type !== \"mspace\" || this.width !== \"negativethinmathspace\") {PHTML.lastIsInt = false}\n        //  ###\n        if (!this.PHTMLspanID) {this.PHTMLspanID = PHTML.GetID()};\n        var id = (this.id || \"MJXp-Span-\"+this.PHTMLspanID);\n        return HTML.addElement(span,\"span\",{className:\"MJXp-\"+this.type, id:id});\n      },\n      PHTMLspanElement: function () {\n        if (!this.PHTMLspanID) {return null}\n        return document.getElementById(this.id||\"MJXp-Span-\"+this.PHTMLspanID);\n      },\n\n      PHTMLhandleToken: function (span) {\n        var values = this.getValues(\"mathvariant\");\n        if (values.mathvariant !== MML.VARIANT.NORMAL) {\n          span.className += \" \"+PHTML.VARIANT[values.mathvariant];\n        }\n      },\n\n      PHTMLhandleStyle: function (span) {\n        if (this.style) span.style.cssText = this.style;\n      },\n\n      PHTMLhandleColor: function (span) {\n        if (this.mathcolor) {span.style.color = this.mathcolor}\n        if (this.mathbackground) {span.style.backgroundColor = this.mathbackground}\n      },\n\n      PHTMLhandleScriptlevel: function (span) {\n        // ### FIXME:  Need to prevent getting too small\n        // ### and should keep track of scaling so it can be compensated for\n        var level = this.Get(\"scriptlevel\");\n        if (level) span.className += \" MJXp-script\";\n      },\n\n      PHTMLhandleText: function (span,text) {\n        var c, n;\n        var H = 0, D = 0, W = 0;\n        for (var i = 0, m = text.length; i < m; i++) {\n          n = text.charCodeAt(i); c = text.charAt(i);\n          if (n >= 0xD800 && n < 0xDBFF) {\n            i++; n = (((n-0xD800)<<10)+(text.charCodeAt(i)-0xDC00))+0x10000;\n          }\n          var h = .7, d = .22, w = .5;\n          if (n < 127) {\n            if (c.match(/[A-Za-ehik-or-xz0-9]/)) d = 0;\n            if (c.match(/[A-HK-Z]/)) {w = .67} else if (c.match(/[IJ]/)) {w = .36}\n            if (c.match(/[acegm-su-z]/)) {h = .45} else if (c.match(/[ij]/)) {h = .75}\n            if (c.match(/[ijlt]/)) w = .28;\n          }\n          if (PHTML.DELIMITERS[c]) {w = PHTML.DELIMITERS[c].w || .4}\n          // ### FIXME:  handle Greek\n          // ### Combining diacriticals (all sets), spacing modifiers\n          // ### arrows (all sets), widths of braces\n          if (h > H) H = h; if (d > D) D = d; W += w;\n        }\n        if (!this.CHML) this.PHTML = {};\n        this.PHTML = {h:.9, d:.3, w:W, l:0, r:0, t:H, b:D};\n        HTML.addText(span,text);\n      },\n\n      PHTMLbboxFor: function (n) {\n        if (this.data[n] && this.data[n].PHTML) return this.data[n].PHTML;\n        return {w:0, h:0, d:0, l:0, r:0, t:0, b:0};\n      },\n\n      PHTMLcanStretch: function (direction,H,D) {\n        if (this.isEmbellished()) {\n          var core = this.Core();\n          if (core && core !== this) {return core.PHTMLcanStretch(direction,H,D)}\n        }\n        return false;\n      },\n      PHTMLstretchV: function (h,d) {},\n      PHTMLstretchH: function (w) {},\n\n      CoreParent: function () {\n        var parent = this;\n        while (parent && parent.isEmbellished() &&\n               parent.CoreMO() === this && !parent.isa(MML.math)) {parent = parent.Parent()}\n        return parent;\n      },\n      CoreText: function (parent) {\n        if (!parent) {return \"\"}\n        if (parent.isEmbellished()) {return parent.CoreMO().data.join(\"\")}\n        while ((parent.isa(MML.mrow) || parent.isa(MML.TeXAtom) ||\n                parent.isa(MML.mstyle) || parent.isa(MML.mphantom)) &&\n                parent.data.length === 1 && parent.data[0]) {parent = parent.data[0]}\n        if (!parent.isToken) {return \"\"} else {return parent.data.join(\"\")}\n      }\n\n    });\n\n    MML.chars.Augment({\n      toPreviewHTML: function (span) {\n        var text = this.toString().replace(/[\\u2061-\\u2064]/g,\"\");\n        this.PHTMLhandleText(span,text);\n      }\n    });\n    MML.entity.Augment({\n      toPreviewHTML: function (span) {\n        var text = this.toString().replace(/[\\u2061-\\u2064]/g,\"\");\n        this.PHTMLhandleText(span,text);\n      }\n    });\n\n    MML.math.Augment({\n      toPreviewHTML: function (span) {\n        span = this.PHTMLdefaultSpan(span);\n        if (this.Get(\"display\") === \"block\") {span.className += \" MJXp-display\"}\n        return span;\n      }\n    });\n\n    MML.mo.Augment({\n      toPreviewHTML: function (span) {\n        span = this.PHTMLdefaultSpan(span);\n        this.PHTMLadjustAccent(span);\n        var values = this.getValues(\"lspace\",\"rspace\",\"scriptlevel\",\"displaystyle\",\"largeop\");\n        if (values.scriptlevel === 0) {\n          this.PHTML.l = PHTML.length2em(values.lspace);\n          this.PHTML.r = PHTML.length2em(values.rspace);\n          span.style.marginLeft = PHTML.Em(this.PHTML.l);\n          span.style.marginRight = PHTML.Em(this.PHTML.r);\n        } else {\n          this.PHTML.l = .15;\n          this.PHTML.r = .1;\n        }\n        if (values.displaystyle && values.largeop) {\n          var box = HTML.Element(\"span\",{className:\"MJXp-largeop\"});\n          box.appendChild(span.firstChild); span.appendChild(box);\n          this.PHTML.h *= 1.2; this.PHTML.d *= 1.2;\n          if (this.data.join(\"\") === \"\\u222B\") box.className += \" MJXp-int\";\n        }\n        // ### FIXME:  Handle embellished op spacing\n        // ### FIXME:  Remap minus signs\n        return span;\n      },\n      PHTMLadjustAccent: function (span) {\n        var parent = this.CoreParent();\n        if (parent && parent.isa(MML.munderover) && \n            this.CoreText(parent.data[parent.base]).length === 1) {\n          var over = parent.data[parent.over], under = parent.data[parent.under];\n          var c = this.data.join(\"\"), C;\n          if (over && this === over.CoreMO() && parent.Get(\"accent\")) {C = PHTML.REMAPACCENT[c]}\n          else if (under && this === under.CoreMO() && parent.Get(\"accentunder\")) {C = PHTML.REMAPACCENTUNDER[c]}\n          if (C) c = span.innerHTML = C;\n          if (c.match(/[\\u02C6-\\u02DC\\u00A8]/)) {this.PHTML.acc = -.52}\n          else if (c === \"\\u2192\") {this.PHTML.acc = -.15; this.PHTML.vec = true}\n        }\n      },\n      PHTMLcanStretch: function (direction,H,D) {\n        if (!this.Get(\"stretchy\")) {return false}\n        var c = this.data.join(\"\");\n        if (c.length > 1) {return false}\n        c = PHTML.DELIMITERS[c];\n        var stretch = (c && c.dir === direction.substr(0,1));\n        if (stretch) {\n          stretch = (this.PHTML.h !== H || this.PHTML.d !== D ||\n            (this.Get(\"minsize\",true) || this.Get(\"maxsize\",true)));\n        }\n        return stretch;\n      },\n      PHTMLstretchV: function (h,d) {\n        var span = this.PHTMLspanElement(), bbox = this.PHTML; //bbox.w = .4; // ## adjust width\n        var values = this.getValues(\"symmetric\",\"maxsize\",\"minsize\");\n        if (values.symmetric) {H = 2*Math.max(h-.25,d+.25)} else {H = h + d}\n        values.maxsize = PHTML.length2em(values.maxsize,bbox.h+bbox.d);\n        values.minsize = PHTML.length2em(values.minsize,bbox.h+bbox.d);\n        H = Math.max(values.minsize,Math.min(values.maxsize,H));\n        var scale = H/(bbox.h+bbox.d-.3);  // ### adjusted for extra tall bbox\n        var box = HTML.Element(\"span\",{style:{\"font-size\":PHTML.Em(scale)}});\n        if (scale > 1.25) {\n          var sX = Math.ceil(1.25/scale * 10);\n          box.className = \"MJXp-right MJXp-scale\"+sX;\n          box.style.marginLeft = PHTML.Em(bbox.w*(sX/10-1)+.07);\n          bbox.w *= scale*sX/10;\n        }\n        box.appendChild(span.firstChild); span.appendChild(box);\n        if (values.symmetric) span.style.verticalAlign = PHTML.Em(.25*(1-scale));\n      }\n    });\n\n    MML.mspace.Augment({\n      toPreviewHTML: function (span) {\n        span = this.PHTMLdefaultSpan(span);\n        var values = this.getValues(\"height\",\"depth\",\"width\");\n        var w = PHTML.length2em(values.width),\n            h = PHTML.length2em(values.height),\n            d = PHTML.length2em(values.depth);\n        var bbox = this.PHTML;\n        bbox.w = w; bbox.h = h; bbox.d = d;\n        if (w < 0) {\n          //  ### FIXME:  lastIsInt hack\n          if (!PHTML.lastIsInt) span.style.marginLeft = PHTML.Em(w);\n          w = 0;\n        }\n        span.style.width = PHTML.Em(w);\n        span.style.height = PHTML.Em(h+d);\n        if (d) span.style.verticalAlign = PHTML.Em(-d);\n        return span;\n      }\n    });\n\n    MML.mpadded.Augment({\n      toPreviewHTML: function (span) {\n        span = this.PHTMLdefaultSpan(span,{\n          childSpans:true, className:\"MJXp-box\", forceChild:true\n        });\n        var child = span.firstChild;\n        var values = this.getValues(\"width\",\"height\",\"depth\",\"lspace\",\"voffset\");\n        var dimen = this.PHTMLdimen(values.lspace);\n        var T = 0, B = 0, L = dimen.len, R = -dimen.len, V = 0;\n        if (values.width !== \"\") {\n          dimen = this.PHTMLdimen(values.width,\"w\",0);\n          if (dimen.pm) {R += dimen.len} else {span.style.width = PHTML.Em(dimen.len)}\n        }\n        if (values.height !== \"\") {\n          dimen = this.PHTMLdimen(values.height,\"h\",0);\n          if (!dimen.pm) T += -this.PHTMLbboxFor(0).h;\n          T += dimen.len;\n        }\n        if (values.depth !== \"\")  {\n          dimen = this.PHTMLdimen(values.depth,\"d\",0);\n          if (!dimen.pm) {B += -this.PHTMLbboxFor(0).d; V += -dimen.len}\n          B += dimen.len;\n        }\n        if (values.voffset !== \"\") {\n          dimen = this.PHTMLdimen(values.voffset);\n          T -= dimen.len; B += dimen.len;\n          V += dimen.len;\n        }\n        if (T) child.style.marginTop = PHTML.Em(T);\n        if (B) child.style.marginBottom = PHTML.Em(B);\n        if (L) child.style.marginLeft = PHTML.Em(L);\n        if (R) child.style.marginRight = PHTML.Em(R);\n        if (V) span.style.verticalAlign = PHTML.Em(V);\n        return span;\n      },\n      PHTMLdimen: function (length,d,m) {\n        if (m == null) {m = -BIGDIMEN}\n        length = String(length);\n        var match = length.match(/width|height|depth/);\n        var size = (match ? this.PHTML[match[0].charAt(0)] : (d ? this.PHTML[d] : 0));\n        return {len: PHTML.length2em(length,size)||0, pm: !!length.match(/^[-+]/)};\n      }\n    });\n\n    MML.munderover.Augment({\n      toPreviewHTML: function (span) {\n\tvar values = this.getValues(\"displaystyle\",\"accent\",\"accentunder\",\"align\");\n        var base = this.data[this.base];\n\tif (!values.displaystyle && base != null &&\n\t    (base.movablelimits || base.CoreMO().Get(\"movablelimits\"))) {\n          span = MML.msubsup.prototype.toPreviewHTML.call(this,span);\n          //\n          //  Change class to msubsup for CSS rules.\n          //  ### FIXME: should this be handled via adding another class instead?\n          //\n          span.className = span.className.replace(/munderover/,\"msubsup\");\n          return span;\n        }\n        span = this.PHTMLdefaultSpan(span,{childSpans:true, className:\"\", noBBox:true});\n        var obox = this.PHTMLbboxFor(this.over),\n            ubox = this.PHTMLbboxFor(this.under),\n            bbox = this.PHTMLbboxFor(this.base),\n            BBOX = this.PHTML, acc = obox.acc;\n        if (this.data[this.over]) {\n          span.lastChild.firstChild.style.marginLeft = obox.l =\n            span.lastChild.firstChild.style.marginRight = obox.r = 0;\n          var over = HTML.Element(\"span\",{},[[\"span\",{className:\"MJXp-over\"}]]);\n          over.firstChild.appendChild(span.lastChild);\n          if (span.childNodes.length > (this.data[this.under] ? 1 : 0))\n            over.firstChild.appendChild(span.firstChild);\n          this.data[this.over].PHTMLhandleScriptlevel(over.firstChild.firstChild);\n          if (acc != null) {\n            if (obox.vec) {\n              over.firstChild.firstChild.firstChild.style.fontSize = \"60%\";\n              obox.h *= .6; obox.d *= .6; obox.w *= .6;\n            }\n            acc = acc - obox.d + .1; if (bbox.t != null) {acc += bbox.t - bbox.h}\n            over.firstChild.firstChild.style.marginBottom = PHTML.Em(acc);\n          }\n          if (span.firstChild) {span.insertBefore(over,span.firstChild)}\n            else {span.appendChild(over)}\n        }\n        if (this.data[this.under]) {\n          span.lastChild.firstChild.style.marginLeft = ubox.l =\n            span.lastChild.firstChild.marginRight = ubox.r = 0;\n          this.data[this.under].PHTMLhandleScriptlevel(span.lastChild);\n        }\n        BBOX.w = Math.max(.8*obox.w,.8*ubox.w,bbox.w);\n        BBOX.h = .8*(obox.h+obox.d+(acc||0)) + bbox.h;\n        BBOX.d = bbox.d + .8*(ubox.h+ubox.d);\n        return span;\n      }\n    });\n\n    MML.msubsup.Augment({\n      toPreviewHTML: function (span) {\n        span = this.PHTMLdefaultSpan(span,{noBBox:true});\n        if (!this.data[this.base]) {\n          if (span.firstChild) {span.insertBefore(HTML.Element(\"span\"),span.firstChild)}\n            else {span.appendChild(HTML.Element(\"span\"))}\n        }\n        var base = this.data[this.base], sub = this.data[this.sub], sup = this.data[this.sup];\n        if (!base) base = {bbox: {h:.8, d:.2}};\n        span.firstChild.style.marginRight = \".05em\";\n        var h = Math.max(.4,base.PHTML.h-.4),\n            d = Math.max(.2,base.PHTML.d+.1);\n        var bbox = this.PHTML;\n        if (sup && sub) {\n          var box = HTML.Element(\"span\",{className:\"MJXp-script-box\", style:{\n            height: PHTML.Em(h+sup.PHTML.h*.8 + d+sub.PHTML.d*.8),\n            \"vertical-align\": PHTML.Em(-d-sub.PHTML.d*.8)\n          }},[\n            [\"span\",{},[[\"span\",{},[[\"span\",{\n              style:{\"margin-bottom\":PHTML.Em(-(sup.PHTML.d-.05))}\n            }]]]]],\n            [\"span\",{},[[\"span\",{},[[\"span\",{\n              style:{\"margin-top\":PHTML.Em(-(sup.PHTML.h-.05))}\n            }]]]]]\n          ]);\n          sub.PHTMLhandleScriptlevel(box.firstChild);\n          sup.PHTMLhandleScriptlevel(box.lastChild);\n          box.firstChild.firstChild.firstChild.appendChild(span.lastChild);\n          box.lastChild.firstChild.firstChild.appendChild(span.lastChild);\n          span.appendChild(box);\n          bbox.h = Math.max(base.PHTML.h,sup.PHTML.h*.8+h);\n          bbox.d = Math.max(base.PHTML.d,sub.PHTML.d*.8+d);\n          bbox.w = base.PHTML.w + Math.max(sup.PHTML.w,sub.PHTML.w) + .07;\n        } else if (sup) {\n          span.lastChild.style.verticalAlign = PHTML.Em(h);\n          sup.PHTMLhandleScriptlevel(span.lastChild);\n          bbox.h = Math.max(base.PHTML.h,sup.PHTML.h*.8+h);\n          bbox.d = Math.max(base.PHTML.d,sup.PHTML.d*.8-h);\n          bbox.w = base.PHTML.w + sup.PHTML.w + .07;\n        } else if (sub) {\n          span.lastChild.style.verticalAlign = PHTML.Em(-d);\n          sub.PHTMLhandleScriptlevel(span.lastChild);\n          bbox.h = Math.max(base.PHTML.h,sub.PHTML.h*.8-d);\n          bbox.d = Math.max(base.PHTML.d,sub.PHTML.d*.8+d);\n          bbox.w = base.PHTML.w + sub.PHTML.w + .07;\n        }\n        return span;\n      }\n    });\n\n    MML.mfrac.Augment({\n      toPreviewHTML: function (span) {\n        span = this.PHTMLdefaultSpan(span,{\n          childSpans:true, className:\"MJXp-box\", forceChild:true, noBBox:true\n        });\n        var values = this.getValues(\"linethickness\",\"displaystyle\");\n        if (!values.displaystyle) {\n          if (this.data[0]) this.data[0].PHTMLhandleScriptlevel(span.firstChild);\n          if (this.data[1]) this.data[1].PHTMLhandleScriptlevel(span.lastChild);\n        }\n        var denom = HTML.Element(\"span\",{className:\"MJXp-box\"},[\n          [\"span\",{className:\"MJXp-denom\"},[                        // inline-table\n            [\"span\",{},[[\"span\",{className:\"MJXp-rule\",style:{height:\"1em\"}}]]],\n            [\"span\"]                                                // spans are table-row\n          ]]\n        ]);\n        denom.firstChild.lastChild.appendChild(span.lastChild);\n        span.appendChild(denom);\n        var nbox = this.PHTMLbboxFor(0), dbox = this.PHTMLbboxFor(1), bbox = this.PHTML;\n        bbox.w = Math.max(nbox.w,dbox.w) * .8;\n        bbox.h = nbox.h+nbox.d + .1 + .25;\n        bbox.d = dbox.h+dbox.d - .25;\n        bbox.l = bbox.r = .125;\n        values.linethickness = Math.max(0,PHTML.length2em(values.linethickness||\"0\",0));\n        if (values.linethickness) {\n          var rule = denom.firstChild.firstChild.firstChild;\n          var t = PHTML.Em(values.linethickness);\n          rule.style.borderTop = \"none\";\n          rule.style.borderBottom = (values.linethickness < .15 ? \"1px\" : t)+\" solid\";\n          rule.style.margin = t+\" 0\";\n          t = values.linethickness;\n          denom.style.marginTop = PHTML.Em(3*t-1.2);\n          span.style.verticalAlign = PHTML.Em(1.5*t + .1);\n          bbox.h += 1.5*t - .1; bbox.d += 1.5*t;\n        } else {\n          denom.style.marginTop = \"-.7em\";\n        }\n        return span;\n      }\n    });\n\n    MML.msqrt.Augment({\n      toPreviewHTML: function (span) {\n        span = this.PHTMLdefaultSpan(span,{\n          childSpans:true, className:\"MJXp-box\", forceChild:true, noBBox:true\n        });\n        this.PHTMLlayoutRoot(span,span.firstChild);\n        return span;\n      },\n      PHTMLlayoutRoot: function (span,base) {\n        var bbox = this.PHTMLbboxFor(0);\n        var scale = Math.ceil((bbox.h+bbox.d+.14)*100), t = PHTML.Em(14/scale);\n        var surd = HTML.Element(\"span\",{className:\"MJXp-surd\"},[\n          [\"span\",{style:{\"font-size\":scale+\"%\",\"margin-top\":t}},[\"\\u221A\"]]\n        ]);\n        var root = HTML.Element(\"span\",{className:\"MJXp-root\"},[\n          [\"span\",{className:\"MJXp-rule\",style:{\"border-top\":\".08em solid\"}}]\n        ]);\n        var W = (1.2/2.2)*scale/100; // width-of-surd = (height/H-to-W-ratio)\n        if (scale > 150) {\n          var sX = Math.ceil(150/scale * 10);\n          surd.firstChild.className = \"MJXp-right MJXp-scale\"+sX;\n          surd.firstChild.style.marginLeft = PHTML.Em(W*(sX/10-1)/scale*100);\n          W = W*sX/10;\n          root.firstChild.style.borderTopWidth = PHTML.Em(.08/Math.sqrt(sX/10));\n        }\n        root.appendChild(base);\n        span.appendChild(surd);\n        span.appendChild(root);\n        this.PHTML.h = bbox.h + .18; this.PHTML.d = bbox.d;\n        this.PHTML.w = bbox.w + W; \n        return span;\n      }\n    });\n\n    MML.mroot.Augment({\n      toPreviewHTML: function (span) {\n        span = this.PHTMLdefaultSpan(span,{\n          childSpans:true, className:\"MJXp-box\", forceChild:true, noBBox:true\n        });\n        var rbox = this.PHTMLbboxFor(1), root = span.removeChild(span.lastChild);\n        var sqrt = this.PHTMLlayoutRoot(HTML.Element(\"span\"),span.firstChild);\n        root.className = \"MJXp-script\";  // ### FIXME: should be scriptscript\n        var scale = parseInt(sqrt.firstChild.firstChild.style.fontSize);\n        var v = .55*(scale/120) + rbox.d*.8, r = -.6*(scale/120);\n        if (scale > 150) {r *= .95*Math.ceil(150/scale*10)/10}\n        root.style.marginRight = PHTML.Em(r); root.style.verticalAlign = PHTML.Em(v);\n        if (-r > rbox.w*.8) root.style.marginLeft = PHTML.Em(-r-rbox.w*.8); // ### depends on rbox.w\n        span.appendChild(root); span.appendChild(sqrt);\n        this.PHTML.w += Math.max(0,rbox.w*.8+r);\n        this.PHTML.h = Math.max(this.PHTML.h,rbox.h*.8+v);\n        return span;\n      },\n      PHTMLlayoutRoot: MML.msqrt.prototype.PHTMLlayoutRoot\n    });\n    \n    MML.mfenced.Augment({\n      toPreviewHTML: function (span) {\n        span = this.PHTMLcreateSpan(span);\n        this.PHTMLhandleStyle(span);\n        this.PHTMLhandleColor(span);\n        //\n        //  Make row of open, data, sep, ... data, close\n        //\n        this.addFakeNodes();\n        this.PHTMLaddChild(span,\"open\",{});\n        for (var i = 0, m = this.data.length; i < m; i++) {\n          this.PHTMLaddChild(span,\"sep\"+i,{});\n          this.PHTMLaddChild(span,i,{});\n        }\n        this.PHTMLaddChild(span,\"close\",{});\n        //\n        //  Check for streching the elements\n        //\n        var H = this.PHTML.h, D = this.PHTML.d;\n        this.PHTMLstretchChild(\"open\",H,D);\n        for (i = 0, m = this.data.length; i < m; i++) {\n          this.PHTMLstretchChild(\"sep\"+i,H,D);\n          this.PHTMLstretchChild(i,H,D);\n        }\n        this.PHTMLstretchChild(\"close\",H,D);\n        return span;\n      }\n    });\n\n    MML.mrow.Augment({\n      toPreviewHTML: function (span) {\n        span = this.PHTMLdefaultSpan(span);\n        var H = this.PHTML.h, D = this.PHTML.d;\n        for (var i = 0, m = this.data.length; i < m; i++) this.PHTMLstretchChild(i,H,D);\n        return span;\n      }\n    });\n\n    MML.mstyle.Augment({\n      toPreviewHTML: function (span) {\n        span = this.PHTMLdefaultSpan(span);\n        this.PHTMLhandleScriptlevel(span);\n        return span;\n      }\n    });\n\n    MML.TeXAtom.Augment({\n      toPreviewHTML: function (span) {\n        span = this.PHTMLdefaultSpan(span);\n        // ### FIXME: handle TeX class?\n        span.className = \"MJXp-mrow\";\n        return span;\n      }\n    });\n\n    MML.mtable.Augment({\n      toPreviewHTML: function (span) {\n        span = this.PHTMLdefaultSpan(span,{noBBox:true});\n        var values = this.getValues(\"columnalign\",\"rowalign\",\"columnspacing\",\"rowspacing\",\n                                    \"columnwidth\",\"equalcolumns\",\"equalrows\",\n                                    \"columnlines\",\"rowlines\",\"frame\",\"framespacing\",\n                                    \"align\",\"width\");\n        var SPLIT = MathJax.Hub.SplitList, i, m, j, n;\n        var CSPACE = SPLIT(values.columnspacing),\n            RSPACE = SPLIT(values.rowspacing),\n            CALIGN = SPLIT(values.columnalign),\n            RALIGN = SPLIT(values.rowalign);\n        for (i = 0, m = CSPACE.length; i < m; i++) {CSPACE[i] = PHTML.length2em(CSPACE[i])}\n        for (i = 0, m = RSPACE.length; i < m; i++) {RSPACE[i] = PHTML.length2em(RSPACE[i])}\n\n        var table = HTML.Element(\"span\");\n        while (span.firstChild) table.appendChild(span.firstChild);\n        span.appendChild(table);\n        var H = 0, W = 0;\n        for (i = 0, m = this.data.length; i < m; i++) {\n          var row = this.data[i];\n          if (row) {\n            var rspace = PHTML.arrayEntry(RSPACE,i-1), ralign = PHTML.arrayEntry(RALIGN,i);\n            var rbox = row.PHTML, rspan = row.PHTMLspanElement();\n            rspan.style.verticalAlign = ralign;\n            var k = (row.type === \"mlabeledtr\" ? 1 : 0);\n            for (j = 0, n = row.data.length; j < n-k; j++) {\n              var cell = row.data[j+k];\n              if (cell) {\n                var cspace = PHTML.arrayEntry(CSPACE,j-1), calign = PHTML.arrayEntry(CALIGN,j);\n                var cspan = cell.PHTMLspanElement();\n                if (j) {rbox.w += cspace; cspan.style.paddingLeft = PHTML.Em(cspace)}\n                if (i) cspan.style.paddingTop = PHTML.Em(rspace);\n                cspan.style.textAlign = calign;\n              }\n            }\n            H += rbox.h + rbox.d; if (i) {H += rspace}\n            if (rbox.w > W) W = rbox.w;\n          }\n        }\n        var bbox = this.PHTML;\n        bbox.w = W; bbox.h = H/2 + .25; bbox.d = H/2 - .25;\n        bbox.l = bbox.r = .125;\n        return span;\n      }\n    });\n    MML.mlabeledtr.Augment({\n      PHTMLdefaultSpan: function (span,options) {\n        if (!options) options = {};\n        span = this.PHTMLcreateSpan(span);\n        this.PHTMLhandleStyle(span);\n        this.PHTMLhandleColor(span);\n        if (this.isToken) this.PHTMLhandleToken(span);\n        // skip label for now\n        for (var i = 1, m = this.data.length; i < m; i++) this.PHTMLaddChild(span,i,options);\n        return span;\n      }\n    });\n\n    MML.semantics.Augment({\n      toPreviewHTML: function (span) {\n        span = this.PHTMLcreateSpan(span);\n        if (this.data[0]) {\n          this.data[0].toPreviewHTML(span);\n          MathJax.Hub.Insert(this.data[0].PHTML||{},this.PHTML);\n        }\n        return span;\n      }\n    });\n    MML.annotation.Augment({toPreviewHTML: function(span) {}});\n    MML[\"annotation-xml\"].Augment({toPreviewHTML: function(span) {}});\n\n    //\n    //  Loading isn't complete until the element jax is modified,\n    //  but can't call loadComplete within the callback for \"mml Jax Ready\"\n    //  (it would call PreviewHTML's Require routine, asking for the mml jax again)\n    //  so wait until after the mml jax has finished processing.\n    //  \n    //  We also need to wait for the onload handler to run, since the loadComplete\n    //  will call Config and Startup, which need to modify the body.\n    //\n    MathJax.Hub.Register.StartupHook(\"onLoad\",function () {\n      setTimeout(MathJax.Callback([\"loadComplete\",PHTML,\"jax.js\"]),0);\n    });\n  });\n\n  MathJax.Hub.Register.StartupHook(\"End Cookie\", function () {  \n    if (HUB.config.menuSettings.zoom !== \"None\")\n      {AJAX.Require(\"[MathJax]/extensions/MathZoom.js\")}\n  });\n    \n})(MathJax.Ajax,MathJax.Hub,MathJax.HTML,MathJax.OutputJax.PreviewHTML);\n"]}]}