{"remainingRequest":"/home/hads/Documents/pfe-documentations/CoreUI-Vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hads/Documents/pfe-documentations/CoreUI-Vue/src/views/crud/CreateSensor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hads/Documents/pfe-documentations/CoreUI-Vue/src/views/crud/CreateSensor.vue","mtime":1597254600930},{"path":"/home/hads/Documents/pfe-documentations/CoreUI-Vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hads/Documents/pfe-documentations/CoreUI-Vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/hads/Documents/pfe-documentations/CoreUI-Vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hads/Documents/pfe-documentations/CoreUI-Vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgQ3Jvd2RTZXJ2aWNlcyBmcm9tICdAL3NlcnZpY2VzL0Nyb3dkU2VydmljZXMuanMnCmltcG9ydCBNb2RhbCBmcm9tICdAL2NvbXBvbmVudHMvTW9kYWwnCmltcG9ydCBUYWJsZSBmcm9tICdAL2NvbXBvbmVudHMvVGFibGUnCmltcG9ydCBFZGl0Rm9ybSBmcm9tICdAL2NvbXBvbmVudHMvRWRpdEZvcm0nCmltcG9ydCBBY3Rpb25CdXR0b24gZnJvbSAnQC9jb21wb25lbnRzL0FjdGlvbkJ1dHRvbicKaW1wb3J0IGFwaUNsaWVudCBmcm9tICdAL3NlcnZpY2VzL0Nyb3dkU2VydmljZXMuanMnCmltcG9ydCAkIGZyb20gJ2pxdWVyeScKaW1wb3J0IHtUb2FzdCxNb2RhbCBhcyBjTW9kYWx9IGZyb20gJ0Bjb3JldWkvY29yZXVpJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDcmVhdGVTZW5zb3InLAogIGNvbXBvbmVudHM6ewogICAgTW9kYWwsCiAgICBUYWJsZSwKICAgIEFjdGlvbkJ1dHRvbiwKICAgIEVkaXRGb3JtCiAgfSwKICBkYXRhKCl7CiAgICByZXR1cm4gewogICAgICBib29sTW9kYWwxOiBmYWxzZSwKICAgICAgdmFscjogbnVsbCwKICAgICAgbmFtZVNlbnNvciA6IG51bGwsCiAgICAgIG5hbWVab25lIDogbnVsbCwKICAgICAgc2Vuc29yRGVzYyA6IG51bGwsCiAgICAgIHR5cGVTYyA6ICcnLAogICAgICB0eXBlcyA6IFt7aWQ6MSxuYW1lOidTY8OobmUgbGFyZ2Ugw6ljaGVsbGUnfSx7aWQ6MixuYW1lOidTY8OobmUgbW95ZW4gw6ljaGVsbGUnfV0sCiAgICAgIGFsbERCc2Vuc29yczogW10sCiAgICAgIGVkaXRGb3JtRGF0YToge30sCiAgICAgIGRlbGV0ZWRTZW5zb3I6IHt9CiAgICB9CiAgfSwKICBtZXRob2RzOnsKCiAgICBvblN1Ym1pdCgpewogICAgICB2YXIgZGF0YSA9IHsnc2Vuc29yX25hbWUnOiB0aGlzLm5hbWVTZW5zb3IsCiAgICAgICAgICAgICAgJ3NlbnNvcl96b25lJzogdGhpcy5uYW1lWm9uZSwKICAgICAgICAgICAgICAnc2Vuc29yX2Rlc2MnOiB0aGlzLnNlbnNvckRlc2MsCiAgICAgICAgICAgICAgJ3NlbnNvcl90eXBlX25hbWUnOiB0aGlzLnR5cGVTYy50ZXh0LAogICAgICAgICAgICAgICdzZW5zb3JfdHlwZV9pZCc6IHRoaXMudHlwZVNjLmlkCiAgICAgIH0KICAgICAgQ3Jvd2RTZXJ2aWNlcy5wb3N0U2Vuc29yRGF0YShkYXRhKS4KICAgICAgICB0aGVuKCgpPT57IAogICAgICAgICAgICB2YXIgbXlNb2RhbCA9IG5ldyBjTW9kYWwoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NyZWF0ZU1vZGFsJykpCiAgICAgICAgICAgIG15TW9kYWwuc2hvdygpCiAgICAgICAgICAgIHRoaXMuZ2V0TXlTZW5zb3JzKCkKICAgICAgICB9KQogICAgICBDcm93ZFNlcnZpY2VzLnJlZ2lzdGVyU2Vuc29yKHRoaXMubmFtZVNlbnNvcix0aGlzLnR5cGVTYy50ZXh0KQogICAgICB0aGlzLm5hbWVTZW5zb3IgPSBudWxsOwogICAgICB0aGlzLm5hbWVab25lID0gbnVsbDsKICAgICAgdGhpcy5zZW5zb3JEZXNjID0gbnVsbDsKICAgICAgdGhpcy50eXBlU2MgPSAnJzsKICAgIH0sCgogICAgZWRpdFNlbnNvck1vZGFsKFNlbnNvcil7CiAgICAgIHZhciBteU1vZGFsID0gbmV3IGNNb2RhbChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZU1vZGFsJykpCiAgICAgIHRoaXMuZWRpdEZvcm1EYXRhID0gT2JqZWN0LmFzc2lnbih7fSxTZW5zb3IpCiAgICAgIG15TW9kYWwuc2hvdygpCiAgICB9LAoKICAgIGRlbGV0ZVNlbnNvck1vZGFsKFNlbnNvcil7CiAgICAgIHZhciBteU1vZGFsID0gbmV3IGNNb2RhbChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVsZXRlTW9kYWwnKSkKICAgICAgdGhpcy5kZWxldGVkU2Vuc29yID0gT2JqZWN0LmFzc2lnbih7fSxTZW5zb3IpCiAgICAgIG15TW9kYWwuc2hvdygpCgogICAgfSwKCiAgICBkZWxldGVTZW5zb3IoKXsKICAgICAgQ3Jvd2RTZXJ2aWNlcy5kZWxldGVTZW5zb3JSZXF1ZXN0KHRoaXMuZGVsZXRlZFNlbnNvci5pZCkuCiAgICAgICAgdGhlbigoKT0+ewogICAgICAgICAgICB0aGlzLmdldE15U2Vuc29ycygpCiAgICAgICAgICAgIHZhciBteU1vZGFsRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVsZXRlTW9kYWwnKQogICAgICAgICAgICB2YXIgbXlNb2RhbCA9IGNNb2RhbC5nZXRJbnN0YW5jZShteU1vZGFsRWwpCiAgICAgICAgICAgIG15TW9kYWwuaGlkZSgpICAKICAgICAgICB9KQogICAgICAvL3ZhciBteU1vZGFsID0gbmV3IGNNb2RhbChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVsZXRlTW9kYWwnKSkKICAgICAgLy92YXIgbXlNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWxldGVNb2RhbCcpICAKICAgIH0sCgogICAgcG9zdEVkaXRlZERhdGEoZWRpdGVkRCl7CiAgICAgIHZhciBkYXRhID0geydzZW5zb3JfbmFtZSc6IGVkaXRlZEQuc2Vuc29yX25hbWUsCiAgICAgICAgICAgICAgJ3NlbnNvcl96b25lJzogZWRpdGVkRC5zZW5zb3Jfem9uZSwKICAgICAgICAgICAgICAnc2Vuc29yX2Rlc2MnOiBlZGl0ZWRELnNlbnNvcl9kZXNjLAogICAgICAgICAgICAgICdzZW5zb3JfdHlwZV9uYW1lJzogZWRpdGVkRC5zZW5zb3JfdHlwZV9uYW1lLAogICAgICAgICAgICAgICdzZW5zb3JfdHlwZV9pZCc6IGVkaXRlZEQuc2Vuc29yX3R5cGVfaWQKICAgICAgfQogICAgICBDcm93ZFNlcnZpY2VzLnBvc3RFZGl0RGF0YShlZGl0ZWRELmlkLGRhdGEpLgogICAgICAgIHRoZW4oKCk9PnsKICAgICAgICAgIHRoaXMuZ2V0TXlTZW5zb3JzKCkKICAgICAgICAgIHZhciBteU1vZGFsRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZU1vZGFsJykKICAgICAgICAgIHZhciBteU1vZGFsID0gY01vZGFsLmdldEluc3RhbmNlKG15TW9kYWxFbCkKICAgICAgICAgIG15TW9kYWwuaGlkZSgpICAKICAgICAgICB9KQogICAgICBlZGl0Rm9ybURhdGE6IHt9CiAgICB9LAoKICAgIGdldE15U2Vuc29ycygpewogICAgICAgIENyb3dkU2VydmljZXMuZ2V0U2Vuc29ycygpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKT0+ewogICAgICAgICAgdGhpcy5hbGxEQnNlbnNvcnMgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuYWxsREJzZW5zb3JzWzBdLnNlbnNvcl9uYW1lKQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+ewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgICAgfSkgCiAgICB9LAoKICAgIGNsb3NlX2VkaXQoKXsKICAgICAgdmFyIG15TW9kYWwgPSBuZXcgY01vZGFsKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleGFtcGxlTW9kYWwnKSkKICAgICAgY29uc29sZS5sb2coJ3dzYWx0JykKICAgICAgLy9teU1vZGFsLmhpZGUoKQogICAgICBjb25zb2xlLmxvZygnd3NhbHQyJykKICAgIH0KCiAgfSwKICBjcmVhdGVkKCl7CiAgICB0aGlzLmdldE15U2Vuc29ycygpIAogIH0sCiAgY29tcHV0ZWQ6ewogICAgdGVzdCgpewogICAgICByZXR1cm4gdGhpcy50eXBlU2MudGV4dCsiICIrdGhpcy5uYW1lU2Vuc29yKyIgIit0aGlzLm5hbWVab25lCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["CreateSensor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateSensor.vue","sourceRoot":"src/views/crud","sourcesContent":["<template>\n\t<div>\n\t\t <CRow>\n      <CCol sm=\"12\" md=\"12\">\n        <CCard>\n          <CCardHeader>\n            <h3>Création d'un capteur</h3>\n          </CCardHeader>\n          <CCardBody>\n              <form @submit.prevent=\"onSubmit\"  method=\"post\">   \n                <div class=\"form-group\">\n                  <label for=\"sensorName\">Nom Capteur</label>\n                  <input v-model=\"nameSensor\" type=\"text\" class=\"form-control\" id=\"sensorName\" placeholder=\"Entrer nom...\">\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"sensorZone\">Nom de la zone</label>\n                  <input v-model=\"nameZone\" type=\"text\" class=\"form-control\" id=\"sensorZone\" placeholder=\"Entrer nom de la zone...\">\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"sensorDescription\">Description du capteur</label>\n                  <textarea v-model=\"sensorDesc\" class=\"form-control\" id=\"sensorDescription\" rows=\"3\"></textarea>\n                </div>\n\n                \n                <div class=\"form-group\">\n                  <label for=\"typeScene\">Type de la scène</label>\n                  <select  v-model=\"typeSc\" class=\"form-control\" id=\"typeScene\" placeholder=\"Choisir type...\">\n                    <option v-for=\"type in types\" v-bind:value=\"{ id: type.id, text: type.name }\">{{ type.name }}\n                    </option>\n                  </select>\n                </div>\n                <Button type=\"submit\" class=\"btn btn-primary  btn-block\">Créer capteur</Button>\n              </form>\n          </CCardBody>\n          <CCardFooter>\n            \n          </CCardFooter>\n        </CCard>\n\n        <!-- Button trigger modal --\n        <button type=\"button\" class=\"btn btn-primary\" @click=\"boolModal1 = true\">\n          Launch demo modal\n        </button>-->\n        <Modal  id=\"exampleModal\"  @close=\"boolModal1 = false\">\n              \n                <h2 slot=\"title\">Modification Capteur</h2>\n                <EditForm slot=\"body_content\" :editFormData=\"editFormData\" @edit-done=\"postEditedData\" @cancel-edit=\"close_edit\"/>\n        </Modal>\n\n        <Modal id=\"deleteModal\">\n            <h1 slot=\"title\">Confirmer la suppression</h1>\n            <p slot=\"body_content\">Êtes vous sur de vouloir supprimer ?</p>\n            <button @click=\"deleteSensor\" slot=\"button1\" type=\"button\" class=\"btn btn-danger\" >Supprimer</button>\n            <button slot=\"button2\" type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Annuler</button>\n        </Modal>\n\n        <Modal id=\"createModal\">\n            <div slot=\"body_content\" class=\"alert alert-success\" role=\"alert\">\n              <h2> Capteur créer avec succès !</h2> \n            </div>\n            <button slot=\"button2\" type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Fermer</button>\n        </Modal>  \n      </CCol>\n\n    </CRow>\n    <CRow id=\"sensorTable\">\n      <CCol sm=\"12\" md=\"12\">\n        <CCard>\n          <CCardBody >\n              <Table  :allDBsensors=\"allDBsensors\" @delete-action=\"deleteSensorModal\" @edit-action=\"editSensorModal\" />\n          </CCardBody>  \n        </CCard>    \n      </CCol>\n    </CRow>\n\n\t</div>\n</template>\n\n<script>\n\nimport CrowdServices from '@/services/CrowdServices.js'\nimport Modal from '@/components/Modal'\nimport Table from '@/components/Table'\nimport EditForm from '@/components/EditForm'\nimport ActionButton from '@/components/ActionButton'\nimport apiClient from '@/services/CrowdServices.js'\nimport $ from 'jquery'\nimport {Toast,Modal as cModal} from '@coreui/coreui'\n\nexport default {\n  name: 'CreateSensor',\n  components:{\n    Modal,\n    Table,\n    ActionButton,\n    EditForm\n  },\n  data(){\n    return {\n      boolModal1: false,\n      valr: null,\n      nameSensor : null,\n      nameZone : null,\n      sensorDesc : null,\n      typeSc : '',\n      types : [{id:1,name:'Scène large échelle'},{id:2,name:'Scène moyen échelle'}],\n      allDBsensors: [],\n      editFormData: {},\n      deletedSensor: {}\n    }\n  },\n  methods:{\n\n    onSubmit(){\n      var data = {'sensor_name': this.nameSensor,\n              'sensor_zone': this.nameZone,\n              'sensor_desc': this.sensorDesc,\n              'sensor_type_name': this.typeSc.text,\n              'sensor_type_id': this.typeSc.id\n      }\n      CrowdServices.postSensorData(data).\n        then(()=>{ \n            var myModal = new cModal(document.getElementById('createModal'))\n            myModal.show()\n            this.getMySensors()\n        })\n      CrowdServices.registerSensor(this.nameSensor,this.typeSc.text)\n      this.nameSensor = null;\n      this.nameZone = null;\n      this.sensorDesc = null;\n      this.typeSc = '';\n    },\n\n    editSensorModal(Sensor){\n      var myModal = new cModal(document.getElementById('exampleModal'))\n      this.editFormData = Object.assign({},Sensor)\n      myModal.show()\n    },\n\n    deleteSensorModal(Sensor){\n      var myModal = new cModal(document.getElementById('deleteModal'))\n      this.deletedSensor = Object.assign({},Sensor)\n      myModal.show()\n\n    },\n\n    deleteSensor(){\n      CrowdServices.deleteSensorRequest(this.deletedSensor.id).\n        then(()=>{\n            this.getMySensors()\n            var myModalEl = document.getElementById('deleteModal')\n            var myModal = cModal.getInstance(myModalEl)\n            myModal.hide()  \n        })\n      //var myModal = new cModal(document.getElementById('deleteModal'))\n      //var myModal = document.getElementById('deleteModal')  \n    },\n\n    postEditedData(editedD){\n      var data = {'sensor_name': editedD.sensor_name,\n              'sensor_zone': editedD.sensor_zone,\n              'sensor_desc': editedD.sensor_desc,\n              'sensor_type_name': editedD.sensor_type_name,\n              'sensor_type_id': editedD.sensor_type_id\n      }\n      CrowdServices.postEditData(editedD.id,data).\n        then(()=>{\n          this.getMySensors()\n          var myModalEl = document.getElementById('exampleModal')\n          var myModal = cModal.getInstance(myModalEl)\n          myModal.hide()  \n        })\n      editFormData: {}\n    },\n\n    getMySensors(){\n        CrowdServices.getSensors()\n        .then((response)=>{\n          this.allDBsensors = response.data\n          //console.log(this.allDBsensors[0].sensor_name)\n        })\n        .catch(error =>{\n          console.log(error)\n        }) \n    },\n\n    close_edit(){\n      var myModal = new cModal(document.getElementById('exampleModal'))\n      console.log('wsalt')\n      //myModal.hide()\n      console.log('wsalt2')\n    }\n\n  },\n  created(){\n    this.getMySensors() \n  },\n  computed:{\n    test(){\n      return this.typeSc.text+\" \"+this.nameSensor+\" \"+this.nameZone\n    }\n  }\n}\n</script>"]}]}