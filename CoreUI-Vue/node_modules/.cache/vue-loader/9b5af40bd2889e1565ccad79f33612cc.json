{"remainingRequest":"/home/hads/Documents/pfe-documentations/CoreUI-Vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/hads/Documents/pfe-documentations/CoreUI-Vue/src/views/crud/CreateSensor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/hads/Documents/pfe-documentations/CoreUI-Vue/src/views/crud/CreateSensor.vue","mtime":1595187973802},{"path":"/home/hads/Documents/pfe-documentations/CoreUI-Vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hads/Documents/pfe-documentations/CoreUI-Vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/hads/Documents/pfe-documentations/CoreUI-Vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hads/Documents/pfe-documentations/CoreUI-Vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgQ3Jvd2RTZXJ2aWNlcyBmcm9tICdAL3NlcnZpY2VzL0Nyb3dkU2VydmljZXMuanMnCmltcG9ydCBNb2RhbCBmcm9tICdAL2NvbXBvbmVudHMvTW9kYWwnCmltcG9ydCBUYWJsZSBmcm9tICdAL2NvbXBvbmVudHMvVGFibGUnCmltcG9ydCBFZGl0Rm9ybSBmcm9tICdAL2NvbXBvbmVudHMvRWRpdEZvcm0nCmltcG9ydCBBY3Rpb25CdXR0b24gZnJvbSAnQC9jb21wb25lbnRzL0FjdGlvbkJ1dHRvbicKaW1wb3J0IGFwaUNsaWVudCBmcm9tICdAL3NlcnZpY2VzL0Nyb3dkU2VydmljZXMuanMnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NyZWF0ZVNlbnNvcicsCiAgY29tcG9uZW50czp7CiAgICBNb2RhbCwKICAgIFRhYmxlLAogICAgQWN0aW9uQnV0dG9uLAogICAgRWRpdEZvcm0KICB9LAogIGRhdGEoKXsKICAgIHJldHVybiB7CiAgICAgIG5hbWVTZW5zb3IgOiBudWxsLAogICAgICBuYW1lWm9uZSA6IG51bGwsCiAgICAgIHNlbnNvckRlc2MgOiBudWxsLAogICAgICB0eXBlU2MgOiAnJywKICAgICAgdHlwZXMgOiBbe2lkOjEsbmFtZTonU2PDqG5lIGxhcmdlIMOpY2hlbGxlJ30se2lkOjIsbmFtZTonU2PDqG5lIG1veWVuIMOpY2hlbGxlJ31dLAogICAgICBhbGxEQnNlbnNvcnM6IFtdLAogICAgICBlZGl0Rm9ybURhdGE6IHt9LAogICAgICBkZWxldGVkU2Vuc29yOiB7fQogICAgfQogIH0sCiAgbWV0aG9kczp7CgogICAgb25TdWJtaXQoKXsKICAgICAgdmFyIGRhdGEgPSB7J3NlbnNvcl9uYW1lJzogdGhpcy5uYW1lU2Vuc29yLAogICAgICAgICAgICAgICdzZW5zb3Jfem9uZSc6IHRoaXMubmFtZVpvbmUsCiAgICAgICAgICAgICAgJ3NlbnNvcl9kZXNjJzogdGhpcy5zZW5zb3JEZXNjLAogICAgICAgICAgICAgICdzZW5zb3JfdHlwZV9uYW1lJzogdGhpcy50eXBlU2MudGV4dCwKICAgICAgICAgICAgICAnc2Vuc29yX3R5cGVfaWQnOiB0aGlzLnR5cGVTYy5pZAogICAgICB9CiAgICAgIENyb3dkU2VydmljZXMucG9zdFNlbnNvckRhdGEoZGF0YSkKICAgICAgdGhpcy5nZXRNeVNlbnNvcnMoKQogICAgICB0aGlzLm5hbWVTZW5zb3IgPSBudWxsOwogICAgICB0aGlzLm5hbWVab25lID0gbnVsbDsKICAgICAgdGhpcy5zZW5zb3JEZXNjID0gbnVsbDsKICAgICAgdGhpcy50eXBlU2MgPSAnJzsKICAgICAgdGhpcy5ib29sTW9kYWwxID0gdHJ1ZQogICAgICB2YXIgbXlNb2RhbCA9IG5ldyBjb3JldWkuTW9kYWwoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NyZWF0ZU1vZGFsJykpCiAgICAgIG15TW9kYWwuc2hvdygpCiAgICB9LAoKICAgIGVkaXRTZW5zb3JNb2RhbChTZW5zb3IpewogICAgICB2YXIgbXlNb2RhbCA9IG5ldyBjb3JldWkuTW9kYWwoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4YW1wbGVNb2RhbCcpKQogICAgICB0aGlzLmVkaXRGb3JtRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sU2Vuc29yKQogICAgICBteU1vZGFsLnNob3coKQogICAgfSwKCiAgICBkZWxldGVTZW5zb3JNb2RhbChTZW5zb3IpewogICAgICB2YXIgbXlNb2RhbCA9IG5ldyBjb3JldWkuTW9kYWwoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbGV0ZU1vZGFsJykpCiAgICAgIHRoaXMuZGVsZXRlZFNlbnNvciA9IE9iamVjdC5hc3NpZ24oe30sU2Vuc29yKQogICAgICBteU1vZGFsLnNob3coKQoKICAgIH0sCgogICAgZGVsZXRlU2Vuc29yKCl7CiAgICAgIENyb3dkU2VydmljZXMuZGVsZXRlU2Vuc29yUmVxdWVzdCh0aGlzLmRlbGV0ZWRTZW5zb3IuaWQpCiAgICAgIHRoaXMuZ2V0TXlTZW5zb3JzKCkKICAgIH0sCgogICAgcG9zdEVkaXRlZERhdGEoZWRpdGVkRCl7CiAgICAgIHZhciBkYXRhID0geydzZW5zb3JfbmFtZSc6IGVkaXRlZEQuc2Vuc29yX25hbWUsCiAgICAgICAgICAgICAgJ3NlbnNvcl96b25lJzogZWRpdGVkRC5zZW5zb3Jfem9uZSwKICAgICAgICAgICAgICAnc2Vuc29yX2Rlc2MnOiBlZGl0ZWRELnNlbnNvcl9kZXNjLAogICAgICAgICAgICAgICdzZW5zb3JfdHlwZV9uYW1lJzogZWRpdGVkRC5zZW5zb3JfdHlwZV9uYW1lLAogICAgICAgICAgICAgICdzZW5zb3JfdHlwZV9pZCc6IGVkaXRlZEQuc2Vuc29yX3R5cGVfaWQKICAgICAgfQoKICAgICAgY29uc29sZS5sb2coJ0xpc3RuZWQgYW5kIGNhbGxlZCcpCiAgICAgIENyb3dkU2VydmljZXMucG9zdEVkaXREYXRhKGVkaXRlZEQuaWQsZGF0YSkKICAgICAgZWRpdEZvcm1EYXRhOiB7fQogICAgICB0aGlzLmdldE15U2Vuc29ycygpCiAgICB9LAoKICAgIGdldE15U2Vuc29ycygpewogICAgICAgIENyb3dkU2VydmljZXMuZ2V0U2Vuc29ycygpCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKT0+ewogICAgICAgICAgdGhpcy5hbGxEQnNlbnNvcnMgPSByZXNwb25zZS5kYXRhCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmFsbERCc2Vuc29yc1swXS5zZW5zb3JfbmFtZSkKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnJvciA9PnsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQogICAgICAgIH0pIAogICAgfSwKCiAgICBjbG9zZV9lZGl0KCl7CiAgICAgIHZhciBteU1vZGFsID0gbmV3IGNvcmV1aS5Nb2RhbChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXhhbXBsZU1vZGFsJykpCiAgICAgIGNvbnNvbGUubG9nKCd3c2FsdCcpCiAgICAgIC8vbXlNb2RhbC5oaWRlKCkKICAgICAgY29uc29sZS5sb2coJ3dzYWx0MicpCiAgICB9CgogIH0sCiAgY3JlYXRlZCgpewogICAgdGhpcy5nZXRNeVNlbnNvcnMoKSAKICB9LAogIGNvbXB1dGVkOnsKICAgIHRlc3QoKXsKICAgICAgcmV0dXJuIHRoaXMudHlwZVNjLnRleHQrIiAiK3RoaXMubmFtZVNlbnNvcisiICIrdGhpcy5uYW1lWm9uZQogICAgfQogIH0KfQo="},{"version":3,"sources":["CreateSensor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateSensor.vue","sourceRoot":"src/views/crud","sourcesContent":["<template>\n\t<div>\n\t\t <CRow>\n      <CCol sm=\"12\" md=\"12\">\n        <CCard>\n          <CCardHeader>\n            <h3>Création d'un capteur</h3>\n          </CCardHeader>\n          <CCardBody>\n              <form @submit.prevent=\"onSubmit\"  method=\"post\">   \n                <div class=\"form-group\">\n                  <label for=\"sensorName\">Nom Capteur</label>\n                  <input v-model=\"nameSensor\" type=\"text\" class=\"form-control\" id=\"sensorName\" placeholder=\"Entrer nom...\">\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"sensorZone\">Nom de la zone</label>\n                  <input v-model=\"nameZone\" type=\"text\" class=\"form-control\" id=\"sensorZone\" placeholder=\"Entrer nom de la zone...\">\n                </div>\n\n                <div class=\"form-group\">\n                  <label for=\"sensorDescription\">Description du capteur</label>\n                  <textarea v-model=\"sensorDesc\" class=\"form-control\" id=\"sensorDescription\" rows=\"3\"></textarea>\n                </div>\n\n                \n                <div class=\"form-group\">\n                  <label for=\"typeScene\">Type de la scène</label>\n                  <select  v-model=\"typeSc\" class=\"form-control\" id=\"typeScene\" placeholder=\"Choisir type...\">\n                    <option v-for=\"type in types\" v-bind:value=\"{ id: type.id, text: type.name }\">{{ type.name }}\n                    </option>\n                  </select>\n                </div>\n                <Button type=\"submit\" class=\"btn btn-primary  btn-block\">Créer capteur</Button>\n              </form>\n          </CCardBody>\n          <CCardFooter>\n            \n          </CCardFooter>\n        </CCard>\n        \n\n        <!-- Button trigger modal --\n        <button type=\"button\" class=\"btn btn-primary\" @click=\"boolModal1 = true\">\n          Launch demo modal\n        </button>-->\n        <Modal  id=\"exampleModal\"  @close=\"boolModal1 = false\">\n              \n                <h2 slot=\"title\">Modification Capteur</h2>\n                <EditForm slot=\"body_content\" :editFormData=\"editFormData\" @edit-done=\"postEditedData\" @cancel-edit=\"close_edit\"/>\n        </Modal>\n\n        <Modal id=\"deleteModal\">\n            <h1 slot=\"title\">Confirmer la suppression</h1>\n            <p slot=\"body_content\">Êtes vous sur de vouloir supprimer ?</p>\n            <button @click=\"deleteSensor\" slot=\"button1\" type=\"button\" class=\"btn btn-danger\">Supprimer</button>\n            <button slot=\"button2\" type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Annuler</button>\n        </Modal>\n\n        <Modal id=\"createModal\">\n            <div slot=\"body_content\" class=\"alert alert-success\" role=\"alert\">\n              <h2> Capteur créer avec succès !</h2> \n            </div>\n            <button slot=\"button2\" type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Fermer</button>\n        </Modal>\n\n      </CCol>\n    </CRow>\n    <CRow>\n      <CCol sm=\"12\" md=\"12\">\n        <CCard>\n          <CCardBody>\n              <Table :allDBsensors=\"allDBsensors\" @delete-action=\"deleteSensorModal\" @edit-action=\"editSensorModal\" />\n          </CCardBody>  \n        </CCard>    \n      </CCol>\n    </CRow>\n\t</div>\n</template>\n\n<script>\n\nimport CrowdServices from '@/services/CrowdServices.js'\nimport Modal from '@/components/Modal'\nimport Table from '@/components/Table'\nimport EditForm from '@/components/EditForm'\nimport ActionButton from '@/components/ActionButton'\nimport apiClient from '@/services/CrowdServices.js'\n\nexport default {\n  name: 'CreateSensor',\n  components:{\n    Modal,\n    Table,\n    ActionButton,\n    EditForm\n  },\n  data(){\n    return {\n      nameSensor : null,\n      nameZone : null,\n      sensorDesc : null,\n      typeSc : '',\n      types : [{id:1,name:'Scène large échelle'},{id:2,name:'Scène moyen échelle'}],\n      allDBsensors: [],\n      editFormData: {},\n      deletedSensor: {}\n    }\n  },\n  methods:{\n\n    onSubmit(){\n      var data = {'sensor_name': this.nameSensor,\n              'sensor_zone': this.nameZone,\n              'sensor_desc': this.sensorDesc,\n              'sensor_type_name': this.typeSc.text,\n              'sensor_type_id': this.typeSc.id\n      }\n      CrowdServices.postSensorData(data)\n      this.getMySensors()\n      this.nameSensor = null;\n      this.nameZone = null;\n      this.sensorDesc = null;\n      this.typeSc = '';\n      this.boolModal1 = true\n      var myModal = new coreui.Modal(document.getElementById('createModal'))\n      myModal.show()\n    },\n\n    editSensorModal(Sensor){\n      var myModal = new coreui.Modal(document.getElementById('exampleModal'))\n      this.editFormData = Object.assign({},Sensor)\n      myModal.show()\n    },\n\n    deleteSensorModal(Sensor){\n      var myModal = new coreui.Modal(document.getElementById('deleteModal'))\n      this.deletedSensor = Object.assign({},Sensor)\n      myModal.show()\n\n    },\n\n    deleteSensor(){\n      CrowdServices.deleteSensorRequest(this.deletedSensor.id)\n      this.getMySensors()\n    },\n\n    postEditedData(editedD){\n      var data = {'sensor_name': editedD.sensor_name,\n              'sensor_zone': editedD.sensor_zone,\n              'sensor_desc': editedD.sensor_desc,\n              'sensor_type_name': editedD.sensor_type_name,\n              'sensor_type_id': editedD.sensor_type_id\n      }\n\n      console.log('Listned and called')\n      CrowdServices.postEditData(editedD.id,data)\n      editFormData: {}\n      this.getMySensors()\n    },\n\n    getMySensors(){\n        CrowdServices.getSensors()\n        .then((response)=>{\n          this.allDBsensors = response.data\n          console.log(this.allDBsensors[0].sensor_name)\n        })\n        .catch(error =>{\n          console.log(error)\n        }) \n    },\n\n    close_edit(){\n      var myModal = new coreui.Modal(document.getElementById('exampleModal'))\n      console.log('wsalt')\n      //myModal.hide()\n      console.log('wsalt2')\n    }\n\n  },\n  created(){\n    this.getMySensors() \n  },\n  computed:{\n    test(){\n      return this.typeSc.text+\" \"+this.nameSensor+\" \"+this.nameZone\n    }\n  }\n}\n</script>"]}]}